import{_ as W,h as b,i as F,j as Z,c as N,o as y,a as V,A as K,d as e,w as t,e as d,r as u,a4 as $,z as B,t as h,k as T,E as p,a3 as be,ah as ve,v as X,F as _e,D as ye,n as Ve,aM as Y,aN as he,aO as ke,aP as De,aQ as we,g as Ce}from"./index-BjdeA3Zu.js";import{b as xe,d as Se,c as ze,u as Le,e as Ue}from"./artist-Zzj-7N25.js";const Ae={name:"ArtistManagement",setup(){const S=b(!1),a=b(!1),q=b([]),l=b(!1),A=b("add"),z=b(null),m=F({page:1,size:10,total:0}),i=F({id:null,name:"",avatar:"",region:"",description:""}),k={name:[{required:!0,message:"è¯·è¾“å…¥æ­Œæ‰‹åç§°",trigger:"blur"},{min:1,max:50,message:"é•¿åº¦åœ¨ 1 åˆ° 50 ä¸ªå­—ç¬¦",trigger:"blur"}]},v=async()=>{S.value=!0;try{const f=await xe({page:m.page-1,size:m.size});q.value=f.data.content||[],m.total=f.data.totalElements||0}catch{p.error("èŽ·å–æ­Œæ‰‹åˆ—è¡¨å¤±è´¥")}finally{S.value=!1}},L=()=>{A.value="add",D(),l.value=!0},w=f=>{A.value="edit",i.id=f.id,i.name=f.name,i.avatar=f.avatar||"",i.region=f.region||"",i.description=f.description||"",l.value=!0},D=()=>{i.id=null,i.name="",i.avatar="",i.region="",i.description="",z.value&&z.value.clearValidate()},C=async()=>{z.value&&await z.value.validate(async f=>{if(f)try{a.value=!0;const s={name:i.name,avatar:i.avatar||null,region:i.region||null,description:i.description||null};A.value==="add"?(await ze(s),p.success("æ–°å¢žæˆåŠŸ")):(await Le(i.id,s),p.success("æ›´æ–°æˆåŠŸ")),l.value=!1,v()}catch(s){p.error(s.message||"æ“ä½œå¤±è´¥")}finally{a.value=!1}})},_=async f=>{try{await Se(f),p.success("åˆ é™¤æˆåŠŸ"),v()}catch(s){p.error(s.message||"åˆ é™¤å¤±è´¥")}},r=f=>f?new Date(f).toLocaleString("zh-CN"):"-";return Z(()=>{v()}),{loading:S,submitLoading:a,artistList:q,pagination:m,dialogVisible:l,dialogMode:A,formRef:z,formData:i,formRules:k,fetchArtists:v,showAddDialog:L,showEditDialog:w,handleSubmit:C,handleDelete:_,formatDate:r}}},Me={class:"artist-management"},qe={class:"toolbar"},Be={key:0,style:{"margin-top":"10px"}};function Ne(S,a,q,l,A,z){const m=u("el-button"),i=u("el-table-column"),k=u("el-avatar"),v=u("el-popconfirm"),L=u("el-table"),w=u("el-pagination"),D=u("el-input"),C=u("el-form-item"),_=u("el-form"),r=u("el-dialog"),f=$("loading");return y(),N("div",Me,[V("div",qe,[e(m,{type:"primary",icon:"Plus",onClick:l.showAddDialog},{default:t(()=>[...a[8]||(a[8]=[d(" æ–°å¢žæ­Œæ‰‹ ",-1)])]),_:1},8,["onClick"]),e(m,{icon:"Refresh",onClick:l.fetchArtists},{default:t(()=>[...a[9]||(a[9]=[d("åˆ·æ–°",-1)])]),_:1},8,["onClick"])]),K((y(),B(L,{data:l.artistList,border:"",stripe:"",style:{width:"100%"}},{default:t(()=>[e(i,{type:"index",label:"åºå·",width:"60",align:"center"}),e(i,{label:"å¤´åƒ",width:"80",align:"center"},{default:t(({row:s})=>[e(k,{size:50,src:s.avatar},{default:t(()=>{var E;return[d(h((E=s.name)==null?void 0:E.charAt(0)),1)]}),_:2},1032,["src"])]),_:1}),e(i,{prop:"name",label:"æ­Œæ‰‹åç§°",width:"150"}),e(i,{prop:"region",label:"å›½å®¶/åœ°åŒº",width:"120"}),e(i,{prop:"description",label:"ç®€ä»‹","show-overflow-tooltip":""}),e(i,{prop:"createTime",label:"åˆ›å»ºæ—¶é—´",width:"180"},{default:t(({row:s})=>[d(h(l.formatDate(s.createTime)),1)]),_:1}),e(i,{label:"æ“ä½œ",width:"180",fixed:"right",align:"center"},{default:t(({row:s})=>[e(m,{type:"primary",size:"small",onClick:E=>l.showEditDialog(s)},{default:t(()=>[...a[10]||(a[10]=[d(" ç¼–è¾‘ ",-1)])]),_:1},8,["onClick"]),e(v,{title:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ­Œæ‰‹å—ï¼Ÿ",onConfirm:E=>l.handleDelete(s.id)},{reference:t(()=>[e(m,{type:"danger",size:"small"},{default:t(()=>[...a[11]||(a[11]=[d("åˆ é™¤",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[f,l.loading]]),e(w,{"current-page":l.pagination.page,"onUpdate:currentPage":a[0]||(a[0]=s=>l.pagination.page=s),"page-size":l.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=s=>l.pagination.size=s),total:l.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.fetchArtists,onCurrentChange:l.fetchArtists,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e(r,{modelValue:l.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=s=>l.dialogVisible=s),title:l.dialogMode==="add"?"æ–°å¢žæ­Œæ‰‹":"ç¼–è¾‘æ­Œæ‰‹",width:"600px","close-on-click-modal":!1},{footer:t(()=>[e(m,{onClick:a[6]||(a[6]=s=>l.dialogVisible=!1)},{default:t(()=>[...a[12]||(a[12]=[d("å–æ¶ˆ",-1)])]),_:1}),e(m,{type:"primary",loading:l.submitLoading,onClick:l.handleSubmit},{default:t(()=>[...a[13]||(a[13]=[d(" ç¡®å®š ",-1)])]),_:1},8,["loading","onClick"])]),default:t(()=>[e(_,{ref:"formRef",model:l.formData,rules:l.formRules,"label-width":"100px"},{default:t(()=>[e(C,{label:"æ­Œæ‰‹åç§°",prop:"name"},{default:t(()=>[e(D,{modelValue:l.formData.name,"onUpdate:modelValue":a[2]||(a[2]=s=>l.formData.name=s),placeholder:"è¯·è¾“å…¥æ­Œæ‰‹åç§°",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(C,{label:"å¤´åƒURL",prop:"avatar"},{default:t(()=>[e(D,{modelValue:l.formData.avatar,"onUpdate:modelValue":a[3]||(a[3]=s=>l.formData.avatar=s),placeholder:"è¯·è¾“å…¥å¤´åƒURL",type:"url"},null,8,["modelValue"]),l.formData.avatar?(y(),N("div",Be,[e(k,{size:80,src:l.formData.avatar},{default:t(()=>{var s;return[d(h((s=l.formData.name)==null?void 0:s.charAt(0)),1)]}),_:1},8,["src"])])):T("",!0)]),_:1}),e(C,{label:"å›½å®¶/åœ°åŒº",prop:"region"},{default:t(()=>[e(D,{modelValue:l.formData.region,"onUpdate:modelValue":a[4]||(a[4]=s=>l.formData.region=s),placeholder:"ä¾‹å¦‚ï¼šä¸­å›½å°æ¹¾",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(C,{label:"ç®€ä»‹",prop:"description"},{default:t(()=>[e(D,{modelValue:l.formData.description,"onUpdate:modelValue":a[5]||(a[5]=s=>l.formData.description=s),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥æ­Œæ‰‹ç®€ä»‹",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}const Ee=W(Ae,[["render",Ne],["__scopeId","data-v-72ce226f"]]),Re={name:"SongManagement",components:{Plus:ve,Search:be},setup(){const S=b(!1),a=b(!1),q=b(!1),l=b(!1),A=b([]),z=b([]),m=b(!1),i=b("add"),k=b(null),v=b(!1),L=b(!1),w=b(!1),D=b([]),C=b(""),_=b(!1),r=b(!1),f=b(""),s=b(""),E="/api/upload/cover",G="/api/upload/music",P=X(()=>({Authorization:`Bearer ${localStorage.getItem("token")}`})),R=F({page:1,size:10,total:0}),c=F({id:null,title:"",artistIds:[],albumName:"",duration:null,cover:"",url:"",lyric:"",status:1}),I={title:[{required:!0,message:"è¯·è¾“å…¥æ­Œæ›²åç§°",trigger:"blur"}],artistIds:[{required:!0,type:"array",min:1,message:"è¯·è‡³å°‘é€‰æ‹©ä¸€ä½æ­Œæ‰‹",trigger:"change"}],url:[{required:!0,message:"è¯·ä¸Šä¼ éŸ³ä¹æ–‡ä»¶",trigger:"change"}]},M=async()=>{S.value=!0;try{const n=await Y({page:R.page-1,size:R.size});A.value=n.data.content||[],R.total=n.data.totalElements||0}catch{p.error("èŽ·å–æ­Œæ›²åˆ—è¡¨å¤±è´¥")}finally{S.value=!1}},Q=async()=>{try{const n=await Ue();z.value=n.data||[]}catch{p.error("èŽ·å–æ­Œæ‰‹åˆ—è¡¨å¤±è´¥")}},H=()=>{i.value="add",o(),m.value=!0},j=n=>{i.value="edit",c.id=n.id,c.title=n.title,c.artistIds=n.artists&&n.artists.length>0?n.artists.map(g=>g.id):[],c.albumName=n.albumName||"",c.duration=n.duration,c.cover=n.cover||"",c.url=n.url,c.lyric=n.lyric||"",c.status=n.status,m.value=!0},o=()=>{c.id=null,c.title="",c.artistIds=[],c.albumName="",c.duration=null,c.cover="",c.url="",c.lyric="",c.status=1,q.value=!1,l.value=!1,k.value&&k.value.clearValidate()},U=n=>{const g=n.type.startsWith("image/"),x=n.size/1024/1024<2;return g?x?!0:(p.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!"),!1):(p.error("åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶!"),!1)},ee=n=>{var x;q.value=!1;const g=((x=n==null?void 0:n.data)==null?void 0:x.url)||(n==null?void 0:n.url);g?(c.cover=g,p.success("å°é¢ä¸Šä¼ æˆåŠŸ")):p.error("å°é¢ä¸Šä¼ å¤±è´¥")},ae=n=>{const g=n.type.startsWith("audio/"),x=n.size/1024/1024<30;return g?x?!0:(p.error("éŸ³é¢‘æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 30MB!"),!1):(p.error("åªèƒ½ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶!"),!1)},le=n=>{var x;l.value=!1;const g=((x=n==null?void 0:n.data)==null?void 0:x.url)||(n==null?void 0:n.url);g?(c.url=g,p.success("éŸ³ä¹æ–‡ä»¶ä¸Šä¼ æˆåŠŸ")):p.error("éŸ³ä¹æ–‡ä»¶ä¸Šä¼ å¤±è´¥")},te=async()=>{k.value&&await k.value.validate(async n=>{if(n)try{a.value=!0;const g={title:c.title,artistIds:c.artistIds,albumName:c.albumName||null,duration:c.duration,cover:c.cover||null,url:c.url,lyric:c.lyric||null,status:c.status};i.value==="add"?(await De(g),p.success("æ–°å¢žæˆåŠŸ")):(await we(c.id,g),p.success("æ›´æ–°æˆåŠŸ")),m.value=!1,M()}catch(g){p.error(g.message||"æ“ä½œå¤±è´¥")}finally{a.value=!1}})},oe=async n=>{try{await ke(n),p.success("åˆ é™¤æˆåŠŸ"),M()}catch(g){p.error(g.message||"åˆ é™¤å¤±è´¥")}},ne=n=>{if(!n)return"00:00";const g=Math.floor(n/60),x=n%60;return`${String(g).padStart(2,"0")}:${String(x).padStart(2,"0")}`},ie=n=>n?new Date(n).toLocaleString("zh-CN"):"-",re=async()=>{L.value=!0,v.value=!0;try{const n=await Y({page:0,size:9999});D.value=(n.data.content||[]).map(g=>({...g,genre:g.genre||"",language:g.language||""}))}catch{p.error("èŽ·å–æ­Œæ›²åˆ—è¡¨å¤±è´¥")}finally{L.value=!1}},se=X(()=>{if(!C.value)return D.value;const n=C.value.toLowerCase();return D.value.filter(g=>{var O,J;const x=((O=g.title)==null?void 0:O.toLowerCase())||"",fe=((J=g.artists)==null?void 0:J.map(pe=>pe.name.toLowerCase()).join(" "))||"";return x.includes(n)||fe.includes(n)})}),de=()=>{f.value="",_.value=!0},ue=()=>{if(!f.value){p.warning("è¯·é€‰æ‹©ç±»åž‹");return}D.value.forEach(n=>{n.genre=f.value}),p.success("å·²åº”ç”¨åˆ°æ‰€æœ‰æ­Œæ›²"),_.value=!1},me=()=>{s.value="",r.value=!0},ce=()=>{if(!s.value){p.warning("è¯·é€‰æ‹©è¯­è¨€");return}D.value.forEach(n=>{n.language=s.value}),p.success("å·²åº”ç”¨åˆ°æ‰€æœ‰æ­Œæ›²"),r.value=!1},ge=async()=>{w.value=!0;try{const n=D.value.map(g=>({id:g.id,genre:g.genre||"",language:g.language||""}));await he(n),p.success("æ‰¹é‡æ›´æ–°æˆåŠŸ"),v.value=!1,M()}catch(n){p.error("æ‰¹é‡æ›´æ–°å¤±è´¥ï¼š"+(n.message||"æœªçŸ¥é”™è¯¯"))}finally{w.value=!1}};return Z(()=>{M(),Q()}),{loading:S,submitLoading:a,coverUploading:q,musicUploading:l,songList:A,artists:z,pagination:R,dialogVisible:m,dialogMode:i,formRef:k,formData:c,formRules:I,uploadCoverAction:E,uploadMusicAction:G,uploadHeaders:P,fetchSongs:M,showAddDialog:H,showEditDialog:j,beforeCoverUpload:U,handleCoverSuccess:ee,beforeMusicUpload:ae,handleMusicSuccess:le,handleSubmit:te,handleDelete:oe,formatDuration:ne,formatDate:ie,batchEditDialogVisible:v,batchSongList:D,batchLoading:L,batchSubmitLoading:w,batchSearchKeyword:C,filteredBatchSongList:se,quickGenreDialogVisible:_,quickLanguageDialogVisible:r,quickGenreValue:f,quickLanguageValue:s,showBatchEditDialog:re,quickSetGenre:de,quickSetLanguage:me,applyQuickGenre:ue,applyQuickLanguage:ce,handleBatchSubmit:ge}}},Ie={class:"song-management"},Ge={class:"toolbar"},Pe={key:1,style:{color:"#999"}},je={key:1,style:{color:"#999"}},Te={style:{"margin-left":"10px",color:"#999"}},Fe=["src"],Qe={key:0,style:{"margin-top":"10px"}},He={style:{"margin-left":"10px",color:"#999","font-size":"12px"}},Ke={class:"batch-edit-container"},We={class:"batch-edit-toolbar"},Oe={style:{"margin-top":"10px"}},Je={style:{display:"flex","flex-direction":"column",gap:"5px"}};function Xe(S,a,q,l,A,z){const m=u("el-button"),i=u("el-table-column"),k=u("el-image"),v=u("el-tag"),L=u("el-popconfirm"),w=u("el-table"),D=u("el-pagination"),C=u("el-input"),_=u("el-form-item"),r=u("el-option"),f=u("el-select"),s=u("el-input-number"),E=u("Plus"),G=u("el-icon"),P=u("el-upload"),R=u("el-radio"),c=u("el-radio-group"),I=u("el-form"),M=u("el-dialog"),Q=u("el-alert"),H=u("Search"),j=$("loading");return y(),N("div",Ie,[V("div",Ge,[e(m,{type:"primary",icon:"Plus",onClick:l.showAddDialog},{default:t(()=>[...a[19]||(a[19]=[d(" æ–°å¢žæ­Œæ›² ",-1)])]),_:1},8,["onClick"]),e(m,{type:"success",icon:"Edit",onClick:l.showBatchEditDialog},{default:t(()=>[...a[20]||(a[20]=[d(" æ‰¹é‡ç¼–è¾‘ç±»åž‹å’Œè¯­è¨€ ",-1)])]),_:1},8,["onClick"]),e(m,{icon:"Refresh",onClick:l.fetchSongs},{default:t(()=>[...a[21]||(a[21]=[d("åˆ·æ–°",-1)])]),_:1},8,["onClick"])]),K((y(),B(w,{data:l.songList,border:"",stripe:"",style:{width:"100%"}},{default:t(()=>[e(i,{type:"index",label:"åºå·",width:"60",align:"center"}),e(i,{label:"å°é¢",width:"80",align:"center"},{default:t(({row:o})=>[e(k,{style:{width:"50px",height:"50px","border-radius":"4px"},src:o.cover,fit:"cover"},{error:t(()=>[...a[22]||(a[22]=[V("div",{class:"image-slot"},"ðŸŽµ",-1)])]),_:1},8,["src"])]),_:1}),e(i,{prop:"title",label:"æ­Œæ›²åç§°",width:"200"}),e(i,{label:"æ­Œæ‰‹",width:"150"},{default:t(({row:o})=>[d(h(o.artists&&o.artists.length>0?o.artists.map(U=>U.name).join(" / "):"-"),1)]),_:1}),e(i,{prop:"albumName",label:"ä¸“è¾‘",width:"150","show-overflow-tooltip":""}),e(i,{prop:"genre",label:"ç±»åž‹",width:"100",align:"center"},{default:t(({row:o})=>[o.genre?(y(),B(v,{key:0,size:"small",type:"info"},{default:t(()=>[d(h(o.genre),1)]),_:2},1024)):(y(),N("span",Pe,"æœªè®¾ç½®"))]),_:1}),e(i,{prop:"language",label:"è¯­è¨€",width:"100",align:"center"},{default:t(({row:o})=>[o.language?(y(),B(v,{key:0,size:"small",type:"success"},{default:t(()=>[d(h(o.language),1)]),_:2},1024)):(y(),N("span",je,"æœªè®¾ç½®"))]),_:1}),e(i,{prop:"duration",label:"æ—¶é•¿",width:"80",align:"center"},{default:t(({row:o})=>[d(h(l.formatDuration(o.duration)),1)]),_:1}),e(i,{prop:"playCount",label:"æ’­æ”¾æ¬¡æ•°",width:"100",align:"center"}),e(i,{prop:"status",label:"çŠ¶æ€",width:"80",align:"center"},{default:t(({row:o})=>[e(v,{type:o.status===1?"success":"danger",size:"small"},{default:t(()=>[d(h(o.status===1?"ä¸Šæž¶":"ä¸‹æž¶"),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"createTime",label:"åˆ›å»ºæ—¶é—´",width:"180"},{default:t(({row:o})=>[d(h(l.formatDate(o.createTime)),1)]),_:1}),e(i,{label:"æ“ä½œ",width:"180",fixed:"right",align:"center"},{default:t(({row:o})=>[e(m,{type:"primary",size:"small",onClick:U=>l.showEditDialog(o)},{default:t(()=>[...a[23]||(a[23]=[d(" ç¼–è¾‘ ",-1)])]),_:1},8,["onClick"]),e(L,{title:"ç¡®å®šè¦åˆ é™¤è¿™é¦–æ­Œæ›²å—ï¼Ÿ",onConfirm:U=>l.handleDelete(o.id)},{reference:t(()=>[e(m,{type:"danger",size:"small"},{default:t(()=>[...a[24]||(a[24]=[d("åˆ é™¤",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[j,l.loading]]),e(D,{"current-page":l.pagination.page,"onUpdate:currentPage":a[0]||(a[0]=o=>l.pagination.page=o),"page-size":l.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=o=>l.pagination.size=o),total:l.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.fetchSongs,onCurrentChange:l.fetchSongs,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e(M,{modelValue:l.dialogVisible,"onUpdate:modelValue":a[9]||(a[9]=o=>l.dialogVisible=o),title:l.dialogMode==="add"?"æ–°å¢žæ­Œæ›²":"ç¼–è¾‘æ­Œæ›²",width:"700px","close-on-click-modal":!1},{footer:t(()=>[e(m,{onClick:a[8]||(a[8]=o=>l.dialogVisible=!1)},{default:t(()=>[...a[31]||(a[31]=[d("å–æ¶ˆ",-1)])]),_:1}),e(m,{type:"primary",loading:l.submitLoading,onClick:l.handleSubmit},{default:t(()=>[...a[32]||(a[32]=[d(" ç¡®å®š ",-1)])]),_:1},8,["loading","onClick"])]),default:t(()=>[e(I,{ref:"formRef",model:l.formData,rules:l.formRules,"label-width":"100px"},{default:t(()=>[e(_,{label:"æ­Œæ›²åç§°",prop:"title"},{default:t(()=>[e(C,{modelValue:l.formData.title,"onUpdate:modelValue":a[2]||(a[2]=o=>l.formData.title=o),placeholder:"è¯·è¾“å…¥æ­Œæ›²åç§°",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(_,{label:"æ­Œæ‰‹",prop:"artistIds"},{default:t(()=>[e(f,{modelValue:l.formData.artistIds,"onUpdate:modelValue":a[3]||(a[3]=o=>l.formData.artistIds=o),placeholder:"è¯·é€‰æ‹©æ­Œæ‰‹ï¼ˆå¯å¤šé€‰ï¼‰",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",style:{width:"100%"}},{default:t(()=>[(y(!0),N(_e,null,ye(l.artists,o=>(y(),B(r,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"ä¸“è¾‘åç§°",prop:"albumName"},{default:t(()=>[e(C,{modelValue:l.formData.albumName,"onUpdate:modelValue":a[4]||(a[4]=o=>l.formData.albumName=o),placeholder:"è¯·è¾“å…¥ä¸“è¾‘åç§°ï¼ˆå¯é€‰ï¼‰",maxlength:"100"},null,8,["modelValue"])]),_:1}),e(_,{label:"æ—¶é•¿ï¼ˆç§’ï¼‰",prop:"duration"},{default:t(()=>[e(s,{modelValue:l.formData.duration,"onUpdate:modelValue":a[5]||(a[5]=o=>l.formData.duration=o),min:0,max:7200,placeholder:"ä¾‹å¦‚ï¼š245",style:{width:"100%"}},null,8,["modelValue"]),V("span",Te,h(l.formatDuration(l.formData.duration)),1)]),_:1}),e(_,{label:"å°é¢å›¾ç‰‡",prop:"cover"},{default:t(()=>[e(P,{class:"cover-uploader",action:l.uploadCoverAction,headers:l.uploadHeaders,"show-file-list":!1,"on-success":l.handleCoverSuccess,"before-upload":l.beforeCoverUpload,"on-progress":()=>l.coverUploading=!0},{default:t(()=>[l.formData.cover?(y(),N("img",{key:0,src:l.formData.cover,class:"cover-image"},null,8,Fe)):(y(),B(G,{key:1,class:Ve(["cover-uploader-icon",{uploading:l.coverUploading}])},{default:t(()=>[e(E)]),_:1},8,["class"]))]),_:1},8,["action","headers","on-success","before-upload","on-progress"]),a[25]||(a[25]=V("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," ç‚¹å‡»ä¸Šä¼ å°é¢å›¾ç‰‡ï¼Œæ”¯æŒ JPG/PNGï¼Œå¤§å°ä¸è¶…è¿‡ 2MB ",-1))]),_:1}),e(_,{label:"éŸ³ä¹æ–‡ä»¶",prop:"url"},{default:t(()=>[e(P,{action:l.uploadMusicAction,headers:l.uploadHeaders,"on-success":l.handleMusicSuccess,"before-upload":l.beforeMusicUpload,"on-progress":()=>l.musicUploading=!0,"show-file-list":!1},{default:t(()=>[e(m,{type:"primary",loading:l.musicUploading},{default:t(()=>[d(h(l.musicUploading?"ä¸Šä¼ ä¸­...":l.formData.url?"é‡æ–°ä¸Šä¼ ":"ä¸Šä¼ éŸ³ä¹"),1)]),_:1},8,["loading"])]),_:1},8,["action","headers","on-success","before-upload","on-progress"]),l.formData.url?(y(),N("div",Qe,[e(v,{type:"success"},{default:t(()=>[...a[26]||(a[26]=[d("âœ“ å·²ä¸Šä¼ ",-1)])]),_:1}),V("span",He,h(l.formData.url.substring(l.formData.url.lastIndexOf("/")+1)),1)])):T("",!0),a[27]||(a[27]=V("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," æ”¯æŒ MP3/WAV/FLAC ç­‰æ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡ 30MB ",-1))]),_:1}),e(_,{label:"æ­Œè¯",prop:"lyric"},{default:t(()=>[e(C,{modelValue:l.formData.lyric,"onUpdate:modelValue":a[6]||(a[6]=o=>l.formData.lyric=o),type:"textarea",rows:6,placeholder:`è¯·è¾“å…¥æ­Œè¯ï¼ˆLRC æ ¼å¼ï¼‰ï¼Œä¾‹å¦‚ï¼š
[00:00.00]æ­Œæ›²æ ‡é¢˜
[00:05.00]æ­Œæ‰‹å
[00:20.50]æ­Œè¯ç¬¬ä¸€å¥`},null,8,["modelValue"]),a[28]||(a[28]=V("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," å¯é€‰ï¼Œæ”¯æŒ LRC æ ¼å¼æ­Œè¯ ",-1))]),_:1}),e(_,{label:"çŠ¶æ€",prop:"status"},{default:t(()=>[e(c,{modelValue:l.formData.status,"onUpdate:modelValue":a[7]||(a[7]=o=>l.formData.status=o)},{default:t(()=>[e(R,{label:1},{default:t(()=>[...a[29]||(a[29]=[d("ä¸Šæž¶",-1)])]),_:1}),e(R,{label:0},{default:t(()=>[...a[30]||(a[30]=[d("ä¸‹æž¶",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(M,{modelValue:l.batchEditDialogVisible,"onUpdate:modelValue":a[12]||(a[12]=o=>l.batchEditDialogVisible=o),title:"æ‰¹é‡ç¼–è¾‘æ­Œæ›²ç±»åž‹å’Œè¯­è¨€",width:"90%",top:"5vh","close-on-click-modal":!1},{footer:t(()=>[e(m,{onClick:a[11]||(a[11]=o=>l.batchEditDialogVisible=!1)},{default:t(()=>[...a[36]||(a[36]=[d("å–æ¶ˆ",-1)])]),_:1}),e(m,{type:"primary",loading:l.batchSubmitLoading,onClick:l.handleBatchSubmit},{default:t(()=>[...a[37]||(a[37]=[d(" ä¿å­˜ä¿®æ”¹ ",-1)])]),_:1},8,["loading","onClick"])]),default:t(()=>[V("div",Ke,[V("div",We,[e(Q,{type:"info",closable:!1,"show-icon":""},{title:t(()=>[V("span",null,"å…± "+h(l.batchSongList.length)+" é¦–æ­Œæ›²ï¼Œå¯ç›´æŽ¥åœ¨è¡¨æ ¼ä¸­ç¼–è¾‘ç±»åž‹å’Œè¯­è¨€",1)]),_:1}),V("div",Oe,[e(m,{type:"primary",icon:"Select",onClick:l.quickSetGenre},{default:t(()=>[...a[33]||(a[33]=[d("å¿«é€Ÿè®¾ç½®ç±»åž‹",-1)])]),_:1},8,["onClick"]),e(m,{type:"success",icon:"Select",onClick:l.quickSetLanguage},{default:t(()=>[...a[34]||(a[34]=[d("å¿«é€Ÿè®¾ç½®è¯­è¨€",-1)])]),_:1},8,["onClick"]),e(C,{modelValue:l.batchSearchKeyword,"onUpdate:modelValue":a[10]||(a[10]=o=>l.batchSearchKeyword=o),placeholder:"æœç´¢æ­Œæ›²åç§°æˆ–æ­Œæ‰‹",style:{width:"300px","margin-left":"10px"},clearable:""},{prefix:t(()=>[e(G,null,{default:t(()=>[e(H)]),_:1})]),_:1},8,["modelValue"])])]),K((y(),B(w,{data:l.filteredBatchSongList,border:"",stripe:"",style:{width:"100%","margin-top":"15px"},"max-height":"500"},{default:t(()=>[e(i,{type:"index",label:"åºå·",width:"60",align:"center"}),e(i,{label:"å°é¢",width:"70",align:"center"},{default:t(({row:o})=>[e(k,{style:{width:"40px",height:"40px","border-radius":"4px"},src:o.cover,fit:"cover"},{error:t(()=>[...a[35]||(a[35]=[V("div",{class:"image-slot-small"},"ðŸŽµ",-1)])]),_:1},8,["src"])]),_:1}),e(i,{prop:"title",label:"æ­Œæ›²åç§°",width:"200","show-overflow-tooltip":""}),e(i,{label:"æ­Œæ‰‹",width:"150","show-overflow-tooltip":""},{default:t(({row:o})=>[d(h(o.artists&&o.artists.length>0?o.artists.map(U=>U.name).join(" / "):"-"),1)]),_:1}),e(i,{label:"ç±»åž‹",width:"150",align:"center"},{default:t(({row:o})=>[e(f,{modelValue:o.genre,"onUpdate:modelValue":U=>o.genre=U,size:"small",placeholder:"é€‰æ‹©ç±»åž‹",clearable:""},{default:t(()=>[e(r,{label:"æµè¡Œ",value:"æµè¡Œ"}),e(r,{label:"æ‘‡æ»š",value:"æ‘‡æ»š"}),e(r,{label:"æ°‘è°£",value:"æ°‘è°£"}),e(r,{label:"ç”µå­",value:"ç”µå­"}),e(r,{label:"è¯´å”±",value:"è¯´å”±"}),e(r,{label:"R&B",value:"R&B"}),e(r,{label:"çˆµå£«",value:"çˆµå£«"}),e(r,{label:"å¤å…¸",value:"å¤å…¸"}),e(r,{label:"è½»éŸ³ä¹",value:"è½»éŸ³ä¹"}),e(r,{label:"çº¯éŸ³ä¹",value:"çº¯éŸ³ä¹"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"è¯­è¨€",width:"150",align:"center"},{default:t(({row:o})=>[e(f,{modelValue:o.language,"onUpdate:modelValue":U=>o.language=U,size:"small",placeholder:"é€‰æ‹©è¯­è¨€",clearable:""},{default:t(()=>[e(r,{label:"å›½è¯­",value:"å›½è¯­"}),e(r,{label:"ç²¤è¯­",value:"ç²¤è¯­"}),e(r,{label:"è‹±è¯­",value:"è‹±è¯­"}),e(r,{label:"æ—¥è¯­",value:"æ—¥è¯­"}),e(r,{label:"éŸ©è¯­",value:"éŸ©è¯­"}),e(r,{label:"å…¶ä»–",value:"å…¶ä»–"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"å½“å‰å€¼",width:"200",align:"center"},{default:t(({row:o})=>[V("div",Je,[o.genre?(y(),B(v,{key:0,size:"small",type:"info"},{default:t(()=>[d("ç±»åž‹: "+h(o.genre),1)]),_:2},1024)):T("",!0),o.language?(y(),B(v,{key:1,size:"small",type:"success"},{default:t(()=>[d("è¯­è¨€: "+h(o.language),1)]),_:2},1024)):T("",!0)])]),_:1})]),_:1},8,["data"])),[[j,l.batchLoading]])])]),_:1},8,["modelValue"]),e(M,{modelValue:l.quickGenreDialogVisible,"onUpdate:modelValue":a[15]||(a[15]=o=>l.quickGenreDialogVisible=o),title:"å¿«é€Ÿè®¾ç½®ç±»åž‹",width:"400px"},{footer:t(()=>[e(m,{onClick:a[14]||(a[14]=o=>l.quickGenreDialogVisible=!1)},{default:t(()=>[...a[38]||(a[38]=[d("å–æ¶ˆ",-1)])]),_:1}),e(m,{type:"primary",onClick:l.applyQuickGenre},{default:t(()=>[...a[39]||(a[39]=[d("åº”ç”¨åˆ°æ‰€æœ‰æ­Œæ›²",-1)])]),_:1},8,["onClick"])]),default:t(()=>[e(I,{"label-width":"80px"},{default:t(()=>[e(_,{label:"é€‰æ‹©ç±»åž‹"},{default:t(()=>[e(f,{modelValue:l.quickGenreValue,"onUpdate:modelValue":a[13]||(a[13]=o=>l.quickGenreValue=o),placeholder:"è¯·é€‰æ‹©ç±»åž‹",style:{width:"100%"}},{default:t(()=>[e(r,{label:"æµè¡Œ",value:"æµè¡Œ"}),e(r,{label:"æ‘‡æ»š",value:"æ‘‡æ»š"}),e(r,{label:"æ°‘è°£",value:"æ°‘è°£"}),e(r,{label:"ç”µå­",value:"ç”µå­"}),e(r,{label:"è¯´å”±",value:"è¯´å”±"}),e(r,{label:"R&B",value:"R&B"}),e(r,{label:"çˆµå£«",value:"çˆµå£«"}),e(r,{label:"å¤å…¸",value:"å¤å…¸"}),e(r,{label:"è½»éŸ³ä¹",value:"è½»éŸ³ä¹"}),e(r,{label:"çº¯éŸ³ä¹",value:"çº¯éŸ³ä¹"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:l.quickLanguageDialogVisible,"onUpdate:modelValue":a[18]||(a[18]=o=>l.quickLanguageDialogVisible=o),title:"å¿«é€Ÿè®¾ç½®è¯­è¨€",width:"400px"},{footer:t(()=>[e(m,{onClick:a[17]||(a[17]=o=>l.quickLanguageDialogVisible=!1)},{default:t(()=>[...a[40]||(a[40]=[d("å–æ¶ˆ",-1)])]),_:1}),e(m,{type:"primary",onClick:l.applyQuickLanguage},{default:t(()=>[...a[41]||(a[41]=[d("åº”ç”¨åˆ°æ‰€æœ‰æ­Œæ›²",-1)])]),_:1},8,["onClick"])]),default:t(()=>[e(I,{"label-width":"80px"},{default:t(()=>[e(_,{label:"é€‰æ‹©è¯­è¨€"},{default:t(()=>[e(f,{modelValue:l.quickLanguageValue,"onUpdate:modelValue":a[16]||(a[16]=o=>l.quickLanguageValue=o),placeholder:"è¯·é€‰æ‹©è¯­è¨€",style:{width:"100%"}},{default:t(()=>[e(r,{label:"å›½è¯­",value:"å›½è¯­"}),e(r,{label:"ç²¤è¯­",value:"ç²¤è¯­"}),e(r,{label:"è‹±è¯­",value:"è‹±è¯­"}),e(r,{label:"æ—¥è¯­",value:"æ—¥è¯­"}),e(r,{label:"éŸ©è¯­",value:"éŸ©è¯­"}),e(r,{label:"å…¶ä»–",value:"å…¶ä»–"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Ye=W(Re,[["render",Xe],["__scopeId","data-v-428e42f1"]]),Ze={name:"Admin",components:{ArtistManagement:Ee,SongManagement:Ye},setup(){const S=Ce(),a=b("artist");return{userStore:S,activeTab:a}}},$e={class:"admin-page"};function ea(S,a,q,l,A,z){const m=u("el-alert"),i=u("ArtistManagement"),k=u("el-tab-pane"),v=u("SongManagement"),L=u("el-tabs");return y(),N("div",$e,[a[3]||(a[3]=V("div",{class:"page-header"},[V("h2",null,"ðŸ”§ ç®¡ç†åŽå°"),V("p",{class:"subtitle"},"ç³»ç»Ÿç®¡ç†ä¸Žæ•°æ®ç»´æŠ¤")],-1)),e(m,{title:"ç®¡ç†å‘˜ä¸“å±žåŒºåŸŸ",type:"success",closable:!1,"show-icon":"",style:{"margin-bottom":"30px"}},{default:t(()=>{var w;return[a[1]||(a[1]=d(" æ¬¢è¿Ž ",-1)),V("strong",null,h((w=l.userStore.userInfo)==null?void 0:w.nickname),1),a[2]||(a[2]=d("ï¼Œä½ å½“å‰æ‹¥æœ‰ç®¡ç†å‘˜æƒé™ ",-1))]}),_:1}),e(L,{modelValue:l.activeTab,"onUpdate:modelValue":a[0]||(a[0]=w=>l.activeTab=w),type:"card"},{default:t(()=>[e(k,{label:"ðŸŽ¤ æ­Œæ‰‹ç®¡ç†",name:"artist"},{default:t(()=>[e(i)]),_:1}),e(k,{label:"ðŸŽµ æ­Œæ›²ç®¡ç†",name:"song"},{default:t(()=>[e(v)]),_:1})]),_:1},8,["modelValue"])])}const ta=W(Ze,[["render",ea],["__scopeId","data-v-e51c5d26"]]);export{ta as default};
