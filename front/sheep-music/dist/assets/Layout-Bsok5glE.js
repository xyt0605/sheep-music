import{_ as de,l as We,c as L,o as v,d as i,w as u,r as b,m as H,s as Pe,p as Be,q as xe,h as p,v as ce,x as le,j as ke,y as Ue,z as O,k as D,A as Ae,a as l,B as Xe,e as q,C as qe,t as I,F as re,D as ue,T as J,G as ie,H as Q,n as fe,I as He,J as Oe,u as we,K as Fe,L as Ye,g as $e,M as Je,N as he,O as je,E as _e}from"./index-Beme91KK.js";import{u as Ge}from"./social-CVqM5G2t.js";import{w as ee}from"./client-YEluwUR5.js";const Ke={class:"theme-toggle"},Qe={__name:"ThemeToggle",setup(U){const{isDark:o,toggleTheme:T}=We();return(s,k)=>{const w=b("el-button"),f=b("el-tooltip");return v(),L("div",Ke,[i(f,{content:H(o)?"åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼",placement:"bottom"},{default:u(()=>[i(w,{icon:H(o)?H(Pe):H(Be),circle:"",onClick:H(T),class:"theme-toggle-btn"},null,8,["icon","onClick"])]),_:1},8,["content"])])}}},Ze=de(Qe,[["__scopeId","data-v-aeed8507"]]),et={class:"lyric-controls"},tt={class:"drag-handle",title:"åŒå‡»é”å®š/è§£é”"},ot={class:"control-buttons"},nt={class:"opacity-control"},at={class:"control-value"},st={class:"color-control"},lt={class:"color-presets"},it=["onClick","title"],ct={class:"font-control"},rt={class:"control-value"},ut={key:0,class:"lyric-next"},dt={key:0,class:"song-info"},mt={class:"song-title"},vt={class:"song-artist"},ye=300,be=1200,gt={__name:"DesktopLyric",setup(U,{expose:o}){const T=xe(),s=we(),k=p(!1),w=p(!1),f=p(!1),E=p(!1),z=p(!1),F=p(!1),Y=p(!0),$=p(!0),m=p({x:0,y:0}),V=p(.95),c=p("rgba(0, 0, 0, 0.75)"),g=p(28),d=p(600),n=["rgba(0, 0, 0, 0.75)","rgba(102, 126, 234, 0.85)","rgba(118, 75, 162, 0.85)","rgba(245, 87, 108, 0.85)","rgba(52, 152, 219, 0.85)","rgba(46, 204, 113, 0.85)","rgba(155, 89, 182, 0.85)","rgba(52, 73, 94, 0.85)"],x=t=>({"rgba(0, 0, 0, 0.75)":"ç»å…¸é»‘","rgba(102, 126, 234, 0.85)":"ç´«ç½—å…°","rgba(118, 75, 162, 0.85)":"æ·±ç´«","rgba(245, 87, 108, 0.85)":"ç²‰çº¢","rgba(52, 152, 219, 0.85)":"å¤©è“","rgba(46, 204, 113, 0.85)":"ç¿ ç»¿","rgba(155, 89, 182, 0.85)":"ç´«æ°´æ™¶","rgba(52, 73, 94, 0.85)":"æ·±ç°"})[t]||"è‡ªå®šä¹‰",W=p({x:0,y:0});let r="",j=0,N=0,A=0;const B=()=>{try{document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",oe),E.value=!1,z.value=!1,r="",console.log("äº‹ä»¶ç›‘å¬å™¨å·²æ¸…ç†")}catch(t){console.error("æ¸…ç†äº‹ä»¶ç›‘å¬å™¨æ—¶å‡ºé”™:",t)}},P=ce(()=>T.currentSong),C=p("â™ª æš‚æ— æ­Œè¯ â™ª"),_=p(""),y=p([]),Ce=()=>{k.value=!0,ae()},Me=()=>{k.value=!1},Le=()=>{k.value=!k.value,k.value&&ae()},Se=()=>{k.value=!1},Ie=()=>{f.value=!f.value,X()},Te=t=>{w.value&&(f.value||z.value||t.target.closest(".control-buttons")||t.target.closest(".resize-handle")||(t.stopPropagation(),E.value=!0,W.value={x:t.clientX-m.value.x,y:t.clientY-m.value.y},document.addEventListener("mousemove",te,{passive:!1}),document.addEventListener("mouseup",oe,{passive:!1})))},te=t=>{if(!w.value){B();return}if(t.preventDefault(),E.value){const e=t.clientX-W.value.x,a=t.clientY-W.value.y,M=window.innerWidth-d.value,R=window.innerHeight-150;m.value={x:Math.max(0,Math.min(e,M)),y:Math.max(0,Math.min(a,R))}}else z.value&&ze(t)},oe=()=>{try{E.value&&(E.value=!1,X()),z.value&&(z.value=!1,r="",X())}catch(t){console.error("handleMouseUp error:",t)}finally{B()}},me=(t,e)=>{w.value&&(f.value||(t.stopPropagation(),z.value=!0,r=e,j=t.clientX,N=d.value,A=m.value.x,document.addEventListener("mousemove",te,{passive:!1}),document.addEventListener("mouseup",oe,{passive:!1})))},ze=t=>{if(!z.value)return;const e=t.clientX-j;let a=N,M=A;if(r==="right"?a=N+e:r==="left"&&(a=N-e,M=A+e),a=Math.max(ye,Math.min(a,be)),r==="right"){const R=window.innerWidth-m.value.x-20;a=Math.min(a,R)}else if(r==="left"){const S=A+N-ye;M=Math.max(0,Math.min(M,S)),a=A+N-M}d.value=a,r==="left"&&(m.value.x=M)},ne=()=>{d.value=600,m.value={x:(window.innerWidth-d.value)/2,y:50},X()},Ne=t=>{c.value=t,X()},X=()=>{const t={position:m.value,opacity:V.value,backgroundColor:c.value,fontSize:g.value,width:d.value,isLocked:f.value,showNextLine:Y.value,showSongInfo:$.value};localStorage.setItem("desktopLyricSettings",JSON.stringify(t))},ae=()=>{const t=localStorage.getItem("desktopLyricSettings");if(t)try{const e=JSON.parse(t);d.value=e.width||600,m.value=e.position||{x:(window.innerWidth-d.value)/2,y:50},V.value=e.opacity||.95,c.value=e.backgroundColor||"rgba(0, 0, 0, 0.75)",g.value=e.fontSize||28,f.value=e.isLocked||!1,Y.value=e.showNextLine??!0,$.value=e.showSongInfo??!0}catch{ne()}else ne()},De=ce(()=>T.isPlaying);le(()=>T.currentTime,t=>{y.value.length>0&&De.value&&se(t)},{immediate:!0}),le(()=>{var t;return(t=P.value)==null?void 0:t.id},t=>{t?ve(t):(C.value="â™ª æš‚æ— æ’­æ”¾ â™ª",_.value="",y.value=[])},{immediate:!0});async function ve(t){console.log("åŠ è½½æ­Œè¯ï¼Œæ­Œæ›²ID:",t);try{const e=await Oe(t);if(e.code===200){const a=e.data;if(!a||a.trim()===""){console.log("è¯¥æ­Œæ›²æš‚æ— æ­Œè¯"),C.value="â™ª çº¯éŸ³ä¹ï¼Œè¯·æ¬£èµ â™ª",_.value="",y.value=[];return}y.value=Ee(a),console.log("æ­Œè¯è§£æå®Œæˆï¼Œå…±",y.value.length,"è¡Œ"),y.value.length===0?(C.value="â™ª æ­Œè¯è§£æå¤±è´¥ â™ª",_.value=""):se(T.currentTime||0)}else console.error("è·å–æ­Œè¯å¤±è´¥:",e.message),ge(t)}catch(e){console.error("åŠ è½½æ­Œè¯å‡ºé”™:",e),ge(t)}}const ge=t=>{console.log("ä½¿ç”¨æ¨¡æ‹Ÿæ­Œè¯æ•°æ®");const e=Re(t);y.value=e,y.value.length>0?se(T.currentTime||0):(C.value="â™ª æš‚æ— æ­Œè¯ â™ª",_.value="")};function Ee(t){const e=t.split(`
`),a=[],M=/\[(\d{2}):(\d{2})\.(\d{2,3})\](.*)/;return e.forEach(R=>{const S=R.match(M);if(S){const h=parseInt(S[1]),G=parseInt(S[2]),Z=parseInt(S[3].padEnd(3,"0")),K=S[4].trim(),Ve=h*60+G+Z/1e3;K&&K.length>0&&a.push({time:Ve,text:K})}}),a.sort((R,S)=>R.time-S.time),console.log("è§£æåˆ°",a.length,"è¡Œæ­Œè¯"),a.length>0&&(console.log("ç¬¬ä¸€å¥:",a[0]),console.log("æœ€åä¸€å¥:",a[a.length-1])),a}const Re=t=>{const e=[[{time:0,text:"â™ª å‰å¥ â™ª"},{time:5,text:"åœ¨è¿™ç¾å¥½çš„æ—¶å…‰é‡Œ"},{time:10,text:"è®©éŸ³ä¹å¸¦èµ°æ‰€æœ‰çƒ¦æ¼"},{time:15,text:"è·Ÿç€èŠ‚å¥è½»è½»æ‘‡æ‘†"},{time:20,text:"æ„Ÿå—æ¯ä¸€ä¸ªéŸ³ç¬¦çš„è·³åŠ¨"},{time:25,text:"â™ª é—´å¥ â™ª"},{time:30,text:"ç”Ÿæ´»å°±åƒä¸€é¦–æ­Œ"},{time:35,text:"æœ‰é«˜æ½®ä¹Ÿæœ‰ä½è°·"},{time:40,text:"ä½†éŸ³ä¹æ°¸è¿œé™ªä¼´ç€ä½ "},{time:45,text:"â™ª å°¾å¥ â™ª"}],[{time:0,text:"â™ª éŸ³ä¹å“èµ· â™ª"},{time:8,text:"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ"},{time:13,text:"èƒ½å¦å¬æ¸…"},{time:18,text:"é‚£ä»°æœ›çš„äºº"},{time:23,text:"å¿ƒåº•çš„å­¤ç‹¬å’Œå¹æ¯"},{time:28,text:"â™ª ç»§ç»­ â™ª"}],[{time:0,text:"â™ª å¼€å§‹ â™ª"},{time:6,text:"æˆ‘ä»¬éƒ½æ˜¯è¿½æ¢¦äºº"},{time:12,text:"åœ¨è¿™æ¼«é•¿çš„æ—…é€”ä¸­"},{time:18,text:"éŸ³ä¹æ˜¯æœ€å¥½çš„ä¼™ä¼´"},{time:24,text:"è®©æˆ‘ä»¬ç»§ç»­å‰è¡Œ"},{time:30,text:"â™ª å‰è¿› â™ª"}]],a=(t||0)%e.length;return e[a]};function se(t){if(!y.value||y.value.length===0){C.value="â™ª æš‚æ— æ­Œè¯ â™ª",_.value="";return}let e=-1;for(let a=y.value.length-1;a>=0;a--)if(t>=y.value[a].time){e=a;break}if(e>=0){const a=y.value[e].text;C.value!==a&&(C.value=a,console.log(`[${Math.floor(t)}s] å½“å‰æ­Œè¯:`,a)),e+1<y.value.length?_.value=y.value[e+1].text:_.value=""}else C.value="â™ª å‰å¥ â™ª",y.value.length>0&&(_.value=y.value[0].text)}const pe=()=>{const t=window.innerWidth-d.value,e=window.innerHeight-150;m.value.x>t&&(m.value.x=Math.max(0,t)),m.value.y>e&&(m.value.y=Math.max(0,e)),d.value>window.innerWidth-40&&(d.value=Math.min(window.innerWidth-40,be)),m.value.x<0&&(m.value.x=0),m.value.y<0&&(m.value.y=0)};return ke(()=>{var t,e;console.log("æ¡Œé¢æ­Œè¯ç»„ä»¶å¼€å§‹æŒ‚è½½"),setTimeout(()=>{w.value=!0,console.log("æ¡Œé¢æ­Œè¯ç»„ä»¶å·²æŒ‚è½½ï¼ŒisMountedè®¾ç½®ä¸ºtrue")},0),window.addEventListener("resize",pe),ae(),(t=P.value)!=null&&t.id?(console.log("ç»„ä»¶æŒ‚è½½ï¼Œå½“å‰æ­Œæ›²:",P.value.title),ve(P.value.id)):console.log("ç»„ä»¶æŒ‚è½½ï¼Œæš‚æ— æ’­æ”¾æ­Œæ›²"),console.log("æ’­æ”¾å™¨çŠ¶æ€:",{playing:T.isPlaying,currentTime:T.currentTime,song:(e=P.value)==null?void 0:e.title})}),Ue(()=>{console.log("æ¡Œé¢æ­Œè¯ç»„ä»¶å¼€å§‹å¸è½½"),w.value=!1,k.value=!1,window.removeEventListener("resize",pe),B(),console.log("æ¡Œé¢æ­Œè¯ç»„ä»¶å¸è½½å®Œæˆ")}),le(()=>s.currentRoute.value.path,(t,e)=>{console.log("è·¯ç”±åˆ‡æ¢:",e,"->",t),console.log("æ¸…ç†æ¡Œé¢æ­Œè¯äº‹ä»¶ç›‘å¬å™¨"),B(),F.value=!1},{immediate:!1}),o({show:Ce,hide:Me,toggle:Le,visible:k}),(t,e)=>{const a=b("el-icon"),M=b("el-button"),R=b("el-slider"),S=b("el-popover");return v(),O(He,{to:"body",disabled:!w.value},[i(J,{name:"slide-down"},{default:u(()=>[k.value&&w.value?(v(),L("div",{key:0,class:fe(["desktop-lyric",{locked:f.value,dragging:E.value,resizing:z.value}]),style:ie({top:m.value.y+"px",left:m.value.x+"px",width:d.value+"px",opacity:V.value,backgroundColor:c.value}),onMousedown:Q(Te,["stop"]),onDblclick:Q(Ie,["stop"])},[Ae(l("div",et,[l("div",tt,[i(a,null,{default:u(()=>[i(H(qe))]),_:1}),q(" "+I(f.value?"ğŸ”’":"ğŸ”“"),1)]),l("div",ot,[i(S,{placement:"bottom",width:220,trigger:"click","popper-class":"lyric-control-popover"},{reference:u(()=>[i(M,{icon:"Sunny",circle:"",size:"small",title:"é€æ˜åº¦"})]),default:u(()=>[l("div",nt,[e[4]||(e[4]=l("div",{class:"control-title"},"é€æ˜åº¦",-1)),l("div",at,I(Math.round(V.value*100))+"%",1),i(R,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=h=>V.value=h),min:.3,max:1,step:.1,onChange:X},null,8,["modelValue"])])]),_:1}),i(S,{placement:"bottom",width:240,trigger:"click","popper-class":"lyric-color-popover"},{reference:u(()=>[i(M,{icon:"Brush",circle:"",size:"small",title:"èƒŒæ™¯è‰²"})]),default:u(()=>[l("div",st,[e[5]||(e[5]=l("div",{class:"color-control-title"},"èƒŒæ™¯é¢œè‰²",-1)),l("div",lt,[(v(),L(re,null,ue(n,h=>l("div",{key:h,class:fe(["color-item",{active:c.value===h}]),style:ie({backgroundColor:h}),onClick:G=>Ne(h),title:x(h)},[c.value===h?(v(),O(a,{key:0,class:"check-icon"},{default:u(()=>[i(H(Fe))]),_:1})):D("",!0)],14,it)),64))])])]),_:1}),i(S,{placement:"bottom",width:220,trigger:"click","popper-class":"lyric-control-popover"},{reference:u(()=>[i(M,{icon:"FontSize",circle:"",size:"small",title:"å­—ä½“å¤§å°"})]),default:u(()=>[l("div",ct,[e[6]||(e[6]=l("div",{class:"control-title"},"å­—ä½“å¤§å°",-1)),l("div",rt,I(g.value)+"px",1),i(R,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=h=>g.value=h),min:16,max:48,step:2,onChange:X},null,8,["modelValue"])])]),_:1}),i(M,{icon:"RefreshRight",circle:"",size:"small",title:"é‡ç½®ä½ç½®",onClick:ne}),i(M,{icon:"Close",circle:"",size:"small",title:"å…³é—­æ¡Œé¢æ­Œè¯",onClick:Se})])],512),[[Xe,!f.value||F.value]]),l("div",{class:"lyric-content",style:ie({fontSize:g.value+"px"})},[i(J,{name:"lyric-fade",mode:"out-in"},{default:u(()=>[(v(),L("div",{key:C.value,class:"lyric-line"},I(C.value||"æš‚æ— æ­Œè¯"),1))]),_:1}),i(J,{name:"fade"},{default:u(()=>[_.value&&Y.value?(v(),L("div",ut,I(_.value),1)):D("",!0)]),_:1})],4),i(J,{name:"fade"},{default:u(()=>{var h,G,Z;return[$.value?(v(),L("div",dt,[l("span",mt,I(((h=P.value)==null?void 0:h.title)||"æœªæ’­æ”¾"),1),l("span",vt,I(((Z=(G=P.value)==null?void 0:G.artists)==null?void 0:Z.map(K=>K.name).join(" / "))||""),1)])):D("",!0)]}),_:1}),f.value?D("",!0):(v(),L("div",{key:0,class:"resize-handle resize-left",onMousedown:e[2]||(e[2]=Q(h=>me(h,"left"),["stop"])),title:"æ‹–æ‹½è°ƒæ•´å®½åº¦"},null,32)),f.value?D("",!0):(v(),L("div",{key:1,class:"resize-handle resize-right",onMousedown:e[3]||(e[3]=Q(h=>me(h,"right"),["stop"])),title:"æ‹–æ‹½è°ƒæ•´å®½åº¦"},null,32))],38)):D("",!0)]),_:1})],8,["disabled"])}}},pt=de(gt,[["__scopeId","data-v-69fdf1e8"]]),ft={name:"Layout",components:{ThemeToggle:Ze,DesktopLyric:pt},setup(){const U=we(),o=$e(),T=xe(),s=Ge(),k=p(!1),w=p(null),f=p(!1),E=()=>{try{const c=new(window.AudioContext||window.webkitAudioContext),g=c.createOscillator(),d=c.createGain();g.connect(d),d.connect(c.destination),g.frequency.value=800,g.type="sine",d.gain.setValueAtTime(.3,c.currentTime),d.gain.exponentialRampToValueAtTime(.01,c.currentTime+.2),g.start(c.currentTime),g.stop(c.currentTime+.2)}catch(c){console.warn("æ’­æ”¾æç¤ºéŸ³å¤±è´¥:",c)}},z=(c,g,d)=>{"Notification"in window&&(Notification.permission==="granted"?new Notification(c,{body:g,icon:d||"/logo.png",badge:"/logo.png",tag:"chat-message",requireInteraction:!1,silent:!0}):Notification.permission!=="denied"&&Notification.requestPermission().then(n=>{n==="granted"&&new Notification(c,{body:g,icon:d||"/logo.png",badge:"/logo.png",tag:"chat-message",requireInteraction:!1,silent:!0})}))},F=ce(()=>{const c=[{name:"é¦–é¡µ",path:"/home",icon:"ğŸ "},{name:"å‘ç°",path:"/discover",icon:"âœ¨"},{name:"æœç´¢",path:"/search",icon:"ğŸ”"},{name:"æ­Œæ‰‹",path:"/artists",icon:"ğŸ¤"},{name:"æ­Œå•å¹¿åœº",path:"/playlist",icon:"ğŸ“ƒ"},{name:"æ’è¡Œæ¦œ",path:"/rank",icon:"ğŸ“Š"},{name:"æˆ‘çš„éŸ³ä¹",path:"/my-music"},{name:"å¥½å‹",path:"/friends",icon:"ğŸ‘¥",badge:s.friendRequestCount},{name:"èŠå¤©",path:"/chat",icon:"ğŸ’¬",badge:s.unreadMessageCount},{name:"åŠ¨æ€",path:"/moments",icon:"ğŸ“±"},{name:"åˆ†äº«å¹¿åœº",path:"/share-square",icon:"ğŸ”—"}];return o.isAdmin&&c.push({name:"ç®¡ç†åå°",path:"/admin",icon:"ğŸ”§"}),c});return ke(()=>{var c;if(o.isLogin){s.initSocialData().catch(x=>{console.error("åˆå§‹åŒ–ç¤¾äº¤æ•°æ®å¤±è´¥:",x)});const g=localStorage.getItem("token"),d=(c=o.userInfo)==null?void 0:c.id;if(d&&g){ee.connect({userId:d,token:g});const x=ee.onChatMessage(async r=>{var j;try{if(!r)return;const N=U.currentRoute.value,A=N.path&&N.path.startsWith("/chat"),B=N.params.id,P=A&&B&&(r.senderId==B||r.receiverId==B);if(await new Promise(C=>setTimeout(C,200)),!P&&(await s.updateUnreadMessageCount(),r.receiverId===((j=o.userInfo)==null?void 0:j.id))){const C=r.senderName||"å¥½å‹";let _=r.content||"";r.type==="song"?_="[åˆ†äº«äº†ä¸€é¦–æ­Œæ›²]":r.type==="playlist"?_="[åˆ†äº«äº†ä¸€ä¸ªæ­Œå•]":_.length>20&&(_=_.substring(0,20)+"..."),Je("æ–°æ¶ˆæ¯",`${C}ï¼š${_}`),z("æ–°æ¶ˆæ¯",`${C}ï¼š${_}`,r.senderAvatar),E()}}catch(N){console.error("å¤„ç†èŠå¤©æ¶ˆæ¯å¤±è´¥:",N)}}),W=ee.onNotification(async r=>{r&&r.type==="notification_unread_count"?s.unreadNotificationCount=r.unreadCount||0:await s.updateUnreadNotificationCount().catch(()=>{})});he(()=>{try{x&&x()}catch{}try{W&&W()}catch{}})}const n=setInterval(()=>{o.isLogin?(s.updateUnreadMessageCount().catch(x=>{console.error("æ›´æ–°æœªè¯»æ¶ˆæ¯æ•°å¤±è´¥:",x)}),s.updateUnreadNotificationCount().catch(x=>{console.error("æ›´æ–°æœªè¯»é€šçŸ¥æ•°å¤±è´¥:",x)})):clearInterval(n)},3e4);he(()=>{try{clearInterval(n)}catch{}})}}),{userStore:o,socialStore:s,menuItems:F,mobileMenuOpen:k,desktopLyricRef:w,desktopLyricVisible:f,toggleMobileMenu:()=>{k.value=!k.value},toggleDesktopLyric:()=>{w.value&&(w.value.toggle(),f.value=w.value.visible)},goHome:()=>{U.push("/home")},handleCommand:async c=>{switch(c){case"profile":U.push("/profile");break;case"settings":_e.info("è®¾ç½®åŠŸèƒ½å¾…å¼€å‘");break;case"logout":je.confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(()=>{try{ee.disconnect()}catch{}T.clearPlayer(),o.logout(),_e.success("å·²é€€å‡ºç™»å½•"),U.push("/login")}).catch(()=>{});break}}}}},ht={class:"app-layout"},_t={class:"app-header"},yt={class:"header-content"},bt={class:"nav-menu desktop-menu"},xt={key:0,class:"menu-icon"},kt={class:"user-section"},wt={class:"user-info"},Ct={class:"username"},Mt={key:0,class:"admin-badge"},Lt={class:"mobile-menu-header"},St={key:0,class:"menu-icon"},It={class:"app-main"};function Tt(U,o,T,s,k,w){const f=b("el-badge"),E=b("router-link"),z=b("el-button"),F=b("el-tooltip"),Y=b("ThemeToggle"),$=b("el-avatar"),m=b("el-dropdown-item"),V=b("el-dropdown-menu"),c=b("el-dropdown"),g=b("router-view"),d=b("DesktopLyric");return v(),L("div",ht,[o[11]||(o[11]=l("div",{class:"galaxy-bg"},null,-1)),l("header",_t,[l("div",yt,[l("div",{class:"logo",onClick:o[0]||(o[0]=(...n)=>s.goHome&&s.goHome(...n))},[...o[5]||(o[5]=[l("span",{class:"logo-icon"},"ğŸµ",-1),l("span",{class:"logo-text"},"Sheep Music",-1)])]),l("nav",bt,[(v(!0),L(re,null,ue(s.menuItems,n=>(v(),O(E,{key:n.path,to:n.path,class:"nav-item","active-class":"active"},{default:u(()=>[n.icon?(v(),L("span",xt,I(n.icon),1)):D("",!0),q(" "+I(n.name)+" ",1),n.badge&&n.badge>0?(v(),O(f,{key:1,value:n.badge,max:99,"is-dot":!1,class:"menu-badge"},null,8,["value"])):D("",!0)]),_:2},1032,["to"]))),128))]),l("div",{class:"mobile-menu-btn",onClick:o[1]||(o[1]=(...n)=>s.toggleMobileMenu&&s.toggleMobileMenu(...n))},[...o[6]||(o[6]=[l("span",{class:"menu-icon"},"â˜°",-1)])]),l("div",kt,[i(F,{content:"æ¡Œé¢æ­Œè¯",placement:"bottom"},{default:u(()=>[i(z,{icon:s.desktopLyricVisible?"ChatLineSquare":"ChatDotSquare",circle:"",onClick:s.toggleDesktopLyric,type:s.desktopLyricVisible?"primary":"",class:"lyric-toggle-btn"},null,8,["icon","onClick","type"])]),_:1}),i(Y),i(c,{onCommand:s.handleCommand},{dropdown:u(()=>[i(V,null,{default:u(()=>[i(m,{command:"profile"},{default:u(()=>[...o[7]||(o[7]=[q("ä¸ªäººä¸­å¿ƒ",-1)])]),_:1}),i(m,{command:"settings"},{default:u(()=>[...o[8]||(o[8]=[q("è®¾ç½®",-1)])]),_:1}),i(m,{divided:"",command:"logout"},{default:u(()=>[...o[9]||(o[9]=[q("é€€å‡ºç™»å½•",-1)])]),_:1})]),_:1})]),default:u(()=>{var n,x;return[l("div",wt,[i($,{src:(n=s.userStore.userInfo)==null?void 0:n.avatar,size:"default"},{default:u(()=>{var W,r;return[q(I((r=(W=s.userStore.userInfo)==null?void 0:W.nickname)==null?void 0:r.charAt(0)),1)]}),_:1},8,["src"]),l("span",Ct,I((x=s.userStore.userInfo)==null?void 0:x.nickname),1),s.userStore.isAdmin?(v(),L("span",Mt,"ç®¡ç†å‘˜")):D("",!0)])]}),_:1},8,["onCommand"])])])]),i(J,{name:"slide"},{default:u(()=>[s.mobileMenuOpen?(v(),L("div",{key:0,class:"mobile-menu-overlay",onClick:o[4]||(o[4]=(...n)=>s.toggleMobileMenu&&s.toggleMobileMenu(...n))},[l("nav",{class:"mobile-menu",onClick:o[3]||(o[3]=Q(()=>{},["stop"]))},[l("div",Lt,[o[10]||(o[10]=l("span",{class:"menu-title"},"èœå•",-1)),l("span",{class:"close-btn",onClick:o[2]||(o[2]=(...n)=>s.toggleMobileMenu&&s.toggleMobileMenu(...n))},"âœ•")]),(v(!0),L(re,null,ue(s.menuItems,n=>(v(),O(E,{key:n.path,to:n.path,class:"mobile-nav-item","active-class":"active",onClick:s.toggleMobileMenu},{default:u(()=>[n.icon?(v(),L("span",St,I(n.icon),1)):D("",!0),q(" "+I(n.name)+" ",1),n.badge&&n.badge>0?(v(),O(f,{key:1,value:n.badge,max:99,class:"mobile-menu-badge"},null,8,["value"])):D("",!0)]),_:2},1032,["to","onClick"]))),128))])])):D("",!0)]),_:1}),l("main",It,[i(g,null,{default:u(({Component:n,route:x})=>[i(J,{name:"fade-slide",mode:"out-in"},{default:u(()=>[(v(),O(Ye(n),{key:x.path}))]),_:2},1024)]),_:1})]),i(d,{ref:"desktopLyricRef"},null,512)])}const Et=de(ft,[["render",Tt],["__scopeId","data-v-7cab072c"]]);export{Et as default};
