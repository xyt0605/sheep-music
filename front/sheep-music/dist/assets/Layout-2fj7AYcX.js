import{_ as de,l as We,c as M,o as v,d as i,w as u,r as b,m as H,s as Be,p as Pe,q as xe,h as f,v as re,x as le,j as ke,y as Ue,z as O,k as N,A as Ae,a as l,B as Xe,e as q,C as qe,t as I,F as ce,D as ue,T as J,G as ie,H as Q,n as pe,I as He,J as Oe,u as we,K as Fe,L as Ye,g as $e,M as Je,N as he,O as je,E as _e}from"./index-DKwCkw1b.js";import{u as Ge}from"./social-xdTTRlYp.js";import{w as ee}from"./client-BkyLSk0h.js";const Ke={class:"theme-toggle"},Qe={__name:"ThemeToggle",setup(P){const{isDark:o,toggleTheme:T}=We();return(s,k)=>{const w=b("el-button"),p=b("el-tooltip");return v(),M("div",Ke,[i(p,{content:H(o)?"ÂàáÊç¢Âà∞‰∫ÆËâ≤Ê®°Âºè":"ÂàáÊç¢Âà∞ÊöóÈªëÊ®°Âºè",placement:"bottom"},{default:u(()=>[i(w,{icon:H(o)?H(Be):H(Pe),circle:"",onClick:H(T),class:"theme-toggle-btn"},null,8,["icon","onClick"])]),_:1},8,["content"])])}}},Ze=de(Qe,[["__scopeId","data-v-aeed8507"]]),et={class:"lyric-controls"},tt={class:"drag-handle",title:"ÂèåÂáªÈîÅÂÆö/Ëß£ÈîÅ"},ot={class:"control-buttons"},nt={class:"opacity-control"},at={class:"control-value"},st={class:"color-control"},lt={class:"color-presets"},it=["onClick","title"],rt={class:"font-control"},ct={class:"control-value"},ut={key:0,class:"lyric-next"},dt={key:0,class:"song-info"},mt={class:"song-title"},vt={class:"song-artist"},ye=300,be=1200,gt={__name:"DesktopLyric",setup(P,{expose:o}){const T=xe(),s=we(),k=f(!1),w=f(!1),p=f(!1),D=f(!1),z=f(!1),F=f(!1),Y=f(!0),$=f(!0),m=f({x:0,y:0}),V=f(.95),r=f("rgba(0, 0, 0, 0.75)"),g=f(28),d=f(600),n=["rgba(0, 0, 0, 0.75)","rgba(102, 126, 234, 0.85)","rgba(118, 75, 162, 0.85)","rgba(245, 87, 108, 0.85)","rgba(52, 152, 219, 0.85)","rgba(46, 204, 113, 0.85)","rgba(155, 89, 182, 0.85)","rgba(52, 73, 94, 0.85)"],x=t=>({"rgba(0, 0, 0, 0.75)":"ÁªèÂÖ∏Èªë","rgba(102, 126, 234, 0.85)":"Á¥´ÁΩóÂÖ∞","rgba(118, 75, 162, 0.85)":"Ê∑±Á¥´","rgba(245, 87, 108, 0.85)":"Á≤âÁ∫¢","rgba(52, 152, 219, 0.85)":"Â§©Ëìù","rgba(46, 204, 113, 0.85)":"Áø†Áªø","rgba(155, 89, 182, 0.85)":"Á¥´Ê∞¥Êô∂","rgba(52, 73, 94, 0.85)":"Ê∑±ÁÅ∞"})[t]||"Ëá™ÂÆö‰πâ",W=f({x:0,y:0});let c="",j=0,E=0,U=0;const A=()=>{try{document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",oe),D.value=!1,z.value=!1,c="",console.log("‰∫ã‰ª∂ÁõëÂê¨Âô®Â∑≤Ê∏ÖÁêÜ")}catch(t){console.error("Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®Êó∂Âá∫Èîô:",t)}},B=re(()=>T.currentSong),L=f("‚ô™ ÊöÇÊó†Ê≠åËØç ‚ô™"),_=f(""),y=f([]),Ce=()=>{k.value=!0,ae()},Me=()=>{k.value=!1},Le=()=>{k.value=!k.value,k.value&&ae()},Se=()=>{k.value=!1},Ie=()=>{p.value=!p.value,X()},Te=t=>{w.value&&(p.value||z.value||t.target.closest(".control-buttons")||t.target.closest(".resize-handle")||(t.stopPropagation(),D.value=!0,W.value={x:t.clientX-m.value.x,y:t.clientY-m.value.y},document.addEventListener("mousemove",te,{passive:!1}),document.addEventListener("mouseup",oe,{passive:!1})))},te=t=>{if(!w.value){A();return}if(t.preventDefault(),D.value){const e=t.clientX-W.value.x,a=t.clientY-W.value.y,C=window.innerWidth-d.value,R=window.innerHeight-150;m.value={x:Math.max(0,Math.min(e,C)),y:Math.max(0,Math.min(a,R))}}else z.value&&ze(t)},oe=()=>{try{D.value&&(D.value=!1,X()),z.value&&(z.value=!1,c="",X())}catch(t){console.error("handleMouseUp error:",t)}finally{A()}},me=(t,e)=>{w.value&&(p.value||(t.stopPropagation(),z.value=!0,c=e,j=t.clientX,E=d.value,U=m.value.x,document.addEventListener("mousemove",te,{passive:!1}),document.addEventListener("mouseup",oe,{passive:!1})))},ze=t=>{if(!z.value)return;const e=t.clientX-j;let a=E,C=U;if(c==="right"?a=E+e:c==="left"&&(a=E-e,C=U+e),a=Math.max(ye,Math.min(a,be)),c==="right"){const R=window.innerWidth-m.value.x-20;a=Math.min(a,R)}else if(c==="left"){const S=U+E-ye;C=Math.max(0,Math.min(C,S)),a=U+E-C}d.value=a,c==="left"&&(m.value.x=C)},ne=()=>{d.value=600,m.value={x:(window.innerWidth-d.value)/2,y:50},X()},Ne=t=>{r.value=t,X()},X=()=>{const t={position:m.value,opacity:V.value,backgroundColor:r.value,fontSize:g.value,width:d.value,isLocked:p.value,showNextLine:Y.value,showSongInfo:$.value};localStorage.setItem("desktopLyricSettings",JSON.stringify(t))},ae=()=>{const t=localStorage.getItem("desktopLyricSettings");if(t)try{const e=JSON.parse(t);d.value=e.width||600,m.value=e.position||{x:(window.innerWidth-d.value)/2,y:50},V.value=e.opacity||.95,r.value=e.backgroundColor||"rgba(0, 0, 0, 0.75)",g.value=e.fontSize||28,p.value=e.isLocked||!1,Y.value=e.showNextLine??!0,$.value=e.showSongInfo??!0}catch{ne()}else ne()},De=re(()=>T.isPlaying);le(()=>T.currentTime,t=>{y.value.length>0&&De.value&&se(t)},{immediate:!0}),le(()=>{var t;return(t=B.value)==null?void 0:t.id},t=>{t?ve(t):(L.value="‚ô™ ÊöÇÊó†Êí≠Êîæ ‚ô™",_.value="",y.value=[])},{immediate:!0});async function ve(t){console.log("Âä†ËΩΩÊ≠åËØçÔºåÊ≠åÊõ≤ID:",t);try{const e=await Oe(t);if(e.code===200){const a=e.data;if(!a||a.trim()===""){console.log("ËØ•Ê≠åÊõ≤ÊöÇÊó†Ê≠åËØç"),L.value="‚ô™ Á∫ØÈü≥‰πêÔºåËØ∑Ê¨£Ëµè ‚ô™",_.value="",y.value=[];return}y.value=Ee(a),console.log("Ê≠åËØçËß£ÊûêÂÆåÊàêÔºåÂÖ±",y.value.length,"Ë°å"),y.value.length===0?(L.value="‚ô™ Ê≠åËØçËß£ÊûêÂ§±Ë¥• ‚ô™",_.value=""):se(T.currentTime||0)}else console.error("Ëé∑ÂèñÊ≠åËØçÂ§±Ë¥•:",e.message),ge(t)}catch(e){console.error("Âä†ËΩΩÊ≠åËØçÂá∫Èîô:",e),ge(t)}}const ge=t=>{console.log("‰ΩøÁî®Ê®°ÊãüÊ≠åËØçÊï∞ÊçÆ");const e=Re(t);y.value=e,y.value.length>0?se(T.currentTime||0):(L.value="‚ô™ ÊöÇÊó†Ê≠åËØç ‚ô™",_.value="")};function Ee(t){const e=t.split(`
`),a=[],C=/\[(\d{2}):(\d{2})\.(\d{2,3})\](.*)/;return e.forEach(R=>{const S=R.match(C);if(S){const h=parseInt(S[1]),G=parseInt(S[2]),Z=parseInt(S[3].padEnd(3,"0")),K=S[4].trim(),Ve=h*60+G+Z/1e3;K&&K.length>0&&a.push({time:Ve,text:K})}}),a.sort((R,S)=>R.time-S.time),console.log("Ëß£ÊûêÂà∞",a.length,"Ë°åÊ≠åËØç"),a.length>0&&(console.log("Á¨¨‰∏ÄÂè•:",a[0]),console.log("ÊúÄÂêé‰∏ÄÂè•:",a[a.length-1])),a}const Re=t=>{const e=[[{time:0,text:"‚ô™ ÂâçÂ•è ‚ô™"},{time:5,text:"Âú®ËøôÁæéÂ•ΩÁöÑÊó∂ÂÖâÈáå"},{time:10,text:"ËÆ©Èü≥‰πêÂ∏¶Ëµ∞ÊâÄÊúâÁÉ¶ÊÅº"},{time:15,text:"Ë∑üÁùÄËäÇÂ•èËΩªËΩªÊëáÊëÜ"},{time:20,text:"ÊÑüÂèóÊØè‰∏Ä‰∏™Èü≥Á¨¶ÁöÑË∑≥Âä®"},{time:25,text:"‚ô™ Èó¥Â•è ‚ô™"},{time:30,text:"ÁîüÊ¥ªÂ∞±ÂÉè‰∏ÄÈ¶ñÊ≠å"},{time:35,text:"ÊúâÈ´òÊΩÆ‰πüÊúâ‰ΩéË∞∑"},{time:40,text:"‰ΩÜÈü≥‰πêÊ∞∏ËøúÈô™‰º¥ÁùÄ‰Ω†"},{time:45,text:"‚ô™ Â∞æÂ•è ‚ô™"}],[{time:0,text:"‚ô™ Èü≥‰πêÂìçËµ∑ ‚ô™"},{time:8,text:"Â§úÁ©∫‰∏≠ÊúÄ‰∫ÆÁöÑÊòü"},{time:13,text:"ËÉΩÂê¶Âê¨Ê∏Ö"},{time:18,text:"ÈÇ£‰ª∞ÊúõÁöÑ‰∫∫"},{time:23,text:"ÂøÉÂ∫ïÁöÑÂ≠§Áã¨ÂíåÂèπÊÅØ"},{time:28,text:"‚ô™ ÁªßÁª≠ ‚ô™"}],[{time:0,text:"‚ô™ ÂºÄÂßã ‚ô™"},{time:6,text:"Êàë‰ª¨ÈÉΩÊòØËøΩÊ¢¶‰∫∫"},{time:12,text:"Âú®ËøôÊº´ÈïøÁöÑÊóÖÈÄî‰∏≠"},{time:18,text:"Èü≥‰πêÊòØÊúÄÂ•ΩÁöÑ‰ºô‰º¥"},{time:24,text:"ËÆ©Êàë‰ª¨ÁªßÁª≠ÂâçË°å"},{time:30,text:"‚ô™ ÂâçËøõ ‚ô™"}]],a=(t||0)%e.length;return e[a]};function se(t){if(!y.value||y.value.length===0){L.value="‚ô™ ÊöÇÊó†Ê≠åËØç ‚ô™",_.value="";return}let e=-1;for(let a=y.value.length-1;a>=0;a--)if(t>=y.value[a].time){e=a;break}if(e>=0){const a=y.value[e].text;L.value!==a&&(L.value=a,console.log(`[${Math.floor(t)}s] ÂΩìÂâçÊ≠åËØç:`,a)),e+1<y.value.length?_.value=y.value[e+1].text:_.value=""}else L.value="‚ô™ ÂâçÂ•è ‚ô™",y.value.length>0&&(_.value=y.value[0].text)}const fe=()=>{const t=window.innerWidth-d.value,e=window.innerHeight-150;m.value.x>t&&(m.value.x=Math.max(0,t)),m.value.y>e&&(m.value.y=Math.max(0,e)),d.value>window.innerWidth-40&&(d.value=Math.min(window.innerWidth-40,be)),m.value.x<0&&(m.value.x=0),m.value.y<0&&(m.value.y=0)};return ke(()=>{var t,e;console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂ÂºÄÂßãÊåÇËΩΩ"),setTimeout(()=>{w.value=!0,console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂Â∑≤ÊåÇËΩΩÔºåisMountedËÆæÁΩÆ‰∏∫true")},0),window.addEventListener("resize",fe),ae(),(t=B.value)!=null&&t.id?(console.log("ÁªÑ‰ª∂ÊåÇËΩΩÔºåÂΩìÂâçÊ≠åÊõ≤:",B.value.title),ve(B.value.id)):console.log("ÁªÑ‰ª∂ÊåÇËΩΩÔºåÊöÇÊó†Êí≠ÊîæÊ≠åÊõ≤"),console.log("Êí≠ÊîæÂô®Áä∂ÊÄÅ:",{playing:T.isPlaying,currentTime:T.currentTime,song:(e=B.value)==null?void 0:e.title})}),Ue(()=>{console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂ÂºÄÂßãÂç∏ËΩΩ"),w.value=!1,k.value=!1,window.removeEventListener("resize",fe),A(),console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂Âç∏ËΩΩÂÆåÊàê")}),le(()=>s.currentRoute.value.path,(t,e)=>{console.log("Ë∑ØÁî±ÂàáÊç¢:",e,"->",t),console.log("Ê∏ÖÁêÜÊ°åÈù¢Ê≠åËØç‰∫ã‰ª∂ÁõëÂê¨Âô®"),A(),F.value=!1},{immediate:!1}),o({show:Ce,hide:Me,toggle:Le,visible:k}),(t,e)=>{const a=b("el-icon"),C=b("el-button"),R=b("el-slider"),S=b("el-popover");return v(),O(He,{to:"body",disabled:!w.value},[i(J,{name:"slide-down"},{default:u(()=>[k.value&&w.value?(v(),M("div",{key:0,class:pe(["desktop-lyric",{locked:p.value,dragging:D.value,resizing:z.value}]),style:ie({top:m.value.y+"px",left:m.value.x+"px",width:d.value+"px",opacity:V.value,backgroundColor:r.value}),onMousedown:Q(Te,["stop"]),onDblclick:Q(Ie,["stop"])},[Ae(l("div",et,[l("div",tt,[i(a,null,{default:u(()=>[i(H(qe))]),_:1}),q(" "+I(p.value?"üîí":"üîì"),1)]),l("div",ot,[i(S,{placement:"bottom",width:220,trigger:"click","popper-class":"lyric-control-popover"},{reference:u(()=>[i(C,{icon:"Sunny",circle:"",size:"small",title:"ÈÄèÊòéÂ∫¶"})]),default:u(()=>[l("div",nt,[e[4]||(e[4]=l("div",{class:"control-title"},"ÈÄèÊòéÂ∫¶",-1)),l("div",at,I(Math.round(V.value*100))+"%",1),i(R,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=h=>V.value=h),min:.3,max:1,step:.1,onChange:X},null,8,["modelValue"])])]),_:1}),i(S,{placement:"bottom",width:240,trigger:"click","popper-class":"lyric-color-popover"},{reference:u(()=>[i(C,{icon:"Brush",circle:"",size:"small",title:"ËÉåÊôØËâ≤"})]),default:u(()=>[l("div",st,[e[5]||(e[5]=l("div",{class:"color-control-title"},"ËÉåÊôØÈ¢úËâ≤",-1)),l("div",lt,[(v(),M(ce,null,ue(n,h=>l("div",{key:h,class:pe(["color-item",{active:r.value===h}]),style:ie({backgroundColor:h}),onClick:G=>Ne(h),title:x(h)},[r.value===h?(v(),O(a,{key:0,class:"check-icon"},{default:u(()=>[i(H(Fe))]),_:1})):N("",!0)],14,it)),64))])])]),_:1}),i(S,{placement:"bottom",width:220,trigger:"click","popper-class":"lyric-control-popover"},{reference:u(()=>[i(C,{icon:"FontSize",circle:"",size:"small",title:"Â≠ó‰ΩìÂ§ßÂ∞è"})]),default:u(()=>[l("div",rt,[e[6]||(e[6]=l("div",{class:"control-title"},"Â≠ó‰ΩìÂ§ßÂ∞è",-1)),l("div",ct,I(g.value)+"px",1),i(R,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=h=>g.value=h),min:16,max:48,step:2,onChange:X},null,8,["modelValue"])])]),_:1}),i(C,{icon:"RefreshRight",circle:"",size:"small",title:"ÈáçÁΩÆ‰ΩçÁΩÆ",onClick:ne}),i(C,{icon:"Close",circle:"",size:"small",title:"ÂÖ≥Èó≠Ê°åÈù¢Ê≠åËØç",onClick:Se})])],512),[[Xe,!p.value||F.value]]),l("div",{class:"lyric-content",style:ie({fontSize:g.value+"px"})},[i(J,{name:"lyric-fade",mode:"out-in"},{default:u(()=>[(v(),M("div",{key:L.value,class:"lyric-line"},I(L.value||"ÊöÇÊó†Ê≠åËØç"),1))]),_:1}),i(J,{name:"fade"},{default:u(()=>[_.value&&Y.value?(v(),M("div",ut,I(_.value),1)):N("",!0)]),_:1})],4),i(J,{name:"fade"},{default:u(()=>{var h,G,Z;return[$.value?(v(),M("div",dt,[l("span",mt,I(((h=B.value)==null?void 0:h.title)||"Êú™Êí≠Êîæ"),1),l("span",vt,I(((Z=(G=B.value)==null?void 0:G.artists)==null?void 0:Z.map(K=>K.name).join(" / "))||""),1)])):N("",!0)]}),_:1}),p.value?N("",!0):(v(),M("div",{key:0,class:"resize-handle resize-left",onMousedown:e[2]||(e[2]=Q(h=>me(h,"left"),["stop"])),title:"ÊãñÊãΩË∞ÉÊï¥ÂÆΩÂ∫¶"},null,32)),p.value?N("",!0):(v(),M("div",{key:1,class:"resize-handle resize-right",onMousedown:e[3]||(e[3]=Q(h=>me(h,"right"),["stop"])),title:"ÊãñÊãΩË∞ÉÊï¥ÂÆΩÂ∫¶"},null,32))],38)):N("",!0)]),_:1})],8,["disabled"])}}},ft=de(gt,[["__scopeId","data-v-69fdf1e8"]]),pt={name:"Layout",components:{ThemeToggle:Ze,DesktopLyric:ft},setup(){const P=we(),o=$e(),T=xe(),s=Ge(),k=f(!1),w=f(null),p=f(!1),D=()=>{try{const r=new(window.AudioContext||window.webkitAudioContext),g=r.createOscillator(),d=r.createGain();g.connect(d),d.connect(r.destination),g.frequency.value=800,g.type="sine",d.gain.setValueAtTime(.3,r.currentTime),d.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),g.start(r.currentTime),g.stop(r.currentTime+.2)}catch(r){console.warn("Êí≠ÊîæÊèêÁ§∫Èü≥Â§±Ë¥•:",r)}},z=(r,g,d)=>{"Notification"in window&&(Notification.permission==="granted"?new Notification(r,{body:g,icon:d||"/logo.png",badge:"/logo.png",tag:"chat-message",requireInteraction:!1,silent:!0}):Notification.permission!=="denied"&&Notification.requestPermission().then(n=>{n==="granted"&&new Notification(r,{body:g,icon:d||"/logo.png",badge:"/logo.png",tag:"chat-message",requireInteraction:!1,silent:!0})}))},F=re(()=>{const r=[{name:"È¶ñÈ°µ",path:"/home",icon:"üè†"},{name:"ÂèëÁé∞",path:"/discover",icon:"‚ú®"},{name:"ÊêúÁ¥¢",path:"/search",icon:"üîç"},{name:"Ê≠åÊâã",path:"/artists",icon:"üé§"},{name:"Ê≠åÂçïÂπøÂú∫",path:"/playlist",icon:"üìÉ"},{name:"ÊéíË°åÊ¶ú",path:"/rank",icon:"üìä"},{name:"ÊàëÁöÑÈü≥‰πê",path:"/my-music"},{name:"Â•ΩÂèã",path:"/friends",icon:"üë•",badge:s.friendRequestCount},{name:"ËÅäÂ§©",path:"/chat",icon:"üí¨",badge:s.unreadMessageCount},{name:"Âä®ÊÄÅ",path:"/moments",icon:"üì±"},{name:"ÂàÜ‰∫´ÂπøÂú∫",path:"/share-square",icon:"üîó"}];return o.isAdmin&&r.push({name:"ÁÆ°ÁêÜÂêéÂè∞",path:"/admin",icon:"üîß"}),r});return ke(()=>{var r;if(o.isLogin){s.initSocialData().catch(x=>{console.error("ÂàùÂßãÂåñÁ§æ‰∫§Êï∞ÊçÆÂ§±Ë¥•:",x)});const g=localStorage.getItem("token"),d=(r=o.userInfo)==null?void 0:r.id;if(d&&g){ee.connect({userId:d,token:g});const x=ee.onChatMessage(async c=>{var j;try{if(!c)return;const E=P.currentRoute.value,U=E.name==="Chat",A=E.params.friendId;if(!(U&&(c.senderId==A||c.receiverId==A))&&(await s.updateUnreadMessageCount(),c.receiverId===((j=o.userInfo)==null?void 0:j.id))){const L=c.senderName||"Â•ΩÂèã";let _=c.content||"";c.type==="song"?_="[ÂàÜ‰∫´‰∫Ü‰∏ÄÈ¶ñÊ≠åÊõ≤]":c.type==="playlist"?_="[ÂàÜ‰∫´‰∫Ü‰∏Ä‰∏™Ê≠åÂçï]":_.length>20&&(_=_.substring(0,20)+"..."),Je("Êñ∞Ê∂àÊÅØ",`${L}Ôºö${_}`),z("Êñ∞Ê∂àÊÅØ",`${L}Ôºö${_}`,c.senderAvatar),D()}}catch(E){console.error("Â§ÑÁêÜËÅäÂ§©Ê∂àÊÅØÂ§±Ë¥•:",E)}}),W=ee.onNotification(async c=>{c&&c.type==="notification_unread_count"?s.unreadNotificationCount=c.unreadCount||0:await s.updateUnreadNotificationCount().catch(()=>{})});he(()=>{try{x&&x()}catch{}try{W&&W()}catch{}})}const n=setInterval(()=>{o.isLogin?(s.updateUnreadMessageCount().catch(x=>{console.error("Êõ¥Êñ∞Êú™ËØªÊ∂àÊÅØÊï∞Â§±Ë¥•:",x)}),s.updateUnreadNotificationCount().catch(x=>{console.error("Êõ¥Êñ∞Êú™ËØªÈÄöÁü•Êï∞Â§±Ë¥•:",x)})):clearInterval(n)},3e4);he(()=>{try{clearInterval(n)}catch{}})}}),{userStore:o,socialStore:s,menuItems:F,mobileMenuOpen:k,desktopLyricRef:w,desktopLyricVisible:p,toggleMobileMenu:()=>{k.value=!k.value},toggleDesktopLyric:()=>{w.value&&(w.value.toggle(),p.value=w.value.visible)},goHome:()=>{P.push("/home")},handleCommand:async r=>{switch(r){case"profile":P.push("/profile");break;case"settings":_e.info("ËÆæÁΩÆÂäüËÉΩÂæÖÂºÄÂèë");break;case"logout":je.confirm("Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>{try{ee.disconnect()}catch{}T.clearPlayer(),o.logout(),_e.success("Â∑≤ÈÄÄÂá∫ÁôªÂΩï"),P.push("/login")}).catch(()=>{});break}}}}},ht={class:"app-layout"},_t={class:"app-header"},yt={class:"header-content"},bt={class:"nav-menu desktop-menu"},xt={key:0,class:"menu-icon"},kt={class:"user-section"},wt={class:"user-info"},Ct={class:"username"},Mt={key:0,class:"admin-badge"},Lt={class:"mobile-menu-header"},St={key:0,class:"menu-icon"},It={class:"app-main"};function Tt(P,o,T,s,k,w){const p=b("el-badge"),D=b("router-link"),z=b("el-button"),F=b("el-tooltip"),Y=b("ThemeToggle"),$=b("el-avatar"),m=b("el-dropdown-item"),V=b("el-dropdown-menu"),r=b("el-dropdown"),g=b("router-view"),d=b("DesktopLyric");return v(),M("div",ht,[o[11]||(o[11]=l("div",{class:"galaxy-bg"},null,-1)),l("header",_t,[l("div",yt,[l("div",{class:"logo",onClick:o[0]||(o[0]=(...n)=>s.goHome&&s.goHome(...n))},[...o[5]||(o[5]=[l("span",{class:"logo-icon"},"üéµ",-1),l("span",{class:"logo-text"},"Sheep Music",-1)])]),l("nav",bt,[(v(!0),M(ce,null,ue(s.menuItems,n=>(v(),O(D,{key:n.path,to:n.path,class:"nav-item","active-class":"active"},{default:u(()=>[n.icon?(v(),M("span",xt,I(n.icon),1)):N("",!0),q(" "+I(n.name)+" ",1),n.badge&&n.badge>0?(v(),O(p,{key:1,value:n.badge,max:99,"is-dot":!1,class:"menu-badge"},null,8,["value"])):N("",!0)]),_:2},1032,["to"]))),128))]),l("div",{class:"mobile-menu-btn",onClick:o[1]||(o[1]=(...n)=>s.toggleMobileMenu&&s.toggleMobileMenu(...n))},[...o[6]||(o[6]=[l("span",{class:"menu-icon"},"‚ò∞",-1)])]),l("div",kt,[i(F,{content:"Ê°åÈù¢Ê≠åËØç",placement:"bottom"},{default:u(()=>[i(z,{icon:s.desktopLyricVisible?"ChatLineSquare":"ChatDotSquare",circle:"",onClick:s.toggleDesktopLyric,type:s.desktopLyricVisible?"primary":"",class:"lyric-toggle-btn"},null,8,["icon","onClick","type"])]),_:1}),i(Y),i(r,{onCommand:s.handleCommand},{dropdown:u(()=>[i(V,null,{default:u(()=>[i(m,{command:"profile"},{default:u(()=>[...o[7]||(o[7]=[q("‰∏™‰∫∫‰∏≠ÂøÉ",-1)])]),_:1}),i(m,{command:"settings"},{default:u(()=>[...o[8]||(o[8]=[q("ËÆæÁΩÆ",-1)])]),_:1}),i(m,{divided:"",command:"logout"},{default:u(()=>[...o[9]||(o[9]=[q("ÈÄÄÂá∫ÁôªÂΩï",-1)])]),_:1})]),_:1})]),default:u(()=>{var n,x;return[l("div",wt,[i($,{src:(n=s.userStore.userInfo)==null?void 0:n.avatar,size:"default"},{default:u(()=>{var W,c;return[q(I((c=(W=s.userStore.userInfo)==null?void 0:W.nickname)==null?void 0:c.charAt(0)),1)]}),_:1},8,["src"]),l("span",Ct,I((x=s.userStore.userInfo)==null?void 0:x.nickname),1),s.userStore.isAdmin?(v(),M("span",Mt,"ÁÆ°ÁêÜÂëò")):N("",!0)])]}),_:1},8,["onCommand"])])])]),i(J,{name:"slide"},{default:u(()=>[s.mobileMenuOpen?(v(),M("div",{key:0,class:"mobile-menu-overlay",onClick:o[4]||(o[4]=(...n)=>s.toggleMobileMenu&&s.toggleMobileMenu(...n))},[l("nav",{class:"mobile-menu",onClick:o[3]||(o[3]=Q(()=>{},["stop"]))},[l("div",Lt,[o[10]||(o[10]=l("span",{class:"menu-title"},"ËèúÂçï",-1)),l("span",{class:"close-btn",onClick:o[2]||(o[2]=(...n)=>s.toggleMobileMenu&&s.toggleMobileMenu(...n))},"‚úï")]),(v(!0),M(ce,null,ue(s.menuItems,n=>(v(),O(D,{key:n.path,to:n.path,class:"mobile-nav-item","active-class":"active",onClick:s.toggleMobileMenu},{default:u(()=>[n.icon?(v(),M("span",St,I(n.icon),1)):N("",!0),q(" "+I(n.name)+" ",1),n.badge&&n.badge>0?(v(),O(p,{key:1,value:n.badge,max:99,class:"mobile-menu-badge"},null,8,["value"])):N("",!0)]),_:2},1032,["to","onClick"]))),128))])])):N("",!0)]),_:1}),l("main",It,[i(g,null,{default:u(({Component:n,route:x})=>[i(J,{name:"fade-slide",mode:"out-in"},{default:u(()=>[(v(),O(Ye(n),{key:x.path}))]),_:2},1024)]),_:1})]),i(d,{ref:"desktopLyricRef"},null,512)])}const Et=de(pt,[["render",Tt],["__scopeId","data-v-17ff1f45"]]);export{Et as default};
