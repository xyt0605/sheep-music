import{_ as W,g as b,h as F,i as Z,c as E,o as y,a as V,m as H,d as e,w as t,r as u,X as $,q as B,E as p,e as d,t as h,z as j,a1 as be,a8 as ve,k as X,I as _e,J as ye,K as Ve,f as he}from"./index-DUIxZ2bH.js";import{b as ke,d as we,c as De,u as Ce,e as xe}from"./artist-D5bxWWsQ.js";import{c as Y,d as Se,e as ze,f as Le,u as Ue}from"./song-DY3Abzll.js";import"./request-C9aqfYyr.js";const Ae={name:"ArtistManagement",setup(){const S=b(!1),a=b(!1),q=b([]),l=b(!1),A=b("add"),z=b(null),m=F({page:1,size:10,total:0}),i=F({id:null,name:"",avatar:"",region:"",description:""}),k={name:[{required:!0,message:"请输入歌手名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]},v=async()=>{S.value=!0;try{const f=await ke({page:m.page-1,size:m.size});q.value=f.data.content||[],m.total=f.data.totalElements||0}catch{p.error("获取歌手列表失败")}finally{S.value=!1}},L=()=>{A.value="add",w(),l.value=!0},D=f=>{A.value="edit",i.id=f.id,i.name=f.name,i.avatar=f.avatar||"",i.region=f.region||"",i.description=f.description||"",l.value=!0},w=()=>{i.id=null,i.name="",i.avatar="",i.region="",i.description="",z.value&&z.value.clearValidate()},C=async()=>{z.value&&await z.value.validate(async f=>{if(f)try{a.value=!0;const s={name:i.name,avatar:i.avatar||null,region:i.region||null,description:i.description||null};A.value==="add"?(await De(s),p.success("新增成功")):(await Ce(i.id,s),p.success("更新成功")),l.value=!1,v()}catch(s){p.error(s.message||"操作失败")}finally{a.value=!1}})},_=async f=>{try{await we(f),p.success("删除成功"),v()}catch(s){p.error(s.message||"删除失败")}},r=f=>f?new Date(f).toLocaleString("zh-CN"):"-";return Z(()=>{v()}),{loading:S,submitLoading:a,artistList:q,pagination:m,dialogVisible:l,dialogMode:A,formRef:z,formData:i,formRules:k,fetchArtists:v,showAddDialog:L,showEditDialog:D,handleSubmit:C,handleDelete:_,formatDate:r}}},Me={class:"artist-management"},qe={class:"toolbar"},Be={key:0,style:{"margin-top":"10px"}};function Ee(S,a,q,l,A,z){const m=u("el-button"),i=u("el-table-column"),k=u("el-avatar"),v=u("el-popconfirm"),L=u("el-table"),D=u("el-pagination"),w=u("el-input"),C=u("el-form-item"),_=u("el-form"),r=u("el-dialog"),f=$("loading");return y(),E("div",Me,[V("div",qe,[e(m,{type:"primary",icon:"Plus",onClick:l.showAddDialog},{default:t(()=>[...a[8]||(a[8]=[d(" 新增歌手 ",-1)])]),_:1},8,["onClick"]),e(m,{icon:"Refresh",onClick:l.fetchArtists},{default:t(()=>[...a[9]||(a[9]=[d("刷新",-1)])]),_:1},8,["onClick"])]),H((y(),B(L,{data:l.artistList,border:"",stripe:"",style:{width:"100%"}},{default:t(()=>[e(i,{type:"index",label:"序号",width:"60",align:"center"}),e(i,{label:"头像",width:"80",align:"center"},{default:t(({row:s})=>[e(k,{size:50,src:s.avatar},{default:t(()=>{var N;return[d(h((N=s.name)==null?void 0:N.charAt(0)),1)]}),_:2},1032,["src"])]),_:1}),e(i,{prop:"name",label:"歌手名称",width:"150"}),e(i,{prop:"region",label:"国家/地区",width:"120"}),e(i,{prop:"description",label:"简介","show-overflow-tooltip":""}),e(i,{prop:"createTime",label:"创建时间",width:"180"},{default:t(({row:s})=>[d(h(l.formatDate(s.createTime)),1)]),_:1}),e(i,{label:"操作",width:"180",fixed:"right",align:"center"},{default:t(({row:s})=>[e(m,{type:"primary",size:"small",onClick:N=>l.showEditDialog(s)},{default:t(()=>[...a[10]||(a[10]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(v,{title:"确定要删除这个歌手吗？",onConfirm:N=>l.handleDelete(s.id)},{reference:t(()=>[e(m,{type:"danger",size:"small"},{default:t(()=>[...a[11]||(a[11]=[d("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[f,l.loading]]),e(D,{"current-page":l.pagination.page,"onUpdate:currentPage":a[0]||(a[0]=s=>l.pagination.page=s),"page-size":l.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=s=>l.pagination.size=s),total:l.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.fetchArtists,onCurrentChange:l.fetchArtists,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e(r,{modelValue:l.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=s=>l.dialogVisible=s),title:l.dialogMode==="add"?"新增歌手":"编辑歌手",width:"600px","close-on-click-modal":!1},{footer:t(()=>[e(m,{onClick:a[6]||(a[6]=s=>l.dialogVisible=!1)},{default:t(()=>[...a[12]||(a[12]=[d("取消",-1)])]),_:1}),e(m,{type:"primary",loading:l.submitLoading,onClick:l.handleSubmit},{default:t(()=>[...a[13]||(a[13]=[d(" 确定 ",-1)])]),_:1},8,["loading","onClick"])]),default:t(()=>[e(_,{ref:"formRef",model:l.formData,rules:l.formRules,"label-width":"100px"},{default:t(()=>[e(C,{label:"歌手名称",prop:"name"},{default:t(()=>[e(w,{modelValue:l.formData.name,"onUpdate:modelValue":a[2]||(a[2]=s=>l.formData.name=s),placeholder:"请输入歌手名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(C,{label:"头像URL",prop:"avatar"},{default:t(()=>[e(w,{modelValue:l.formData.avatar,"onUpdate:modelValue":a[3]||(a[3]=s=>l.formData.avatar=s),placeholder:"请输入头像URL",type:"url"},null,8,["modelValue"]),l.formData.avatar?(y(),E("div",Be,[e(k,{size:80,src:l.formData.avatar},{default:t(()=>{var s;return[d(h((s=l.formData.name)==null?void 0:s.charAt(0)),1)]}),_:1},8,["src"])])):j("",!0)]),_:1}),e(C,{label:"国家/地区",prop:"region"},{default:t(()=>[e(w,{modelValue:l.formData.region,"onUpdate:modelValue":a[4]||(a[4]=s=>l.formData.region=s),placeholder:"例如：中国台湾",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(C,{label:"简介",prop:"description"},{default:t(()=>[e(w,{modelValue:l.formData.description,"onUpdate:modelValue":a[5]||(a[5]=s=>l.formData.description=s),type:"textarea",rows:4,placeholder:"请输入歌手简介",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}const Ne=W(Ae,[["render",Ee],["__scopeId","data-v-72ce226f"]]),Re={name:"SongManagement",components:{Plus:ve,Search:be},setup(){const S=b(!1),a=b(!1),q=b(!1),l=b(!1),A=b([]),z=b([]),m=b(!1),i=b("add"),k=b(null),v=b(!1),L=b(!1),D=b(!1),w=b([]),C=b(""),_=b(!1),r=b(!1),f=b(""),s=b(""),N="/api/upload/cover",G="/api/upload/music",P=X(()=>({Authorization:`Bearer ${localStorage.getItem("token")}`})),R=F({page:1,size:10,total:0}),c=F({id:null,title:"",artistIds:[],albumName:"",duration:null,cover:"",url:"",lyric:"",status:1}),I={title:[{required:!0,message:"请输入歌曲名称",trigger:"blur"}],artistIds:[{required:!0,type:"array",min:1,message:"请至少选择一位歌手",trigger:"change"}],url:[{required:!0,message:"请上传音乐文件",trigger:"change"}]},M=async()=>{S.value=!0;try{const n=await Y({page:R.page-1,size:R.size});A.value=n.data.content||[],R.total=n.data.totalElements||0}catch{p.error("获取歌曲列表失败")}finally{S.value=!1}},K=async()=>{try{const n=await xe();z.value=n.data||[]}catch{p.error("获取歌手列表失败")}},Q=()=>{i.value="add",o(),m.value=!0},T=n=>{i.value="edit",c.id=n.id,c.title=n.title,c.artistIds=n.artists&&n.artists.length>0?n.artists.map(g=>g.id):[],c.albumName=n.albumName||"",c.duration=n.duration,c.cover=n.cover||"",c.url=n.url,c.lyric=n.lyric||"",c.status=n.status,m.value=!0},o=()=>{c.id=null,c.title="",c.artistIds=[],c.albumName="",c.duration=null,c.cover="",c.url="",c.lyric="",c.status=1,q.value=!1,l.value=!1,k.value&&k.value.clearValidate()},U=n=>{const g=n.type.startsWith("image/"),x=n.size/1024/1024<2;return g?x?!0:(p.error("图片大小不能超过 2MB!"),!1):(p.error("只能上传图片文件!"),!1)},ee=n=>{var x;q.value=!1;const g=((x=n==null?void 0:n.data)==null?void 0:x.url)||(n==null?void 0:n.url);g?(c.cover=g,p.success("封面上传成功")):p.error("封面上传失败")},ae=n=>{const g=n.type.startsWith("audio/"),x=n.size/1024/1024<30;return g?x?!0:(p.error("音频文件大小不能超过 30MB!"),!1):(p.error("只能上传音频文件!"),!1)},le=n=>{var x;l.value=!1;const g=((x=n==null?void 0:n.data)==null?void 0:x.url)||(n==null?void 0:n.url);g?(c.url=g,p.success("音乐文件上传成功")):p.error("音乐文件上传失败")},te=async()=>{k.value&&await k.value.validate(async n=>{if(n)try{a.value=!0;const g={title:c.title,artistIds:c.artistIds,albumName:c.albumName||null,duration:c.duration,cover:c.cover||null,url:c.url,lyric:c.lyric||null,status:c.status};i.value==="add"?(await Le(g),p.success("新增成功")):(await Ue(c.id,g),p.success("更新成功")),m.value=!1,M()}catch(g){p.error(g.message||"操作失败")}finally{a.value=!1}})},oe=async n=>{try{await ze(n),p.success("删除成功"),M()}catch(g){p.error(g.message||"删除失败")}},ne=n=>{if(!n)return"00:00";const g=Math.floor(n/60),x=n%60;return`${String(g).padStart(2,"0")}:${String(x).padStart(2,"0")}`},ie=n=>n?new Date(n).toLocaleString("zh-CN"):"-",re=async()=>{L.value=!0,v.value=!0;try{const n=await Y({page:0,size:9999});w.value=(n.data.content||[]).map(g=>({...g,genre:g.genre||"",language:g.language||""}))}catch{p.error("获取歌曲列表失败")}finally{L.value=!1}},se=X(()=>{if(!C.value)return w.value;const n=C.value.toLowerCase();return w.value.filter(g=>{var J,O;const x=((J=g.title)==null?void 0:J.toLowerCase())||"",fe=((O=g.artists)==null?void 0:O.map(pe=>pe.name.toLowerCase()).join(" "))||"";return x.includes(n)||fe.includes(n)})}),de=()=>{f.value="",_.value=!0},ue=()=>{if(!f.value){p.warning("请选择类型");return}w.value.forEach(n=>{n.genre=f.value}),p.success("已应用到所有歌曲"),_.value=!1},me=()=>{s.value="",r.value=!0},ce=()=>{if(!s.value){p.warning("请选择语言");return}w.value.forEach(n=>{n.language=s.value}),p.success("已应用到所有歌曲"),r.value=!1},ge=async()=>{D.value=!0;try{const n=w.value.map(g=>({id:g.id,genre:g.genre||"",language:g.language||""}));await Se(n),p.success("批量更新成功"),v.value=!1,M()}catch(n){p.error("批量更新失败："+(n.message||"未知错误"))}finally{D.value=!1}};return Z(()=>{M(),K()}),{loading:S,submitLoading:a,coverUploading:q,musicUploading:l,songList:A,artists:z,pagination:R,dialogVisible:m,dialogMode:i,formRef:k,formData:c,formRules:I,uploadCoverAction:N,uploadMusicAction:G,uploadHeaders:P,fetchSongs:M,showAddDialog:Q,showEditDialog:T,beforeCoverUpload:U,handleCoverSuccess:ee,beforeMusicUpload:ae,handleMusicSuccess:le,handleSubmit:te,handleDelete:oe,formatDuration:ne,formatDate:ie,batchEditDialogVisible:v,batchSongList:w,batchLoading:L,batchSubmitLoading:D,batchSearchKeyword:C,filteredBatchSongList:se,quickGenreDialogVisible:_,quickLanguageDialogVisible:r,quickGenreValue:f,quickLanguageValue:s,showBatchEditDialog:re,quickSetGenre:de,quickSetLanguage:me,applyQuickGenre:ue,applyQuickLanguage:ce,handleBatchSubmit:ge}}},Ie={class:"song-management"},Ge={class:"toolbar"},Pe={key:1,style:{color:"#999"}},Te={key:1,style:{color:"#999"}},je={style:{"margin-left":"10px",color:"#999"}},Fe=["src"],Ke={key:0,style:{"margin-top":"10px"}},Qe={style:{"margin-left":"10px",color:"#999","font-size":"12px"}},He={class:"batch-edit-container"},We={class:"batch-edit-toolbar"},Je={style:{"margin-top":"10px"}},Oe={style:{display:"flex","flex-direction":"column",gap:"5px"}};function Xe(S,a,q,l,A,z){const m=u("el-button"),i=u("el-table-column"),k=u("el-image"),v=u("el-tag"),L=u("el-popconfirm"),D=u("el-table"),w=u("el-pagination"),C=u("el-input"),_=u("el-form-item"),r=u("el-option"),f=u("el-select"),s=u("el-input-number"),N=u("Plus"),G=u("el-icon"),P=u("el-upload"),R=u("el-radio"),c=u("el-radio-group"),I=u("el-form"),M=u("el-dialog"),K=u("el-alert"),Q=u("Search"),T=$("loading");return y(),E("div",Ie,[V("div",Ge,[e(m,{type:"primary",icon:"Plus",onClick:l.showAddDialog},{default:t(()=>[...a[19]||(a[19]=[d(" 新增歌曲 ",-1)])]),_:1},8,["onClick"]),e(m,{type:"success",icon:"Edit",onClick:l.showBatchEditDialog},{default:t(()=>[...a[20]||(a[20]=[d(" 批量编辑类型和语言 ",-1)])]),_:1},8,["onClick"]),e(m,{icon:"Refresh",onClick:l.fetchSongs},{default:t(()=>[...a[21]||(a[21]=[d("刷新",-1)])]),_:1},8,["onClick"])]),H((y(),B(D,{data:l.songList,border:"",stripe:"",style:{width:"100%"}},{default:t(()=>[e(i,{type:"index",label:"序号",width:"60",align:"center"}),e(i,{label:"封面",width:"80",align:"center"},{default:t(({row:o})=>[e(k,{style:{width:"50px",height:"50px","border-radius":"4px"},src:o.cover,fit:"cover"},{error:t(()=>[...a[22]||(a[22]=[V("div",{class:"image-slot"},"🎵",-1)])]),_:1},8,["src"])]),_:1}),e(i,{prop:"title",label:"歌曲名称",width:"200"}),e(i,{label:"歌手",width:"150"},{default:t(({row:o})=>[d(h(o.artists&&o.artists.length>0?o.artists.map(U=>U.name).join(" / "):"-"),1)]),_:1}),e(i,{prop:"albumName",label:"专辑",width:"150","show-overflow-tooltip":""}),e(i,{prop:"genre",label:"类型",width:"100",align:"center"},{default:t(({row:o})=>[o.genre?(y(),B(v,{key:0,size:"small",type:"info"},{default:t(()=>[d(h(o.genre),1)]),_:2},1024)):(y(),E("span",Pe,"未设置"))]),_:1}),e(i,{prop:"language",label:"语言",width:"100",align:"center"},{default:t(({row:o})=>[o.language?(y(),B(v,{key:0,size:"small",type:"success"},{default:t(()=>[d(h(o.language),1)]),_:2},1024)):(y(),E("span",Te,"未设置"))]),_:1}),e(i,{prop:"duration",label:"时长",width:"80",align:"center"},{default:t(({row:o})=>[d(h(l.formatDuration(o.duration)),1)]),_:1}),e(i,{prop:"playCount",label:"播放次数",width:"100",align:"center"}),e(i,{prop:"status",label:"状态",width:"80",align:"center"},{default:t(({row:o})=>[e(v,{type:o.status===1?"success":"danger",size:"small"},{default:t(()=>[d(h(o.status===1?"上架":"下架"),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"createTime",label:"创建时间",width:"180"},{default:t(({row:o})=>[d(h(l.formatDate(o.createTime)),1)]),_:1}),e(i,{label:"操作",width:"180",fixed:"right",align:"center"},{default:t(({row:o})=>[e(m,{type:"primary",size:"small",onClick:U=>l.showEditDialog(o)},{default:t(()=>[...a[23]||(a[23]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(L,{title:"确定要删除这首歌曲吗？",onConfirm:U=>l.handleDelete(o.id)},{reference:t(()=>[e(m,{type:"danger",size:"small"},{default:t(()=>[...a[24]||(a[24]=[d("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[T,l.loading]]),e(w,{"current-page":l.pagination.page,"onUpdate:currentPage":a[0]||(a[0]=o=>l.pagination.page=o),"page-size":l.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=o=>l.pagination.size=o),total:l.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.fetchSongs,onCurrentChange:l.fetchSongs,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e(M,{modelValue:l.dialogVisible,"onUpdate:modelValue":a[9]||(a[9]=o=>l.dialogVisible=o),title:l.dialogMode==="add"?"新增歌曲":"编辑歌曲",width:"700px","close-on-click-modal":!1},{footer:t(()=>[e(m,{onClick:a[8]||(a[8]=o=>l.dialogVisible=!1)},{default:t(()=>[...a[31]||(a[31]=[d("取消",-1)])]),_:1}),e(m,{type:"primary",loading:l.submitLoading,onClick:l.handleSubmit},{default:t(()=>[...a[32]||(a[32]=[d(" 确定 ",-1)])]),_:1},8,["loading","onClick"])]),default:t(()=>[e(I,{ref:"formRef",model:l.formData,rules:l.formRules,"label-width":"100px"},{default:t(()=>[e(_,{label:"歌曲名称",prop:"title"},{default:t(()=>[e(C,{modelValue:l.formData.title,"onUpdate:modelValue":a[2]||(a[2]=o=>l.formData.title=o),placeholder:"请输入歌曲名称",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(_,{label:"歌手",prop:"artistIds"},{default:t(()=>[e(f,{modelValue:l.formData.artistIds,"onUpdate:modelValue":a[3]||(a[3]=o=>l.formData.artistIds=o),placeholder:"请选择歌手（可多选）",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",style:{width:"100%"}},{default:t(()=>[(y(!0),E(_e,null,ye(l.artists,o=>(y(),B(r,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"专辑名称",prop:"albumName"},{default:t(()=>[e(C,{modelValue:l.formData.albumName,"onUpdate:modelValue":a[4]||(a[4]=o=>l.formData.albumName=o),placeholder:"请输入专辑名称（可选）",maxlength:"100"},null,8,["modelValue"])]),_:1}),e(_,{label:"时长（秒）",prop:"duration"},{default:t(()=>[e(s,{modelValue:l.formData.duration,"onUpdate:modelValue":a[5]||(a[5]=o=>l.formData.duration=o),min:0,max:7200,placeholder:"例如：245",style:{width:"100%"}},null,8,["modelValue"]),V("span",je,h(l.formatDuration(l.formData.duration)),1)]),_:1}),e(_,{label:"封面图片",prop:"cover"},{default:t(()=>[e(P,{class:"cover-uploader",action:l.uploadCoverAction,headers:l.uploadHeaders,"show-file-list":!1,"on-success":l.handleCoverSuccess,"before-upload":l.beforeCoverUpload,"on-progress":()=>l.coverUploading=!0},{default:t(()=>[l.formData.cover?(y(),E("img",{key:0,src:l.formData.cover,class:"cover-image"},null,8,Fe)):(y(),B(G,{key:1,class:Ve(["cover-uploader-icon",{uploading:l.coverUploading}])},{default:t(()=>[e(N)]),_:1},8,["class"]))]),_:1},8,["action","headers","on-success","before-upload","on-progress"]),a[25]||(a[25]=V("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 点击上传封面图片，支持 JPG/PNG，大小不超过 2MB ",-1))]),_:1}),e(_,{label:"音乐文件",prop:"url"},{default:t(()=>[e(P,{action:l.uploadMusicAction,headers:l.uploadHeaders,"on-success":l.handleMusicSuccess,"before-upload":l.beforeMusicUpload,"on-progress":()=>l.musicUploading=!0,"show-file-list":!1},{default:t(()=>[e(m,{type:"primary",loading:l.musicUploading},{default:t(()=>[d(h(l.musicUploading?"上传中...":l.formData.url?"重新上传":"上传音乐"),1)]),_:1},8,["loading"])]),_:1},8,["action","headers","on-success","before-upload","on-progress"]),l.formData.url?(y(),E("div",Ke,[e(v,{type:"success"},{default:t(()=>[...a[26]||(a[26]=[d("✓ 已上传",-1)])]),_:1}),V("span",Qe,h(l.formData.url.substring(l.formData.url.lastIndexOf("/")+1)),1)])):j("",!0),a[27]||(a[27]=V("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 支持 MP3/WAV/FLAC 等格式，大小不超过 30MB ",-1))]),_:1}),e(_,{label:"歌词",prop:"lyric"},{default:t(()=>[e(C,{modelValue:l.formData.lyric,"onUpdate:modelValue":a[6]||(a[6]=o=>l.formData.lyric=o),type:"textarea",rows:6,placeholder:`请输入歌词（LRC 格式），例如：
[00:00.00]歌曲标题
[00:05.00]歌手名
[00:20.50]歌词第一句`},null,8,["modelValue"]),a[28]||(a[28]=V("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 可选，支持 LRC 格式歌词 ",-1))]),_:1}),e(_,{label:"状态",prop:"status"},{default:t(()=>[e(c,{modelValue:l.formData.status,"onUpdate:modelValue":a[7]||(a[7]=o=>l.formData.status=o)},{default:t(()=>[e(R,{label:1},{default:t(()=>[...a[29]||(a[29]=[d("上架",-1)])]),_:1}),e(R,{label:0},{default:t(()=>[...a[30]||(a[30]=[d("下架",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(M,{modelValue:l.batchEditDialogVisible,"onUpdate:modelValue":a[12]||(a[12]=o=>l.batchEditDialogVisible=o),title:"批量编辑歌曲类型和语言",width:"90%",top:"5vh","close-on-click-modal":!1},{footer:t(()=>[e(m,{onClick:a[11]||(a[11]=o=>l.batchEditDialogVisible=!1)},{default:t(()=>[...a[36]||(a[36]=[d("取消",-1)])]),_:1}),e(m,{type:"primary",loading:l.batchSubmitLoading,onClick:l.handleBatchSubmit},{default:t(()=>[...a[37]||(a[37]=[d(" 保存修改 ",-1)])]),_:1},8,["loading","onClick"])]),default:t(()=>[V("div",He,[V("div",We,[e(K,{type:"info",closable:!1,"show-icon":""},{title:t(()=>[V("span",null,"共 "+h(l.batchSongList.length)+" 首歌曲，可直接在表格中编辑类型和语言",1)]),_:1}),V("div",Je,[e(m,{type:"primary",icon:"Select",onClick:l.quickSetGenre},{default:t(()=>[...a[33]||(a[33]=[d("快速设置类型",-1)])]),_:1},8,["onClick"]),e(m,{type:"success",icon:"Select",onClick:l.quickSetLanguage},{default:t(()=>[...a[34]||(a[34]=[d("快速设置语言",-1)])]),_:1},8,["onClick"]),e(C,{modelValue:l.batchSearchKeyword,"onUpdate:modelValue":a[10]||(a[10]=o=>l.batchSearchKeyword=o),placeholder:"搜索歌曲名称或歌手",style:{width:"300px","margin-left":"10px"},clearable:""},{prefix:t(()=>[e(G,null,{default:t(()=>[e(Q)]),_:1})]),_:1},8,["modelValue"])])]),H((y(),B(D,{data:l.filteredBatchSongList,border:"",stripe:"",style:{width:"100%","margin-top":"15px"},"max-height":"500"},{default:t(()=>[e(i,{type:"index",label:"序号",width:"60",align:"center"}),e(i,{label:"封面",width:"70",align:"center"},{default:t(({row:o})=>[e(k,{style:{width:"40px",height:"40px","border-radius":"4px"},src:o.cover,fit:"cover"},{error:t(()=>[...a[35]||(a[35]=[V("div",{class:"image-slot-small"},"🎵",-1)])]),_:1},8,["src"])]),_:1}),e(i,{prop:"title",label:"歌曲名称",width:"200","show-overflow-tooltip":""}),e(i,{label:"歌手",width:"150","show-overflow-tooltip":""},{default:t(({row:o})=>[d(h(o.artists&&o.artists.length>0?o.artists.map(U=>U.name).join(" / "):"-"),1)]),_:1}),e(i,{label:"类型",width:"150",align:"center"},{default:t(({row:o})=>[e(f,{modelValue:o.genre,"onUpdate:modelValue":U=>o.genre=U,size:"small",placeholder:"选择类型",clearable:""},{default:t(()=>[e(r,{label:"流行",value:"流行"}),e(r,{label:"摇滚",value:"摇滚"}),e(r,{label:"民谣",value:"民谣"}),e(r,{label:"电子",value:"电子"}),e(r,{label:"说唱",value:"说唱"}),e(r,{label:"R&B",value:"R&B"}),e(r,{label:"爵士",value:"爵士"}),e(r,{label:"古典",value:"古典"}),e(r,{label:"轻音乐",value:"轻音乐"}),e(r,{label:"纯音乐",value:"纯音乐"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"语言",width:"150",align:"center"},{default:t(({row:o})=>[e(f,{modelValue:o.language,"onUpdate:modelValue":U=>o.language=U,size:"small",placeholder:"选择语言",clearable:""},{default:t(()=>[e(r,{label:"国语",value:"国语"}),e(r,{label:"粤语",value:"粤语"}),e(r,{label:"英语",value:"英语"}),e(r,{label:"日语",value:"日语"}),e(r,{label:"韩语",value:"韩语"}),e(r,{label:"其他",value:"其他"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"当前值",width:"200",align:"center"},{default:t(({row:o})=>[V("div",Oe,[o.genre?(y(),B(v,{key:0,size:"small",type:"info"},{default:t(()=>[d("类型: "+h(o.genre),1)]),_:2},1024)):j("",!0),o.language?(y(),B(v,{key:1,size:"small",type:"success"},{default:t(()=>[d("语言: "+h(o.language),1)]),_:2},1024)):j("",!0)])]),_:1})]),_:1},8,["data"])),[[T,l.batchLoading]])])]),_:1},8,["modelValue"]),e(M,{modelValue:l.quickGenreDialogVisible,"onUpdate:modelValue":a[15]||(a[15]=o=>l.quickGenreDialogVisible=o),title:"快速设置类型",width:"400px"},{footer:t(()=>[e(m,{onClick:a[14]||(a[14]=o=>l.quickGenreDialogVisible=!1)},{default:t(()=>[...a[38]||(a[38]=[d("取消",-1)])]),_:1}),e(m,{type:"primary",onClick:l.applyQuickGenre},{default:t(()=>[...a[39]||(a[39]=[d("应用到所有歌曲",-1)])]),_:1},8,["onClick"])]),default:t(()=>[e(I,{"label-width":"80px"},{default:t(()=>[e(_,{label:"选择类型"},{default:t(()=>[e(f,{modelValue:l.quickGenreValue,"onUpdate:modelValue":a[13]||(a[13]=o=>l.quickGenreValue=o),placeholder:"请选择类型",style:{width:"100%"}},{default:t(()=>[e(r,{label:"流行",value:"流行"}),e(r,{label:"摇滚",value:"摇滚"}),e(r,{label:"民谣",value:"民谣"}),e(r,{label:"电子",value:"电子"}),e(r,{label:"说唱",value:"说唱"}),e(r,{label:"R&B",value:"R&B"}),e(r,{label:"爵士",value:"爵士"}),e(r,{label:"古典",value:"古典"}),e(r,{label:"轻音乐",value:"轻音乐"}),e(r,{label:"纯音乐",value:"纯音乐"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:l.quickLanguageDialogVisible,"onUpdate:modelValue":a[18]||(a[18]=o=>l.quickLanguageDialogVisible=o),title:"快速设置语言",width:"400px"},{footer:t(()=>[e(m,{onClick:a[17]||(a[17]=o=>l.quickLanguageDialogVisible=!1)},{default:t(()=>[...a[40]||(a[40]=[d("取消",-1)])]),_:1}),e(m,{type:"primary",onClick:l.applyQuickLanguage},{default:t(()=>[...a[41]||(a[41]=[d("应用到所有歌曲",-1)])]),_:1},8,["onClick"])]),default:t(()=>[e(I,{"label-width":"80px"},{default:t(()=>[e(_,{label:"选择语言"},{default:t(()=>[e(f,{modelValue:l.quickLanguageValue,"onUpdate:modelValue":a[16]||(a[16]=o=>l.quickLanguageValue=o),placeholder:"请选择语言",style:{width:"100%"}},{default:t(()=>[e(r,{label:"国语",value:"国语"}),e(r,{label:"粤语",value:"粤语"}),e(r,{label:"英语",value:"英语"}),e(r,{label:"日语",value:"日语"}),e(r,{label:"韩语",value:"韩语"}),e(r,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Ye=W(Re,[["render",Xe],["__scopeId","data-v-428e42f1"]]),Ze={name:"Admin",components:{ArtistManagement:Ne,SongManagement:Ye},setup(){const S=he(),a=b("artist");return{userStore:S,activeTab:a}}},$e={class:"admin-page"};function ea(S,a,q,l,A,z){const m=u("el-alert"),i=u("ArtistManagement"),k=u("el-tab-pane"),v=u("SongManagement"),L=u("el-tabs");return y(),E("div",$e,[a[3]||(a[3]=V("div",{class:"page-header"},[V("h2",null,"🔧 管理后台"),V("p",{class:"subtitle"},"系统管理与数据维护")],-1)),e(m,{title:"管理员专属区域",type:"success",closable:!1,"show-icon":"",style:{"margin-bottom":"30px"}},{default:t(()=>{var D;return[a[1]||(a[1]=d(" 欢迎 ",-1)),V("strong",null,h((D=l.userStore.userInfo)==null?void 0:D.nickname),1),a[2]||(a[2]=d("，你当前拥有管理员权限 ",-1))]}),_:1}),e(L,{modelValue:l.activeTab,"onUpdate:modelValue":a[0]||(a[0]=D=>l.activeTab=D),type:"card"},{default:t(()=>[e(k,{label:"🎤 歌手管理",name:"artist"},{default:t(()=>[e(i)]),_:1}),e(k,{label:"🎵 歌曲管理",name:"song"},{default:t(()=>[e(v)]),_:1})]),_:1},8,["modelValue"])])}const na=W(Ze,[["render",ea],["__scopeId","data-v-8722bc53"]]);export{na as default};
