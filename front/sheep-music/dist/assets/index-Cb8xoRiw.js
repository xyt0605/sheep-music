const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Welcome-CJiavb6l.js","assets/vue-vendor-BzZaYQKc.js","assets/element-plus-CCPVPfgN.js","assets/Welcome-BdvxaHuM.css","assets/Login-BUJ5GE-v.js","assets/user-v6clTCfC.js","assets/request-76E38DvM.js","assets/Login-DnDuN2ao.css","assets/Register-DQpIDAIY.js","assets/Register-BHdzQ_SQ.css","assets/Layout-BQwyGgVw.js","assets/player-BodKjA0D.js","assets/song-C8TMBuSO.js","assets/Layout-DI-BpZpd.css","assets/Home-2g7oFpJP.js","assets/favorite-CBOsHs95.js","assets/PlaylistSelector-BQ_G-bWe.js","assets/PlaylistCover-D3NetioR.js","assets/PlaylistCover-C9XtDKla.css","assets/PlaylistSelector-Dn_bdide.css","assets/Home-CZZaMtwj.css","assets/Playlist-Cbi2aqbX.js","assets/recommendation-CPTTUSqv.js","assets/Playlist-DjTaaQr6.css","assets/Rank-eel9tA9W.js","assets/Rank-MYsSzlHy.css","assets/Discover-B9h6Bi19.js","assets/Discover-Db4KkloJ.css","assets/Search-CfDbf-bK.js","assets/artist-B-rHTsNg.js","assets/Search-Cg3v7pnH.css","assets/MyMusic-DWKpikKU.js","assets/MyMusic-CND2NwJw.css","assets/Profile-B7nlRN2l.js","assets/Profile-CSQ7q_E1.css","assets/ArtistDetail-DCn9PTeZ.js","assets/ArtistDetail-Dms9y1wi.css","assets/PlaylistDetail-DdZQMqJ2.js","assets/PlaylistDetail-45wFCLBv.css","assets/Admin-D-3N2Gua.js","assets/Admin-Dp2MujHu.css"])))=>i.map(i=>d[i]);
import{m as e,H as t,a8 as r,q as o,ag as n,ah as i,ai as s,ae as a,aj as m}from"./vue-vendor-BzZaYQKc.js";import{L as c,M as l,O as u}from"./element-plus-CCPVPfgN.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const p=(e,t)=>{const r=e.__vccOpts||e;for(const[o,n]of t)r[o]=n;return r},d={id:"app"};const _=p({name:"App"},[["render",function(n,i,s,a,m,c){const l=r("router-view");return o(),e("div",d,[t(l)])}]]),h={},f=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in h)return;h[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},A=n("user",{state:()=>({token:localStorage.getItem("token")||"",userInfo:JSON.parse(localStorage.getItem("userInfo")||"null")}),getters:{isLogin:e=>!!e.token,isAdmin:e=>{var t;return"admin"===(null==(t=e.userInfo)?void 0:t.role)}},actions:{setToken(e){this.token=e,localStorage.setItem("token",e)},setUserInfo(e){this.userInfo=e,localStorage.setItem("userInfo",JSON.stringify(e))},logout(){this.token="",this.userInfo=null,localStorage.removeItem("token"),localStorage.removeItem("userInfo")}}}),g=[{path:"/welcome",name:"Welcome",component:()=>f(()=>import("./Welcome-CJiavb6l.js"),__vite__mapDeps([0,1,2,3])),meta:{requiresAuth:!1}},{path:"/login",name:"Login",component:()=>f(()=>import("./Login-BUJ5GE-v.js"),__vite__mapDeps([4,1,2,5,6,7])),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:()=>f(()=>import("./Register-DQpIDAIY.js"),__vite__mapDeps([8,1,2,5,6,9])),meta:{requiresAuth:!1}},{path:"/",component:()=>f(()=>import("./Layout-BQwyGgVw.js"),__vite__mapDeps([10,1,2,11,12,6,13])),meta:{requiresAuth:!0},children:[{path:"/home",name:"Home",component:()=>f(()=>import("./Home-2g7oFpJP.js"),__vite__mapDeps([14,1,2,11,12,6,15,16,17,18,19,20])),meta:{requiresAuth:!0}},{path:"/playlist",name:"Playlist",component:()=>f(()=>import("./Playlist-Cbi2aqbX.js"),__vite__mapDeps([21,1,2,17,6,18,22,23])),meta:{requiresAuth:!0}},{path:"/rank",name:"Rank",component:()=>f(()=>import("./Rank-eel9tA9W.js"),__vite__mapDeps([24,1,2,11,12,6,15,16,17,18,19,25])),meta:{requiresAuth:!0}},{path:"/discover",name:"Discover",component:()=>f(()=>import("./Discover-B9h6Bi19.js"),__vite__mapDeps([26,1,2,11,12,6,22,15,16,17,18,19,27])),meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:()=>f(()=>import("./Search-CfDbf-bK.js"),__vite__mapDeps([28,1,2,11,12,6,29,15,16,17,18,19,30])),meta:{requiresAuth:!0}},{path:"/my-music",name:"MyMusic",component:()=>f(()=>import("./MyMusic-DWKpikKU.js"),__vite__mapDeps([31,1,2,11,12,6,15,17,18,16,19,32])),meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:()=>f(()=>import("./Profile-B7nlRN2l.js"),__vite__mapDeps([33,5,6,2,1,34])),meta:{requiresAuth:!0}},{path:"/artist/:id",name:"ArtistDetail",component:()=>f(()=>import("./ArtistDetail-DCn9PTeZ.js"),__vite__mapDeps([35,1,2,11,12,6,29,15,16,17,18,19,36])),meta:{requiresAuth:!0}},{path:"/playlist/:id",name:"PlaylistDetail",component:()=>f(()=>import("./PlaylistDetail-DdZQMqJ2.js"),__vite__mapDeps([37,1,2,11,12,6,17,18,16,19,38])),meta:{requiresAuth:!0}},{path:"/admin",name:"Admin",component:()=>f(()=>import("./Admin-D-3N2Gua.js"),__vite__mapDeps([39,29,6,2,1,12,40])),meta:{requiresAuth:!0,requiresAdmin:!0}}]}],E=i({history:s(),routes:g});E.beforeEach((e,t,r)=>{const o=A();if("/"!==e.path)return e.meta.requiresAdmin&&!o.isAdmin?(c.error("需要管理员权限"),void r("/home")):void(!e.meta.requiresAuth||o.isLogin?"/login"!==e.path&&"/register"!==e.path&&"/welcome"!==e.path||!o.isLogin?r():r("/home"):r("/login"));o.isLogin?r("/home"):r("/welcome")});window.addEventListener("error",e=>{if("ResizeObserver loop completed with undelivered notifications."===e.message){return e.stopImmediatePropagation(),!1}return!0});const I=a(_),v=m();for(const[L,y]of Object.entries(l))I.component(L,y);I.use(v),I.use(u),I.use(E),I.mount("#app");export{p as _,A as u};
