import{_ as q,R as M,W as O,X as j,Y as I,Z as W,c as g,o as c,a as s,d as t,w as o,r,e as i,z as D,k as E,F,D as B,$ as X,g as Y,h as _,v as Z,j as A,E as w,u as G,t as f}from"./index-BjdeA3Zu.js";import{g as J,a as K}from"./playlist-DnHkDRBd.js";import{g as Q}from"./recommendation-DHhWK4oP.js";import{P as $}from"./PlaylistCover-1KpNdjUM.js";const ee={name:"PlaylistSquare",components:{PlaylistCover:$,Loading:W,CaretRight:I,User:j,List:O,Headset:M},setup(){const U=G(),a=Y(),H=_("recommend"),e=_(""),m=_(!1),p=_([]),u=_(1),C=_(20),h=_(0),y=_([]),d=_(1),P=_(20),b=_(0),L="/default-playlist.svg",k=Z(()=>a.isLogin),v=async()=>{m.value=!0;try{let l;if(k.value&&!e.value&&u.value===1)try{if(l=await Q({limit:C.value}),l.code===200&&l.data&&l.data.length>0){p.value=l.data,h.value=l.data.length,m.value=!1;return}}catch(n){console.log("ä¸ªæ€§åŒ–æŽ¨èå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æŽ¨è:",n)}l=await J({page:u.value-1,size:C.value,category:e.value||void 0}),l.code===200?(p.value=l.data.content||[],h.value=l.data.totalElements||0):w.warning(l.message||"åŠ è½½å¤±è´¥")}catch(l){console.error("åŠ è½½æ­Œå•å¤±è´¥:",l),w.error("åŠ è½½æ­Œå•å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}finally{m.value=!1}},z=async()=>{m.value=!0;try{const l=await K({page:d.value-1,size:P.value});l.code===200?(y.value=l.data.content||[],b.value=l.data.totalElements||0):w.warning(l.message||"åŠ è½½å¤±è´¥")}catch(l){console.error("åŠ è½½çƒ­é—¨æ­Œå•å¤±è´¥:",l),w.error("åŠ è½½çƒ­é—¨æ­Œå•å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}finally{m.value=!1}},R=()=>{u.value=1,H.value==="recommend"&&v()},S=l=>{l==="recommend"?p.value.length===0&&v():l==="hot"&&y.value.length===0&&z()},x=l=>{U.push(`/playlist/${l}`)},V=l=>l?l>=1e4?(l/1e4).toFixed(1)+"ä¸‡":l:0;return A(()=>{v()}),{activeTab:H,selectedCategory:e,loading:m,playlists:p,currentPage:u,pageSize:C,total:h,hotPlaylists:y,hotCurrentPage:d,hotPageSize:P,hotTotal:b,defaultCover:L,isLogin:k,loadPlaylists:v,loadHotPlaylists:z,handleCategoryChange:R,handleTabChange:S,goToPlaylistDetail:x,formatCount:V}}},te={class:"playlist-square"},ae={class:"category-filter"},le={key:0,class:"loading-container"},oe={key:1,class:"playlist-grid"},ne=["onClick"],se={class:"playlist-cover-wrapper"},re={class:"playlist-overlay"},ie={class:"playlist-info"},de=["title"],ce={class:"playlist-creator"},ue={class:"playlist-stats"},ge={key:2,class:"empty-state"},_e={key:0,class:"loading-container"},fe={key:1,class:"playlist-grid"},me=["onClick"],ve={class:"playlist-cover-wrapper"},ye={class:"playlist-overlay"},pe={class:"playlist-info"},Ce=["title"],he={class:"playlist-creator"},Pe={class:"playlist-stats"},be={key:2,class:"empty-state"};function ke(U,a,H,e,m,p){const u=r("el-radio-button"),C=r("el-radio-group"),h=r("el-tag"),y=r("Loading"),d=r("el-icon"),P=r("PlaylistCover"),b=r("CaretRight"),L=r("User"),k=r("List"),v=r("Headset"),z=r("FolderOpened"),R=r("el-button"),S=r("el-empty"),x=r("el-pagination"),V=r("el-tab-pane"),l=r("el-tabs");return c(),g("div",te,[a[16]||(a[16]=s("div",{class:"page-header"},[s("h2",null,"ðŸŽµ æ­Œå•å¹¿åœº"),s("p",{class:"subtitle"},"å‘çŽ°æ›´å¤šç²¾å½©æ­Œå•")],-1)),s("div",ae,[t(C,{modelValue:e.selectedCategory,"onUpdate:modelValue":a[0]||(a[0]=n=>e.selectedCategory=n),onChange:e.handleCategoryChange},{default:o(()=>[t(u,{label:""},{default:o(()=>[...a[5]||(a[5]=[i("å…¨éƒ¨",-1)])]),_:1}),t(u,{label:"æµè¡Œ"},{default:o(()=>[...a[6]||(a[6]=[i("æµè¡Œ",-1)])]),_:1}),t(u,{label:"æ‘‡æ»š"},{default:o(()=>[...a[7]||(a[7]=[i("æ‘‡æ»š",-1)])]),_:1}),t(u,{label:"æ°‘è°£"},{default:o(()=>[...a[8]||(a[8]=[i("æ°‘è°£",-1)])]),_:1}),t(u,{label:"ç”µå­"},{default:o(()=>[...a[9]||(a[9]=[i("ç”µå­",-1)])]),_:1}),t(u,{label:"çº¯éŸ³ä¹"},{default:o(()=>[...a[10]||(a[10]=[i("çº¯éŸ³ä¹",-1)])]),_:1}),t(u,{label:"å…¶ä»–"},{default:o(()=>[...a[11]||(a[11]=[i("å…¶ä»–",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])]),t(l,{modelValue:e.activeTab,"onUpdate:modelValue":a[4]||(a[4]=n=>e.activeTab=n),onTabChange:e.handleTabChange},{default:o(()=>[t(V,{name:"recommend"},{label:o(()=>[s("span",null,[a[13]||(a[13]=i(" æŽ¨èæ­Œå• ",-1)),e.isLogin&&!e.selectedCategory&&e.currentPage===1?(c(),D(h,{key:0,size:"small",type:"success",style:{"margin-left":"8px"}},{default:o(()=>[...a[12]||(a[12]=[i("ä¸ªæ€§åŒ–",-1)])]),_:1})):E("",!0)])]),default:o(()=>[e.loading?(c(),g("div",le,[t(d,{class:"is-loading"},{default:o(()=>[t(y)]),_:1})])):e.playlists.length>0?(c(),g("div",oe,[(c(!0),g(F,null,B(e.playlists,n=>{var T;return c(),g("div",{key:n.id,class:"playlist-card",onClick:N=>e.goToPlaylistDetail(n.id)},[s("div",se,[t(P,{cover:n.cover,size:200,"default-cover":e.defaultCover,class:"playlist-cover"},null,8,["cover","default-cover"]),s("div",re,[t(d,{class:"play-icon"},{default:o(()=>[t(b)]),_:1})])]),s("div",ie,[s("h4",{class:"playlist-name",title:n.name},f(n.name),9,de),s("p",ce,[t(d,null,{default:o(()=>[t(L)]),_:1}),i(" "+f(((T=n.creator)==null?void 0:T.nickname)||"æœªçŸ¥"),1)]),s("p",ue,[s("span",null,[t(d,null,{default:o(()=>[t(k)]),_:1}),i(" "+f(n.songCount||0)+" é¦– ",1)]),s("span",null,[t(d,null,{default:o(()=>[t(v)]),_:1}),i(" "+f(e.formatCount(n.playCount)),1)])])])],8,ne)}),128))])):(c(),g("div",ge,[t(S,{description:"æš‚æ— æ­Œå•"},X({image:o(()=>[t(d,{style:{"font-size":"80px",color:"#ddd"}},{default:o(()=>[t(z)]),_:1})]),_:2},[e.isLogin?void 0:{name:"description",fn:o(()=>[a[15]||(a[15]=s("p",null,"æš‚æ— æŽ¨èæ­Œå•",-1)),t(R,{type:"primary",onClick:a[1]||(a[1]=n=>U.$router.push("/login"))},{default:o(()=>[...a[14]||(a[14]=[i("ç™»å½•æŸ¥çœ‹ä¸ªæ€§åŒ–æŽ¨è",-1)])]),_:1})]),key:"0"}]),1024)])),e.total>e.pageSize?(c(),D(x,{key:3,"current-page":e.currentPage,"onUpdate:currentPage":a[2]||(a[2]=n=>e.currentPage=n),"page-size":e.pageSize,total:e.total,layout:"prev, pager, next, total",class:"pagination",onCurrentChange:e.loadPlaylists},null,8,["current-page","page-size","total","onCurrentChange"])):E("",!0)]),_:1}),t(V,{label:"çƒ­é—¨æ­Œå•",name:"hot"},{default:o(()=>[e.loading?(c(),g("div",_e,[t(d,{class:"is-loading"},{default:o(()=>[t(y)]),_:1})])):e.hotPlaylists.length>0?(c(),g("div",fe,[(c(!0),g(F,null,B(e.hotPlaylists,n=>{var T;return c(),g("div",{key:n.id,class:"playlist-card",onClick:N=>e.goToPlaylistDetail(n.id)},[s("div",ve,[t(P,{cover:n.cover,size:200,"default-cover":e.defaultCover,class:"playlist-cover"},null,8,["cover","default-cover"]),s("div",ye,[t(d,{class:"play-icon"},{default:o(()=>[t(b)]),_:1})])]),s("div",pe,[s("h4",{class:"playlist-name",title:n.name},f(n.name),9,Ce),s("p",he,[t(d,null,{default:o(()=>[t(L)]),_:1}),i(" "+f(((T=n.creator)==null?void 0:T.nickname)||"æœªçŸ¥"),1)]),s("p",Pe,[s("span",null,[t(d,null,{default:o(()=>[t(k)]),_:1}),i(" "+f(n.songCount||0)+" é¦– ",1)]),s("span",null,[t(d,null,{default:o(()=>[t(v)]),_:1}),i(" "+f(e.formatCount(n.playCount)),1)])])])],8,me)}),128))])):(c(),g("div",be,[t(S,{description:"æš‚æ— çƒ­é—¨æ­Œå•"},{image:o(()=>[t(d,{style:{"font-size":"80px",color:"#ddd"}},{default:o(()=>[t(z)]),_:1})]),_:1})])),e.hotTotal>e.hotPageSize?(c(),D(x,{key:3,"current-page":e.hotCurrentPage,"onUpdate:currentPage":a[3]||(a[3]=n=>e.hotCurrentPage=n),"page-size":e.hotPageSize,total:e.hotTotal,layout:"prev, pager, next, total",class:"pagination",onCurrentChange:e.loadHotPlaylists},null,8,["current-page","page-size","total","onCurrentChange"])):E("",!0)]),_:1})]),_:1},8,["modelValue","onTabChange"])])}const xe=q(ee,[["render",ke],["__scopeId","data-v-0be52121"]]);export{xe as default};
