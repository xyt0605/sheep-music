import{_ as j,f as H,g as f,i as K,c,o as r,d as e,a,w as i,r as g,z as F,t as d,q as O,e as v,I as Q,J as X,W as Y,E as u,u as tt,n as m,S as et,aa as st,F as B,R as at,ab as ot,G as lt,Z as it,L as k}from"./index-C5bpx5EP.js";import{u as nt}from"./player-BQpaZ7da.js";import{a as rt}from"./artist-Ch0pzSJw.js";import{b as ct}from"./song-BK1efH3L.js";import{b as dt,t as ut}from"./favorite-Dc9dt7b4.js";import{P as _t}from"./PlaylistSelector-J5lt_TYX.js";import"./request-WXopXHOE.js";import"./PlaylistCover-Db5TaDqG.js";const vt={class:"artist-detail"},mt={key:0,class:"loading-container"},pt={key:1,class:"artist-content"},ft={class:"artist-card"},gt={class:"artist-avatar"},ht=["src"],yt={class:"artist-info"},kt={class:"artist-name"},Ct={class:"artist-meta"},St={key:0,class:"artist-description"},bt={class:"artist-actions"},wt={class:"songs-section"},At={class:"section-header"},Ft={key:0,class:"song-list"},xt=["onClick"],Pt={class:"song-index"},zt=["src"],Vt={class:"song-info"},$t={class:"song-name"},Bt={class:"song-meta"},Dt={key:0,class:"album-name"},Lt={class:"song-duration"},Nt={class:"song-play-count"},Mt={class:"song-actions"},Tt={key:1,class:"empty-songs"},Rt={key:2,class:"error-state"},Et="https://via.placeholder.com/200?text=Artist",It="https://via.placeholder.com/60?text=Music",Ut={__name:"ArtistDetail",setup(qt){const x=Y(),C=tt(),S=nt(),b=H(),w=f(!0),_=f(null),n=f([]),h=f({}),A=f(!1),P=f(null),D=async()=>{try{const t=await rt(x.params.id);t.code===200&&(_.value=t.data)}catch(t){console.error("加载歌手信息失败:",t),u.error("加载歌手信息失败")}},L=async()=>{try{const t=await ct(x.params.id);t.code===200&&(n.value=t.data||[])}catch(t){console.error("加载歌曲列表失败:",t),u.error("加载歌曲列表失败")}},N=async()=>{if(!(!b.isLogin||n.value.length===0))try{const t=n.value.map(l=>l.id),s=await dt(t);s.code===200&&(h.value=s.data||{})}catch(t){console.error("加载收藏状态失败:",t)}},M=async t=>{if(!b.isLogin){u.warning("请先登录"),C.push("/login");return}try{const s=await ut(t);if(s.code===200){const l=s.data.isFavorite;h.value[t]=l,u.success(l?"收藏成功":"取消收藏成功")}else u.error(s.message||"操作失败")}catch(s){console.error("收藏操作失败:",s),u.error("操作失败，请稍后重试")}},T=async()=>{w.value=!0,await Promise.all([D(),L()]),await N(),w.value=!1},R=()=>{n.value.length>0&&(S.play(n.value[0],n.value),u.success("开始播放"))},z=t=>{S.play(t,n.value)},E=t=>{S.addToPlaylist(t),u.success(`已添加到播放列表: ${t.title}`)},I=t=>{if(!t)return"--:--";const s=Math.floor(t/60),l=t%60;return`${s}:${l.toString().padStart(2,"0")}`},U=t=>t>=1e4?(t/1e4).toFixed(1)+"万":t||0,V=()=>{C.back()},q=t=>{if(!b.isLogin){u.warning("请先登录"),C.push("/login");return}P.value=t,A.value=!0},G=()=>{};return K(()=>{T()}),(t,s)=>{const l=g("el-icon"),$=g("el-tag"),p=g("el-button"),J=g("el-empty"),W=g("el-result");return r(),c("div",vt,[w.value?(r(),c("div",mt,[e(l,{class:"is-loading"},{default:i(()=>[e(m(et))]),_:1}),s[1]||(s[1]=a("p",null,"加载中...",-1))])):_.value?(r(),c("div",pt,[a("div",ft,[a("div",gt,[a("img",{src:_.value.avatar||Et,alt:"歌手头像"},null,8,ht)]),a("div",yt,[a("h1",kt,d(_.value.name),1),a("div",Ct,[_.value.region?(r(),O($,{key:0,type:"info",size:"large"},{default:i(()=>[e(l,null,{default:i(()=>[e(m(st))]),_:1}),v(" "+d(_.value.region),1)]),_:1})):F("",!0),e($,{type:"success",size:"large"},{default:i(()=>[e(l,null,{default:i(()=>[e(m(B))]),_:1}),v(" "+d(n.value.length)+" 首歌曲 ",1)]),_:1})]),_.value.description?(r(),c("p",St,d(_.value.description),1)):F("",!0),a("div",bt,[e(p,{type:"primary",size:"large",disabled:n.value.length===0,onClick:R},{default:i(()=>[e(l,null,{default:i(()=>[e(m(at))]),_:1}),s[2]||(s[2]=v(" 播放全部 ",-1))]),_:1},8,["disabled"]),e(p,{size:"large",onClick:V},{default:i(()=>[e(l,null,{default:i(()=>[e(m(ot))]),_:1}),s[3]||(s[3]=v(" 返回 ",-1))]),_:1})])])]),a("div",wt,[a("div",At,[a("h2",null,[e(l,null,{default:i(()=>[e(m(lt))]),_:1}),s[4]||(s[4]=v(" 歌曲列表 ",-1))])]),n.value.length>0?(r(),c("div",Ft,[(r(!0),c(Q,null,X(n.value,(o,Z)=>(r(),c("div",{key:o.id,class:"song-item",onClick:y=>z(o)},[a("div",Pt,d(Z+1),1),a("img",{src:o.cover||It,class:"song-cover"},null,8,zt),a("div",Vt,[a("div",$t,d(o.title),1),a("div",Bt,[o.albumName?(r(),c("span",Dt,[e(l,null,{default:i(()=>[e(m(it))]),_:1}),v(" "+d(o.albumName),1)])):F("",!0),a("span",Lt,d(I(o.duration)),1)])]),a("div",Nt,[e(l,null,{default:i(()=>[e(m(B))]),_:1}),v(" "+d(U(o.playCount)),1)]),a("div",Mt,[e(p,{icon:"CaretRight",circle:"",size:"small",onClick:k(y=>z(o),["stop"]),title:"播放"},null,8,["onClick"]),e(p,{icon:"Plus",circle:"",size:"small",onClick:k(y=>E(o),["stop"]),title:"添加到播放列表"},null,8,["onClick"]),e(p,{icon:"FolderAdd",circle:"",size:"small",onClick:k(y=>q(o.id),["stop"]),title:"添加到歌单"},null,8,["onClick"]),e(p,{icon:h.value[o.id]?"StarFilled":"Star",circle:"",size:"small",type:h.value[o.id]?"danger":"",onClick:k(y=>M(o.id),["stop"]),title:"收藏"},null,8,["icon","type","onClick"])])],8,xt))),128))])):(r(),c("div",Tt,[e(J,{description:"该歌手暂无歌曲"})]))])])):(r(),c("div",Rt,[e(W,{icon:"error",title:"加载失败","sub-title":"无法获取歌手信息"},{extra:i(()=>[e(p,{type:"primary",onClick:V},{default:i(()=>[...s[5]||(s[5]=[v("返回",-1)])]),_:1})]),_:1})])),e(_t,{modelValue:A.value,"onUpdate:modelValue":s[0]||(s[0]=o=>A.value=o),"song-id":P.value,onSuccess:G},null,8,["modelValue","song-id"])])}}},Qt=j(Ut,[["__scopeId","data-v-5476b56c"]]);export{Qt as default};
