import{_ as A,H as x,M as E,G as P,I as F,N,c as g,o as _,a as n,k as B,d as s,w as r,r as l,F as I,l as K,g as p,i as L,E as U,u as R,e as T,t as V}from"./index-CxmcMKp9.js";import{g as D,s as M}from"./artist-CflWtlkR.js";const j={name:"Artists",components:{Search:N,Loading:F,User:P,UserFilled:E,CaretRight:x},setup(){const k=R(),a=p([]),m=p(!1),e=p(""),h=p("songCount"),d=p(1),v=p(24),i=p(0),f="https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png";let c=null;const u=async()=>{try{m.value=!0;const t={page:d.value-1,size:v.value,sortBy:h.value,order:h.value==="name"?"asc":"desc"},o=await D(t);if(o.code===200&&o.data)a.value=o.data.content||[],i.value=o.data.totalElements||0;else throw new Error(o.message||"èŽ·å–æ­Œæ‰‹åˆ—è¡¨å¤±è´¥")}catch(t){console.error("åŠ è½½æ­Œæ‰‹åˆ—è¡¨å¤±è´¥:",t),U.error(t.message||"åŠ è½½æ­Œæ‰‹åˆ—è¡¨å¤±è´¥"),a.value=[],i.value=0}finally{m.value=!1}},y=async()=>{if(!e.value.trim()){d.value=1,u();return}try{m.value=!0;const t=await M(e.value.trim());if(t.code===200&&t.data)a.value=t.data,i.value=t.data.length;else throw new Error(t.message||"æœç´¢å¤±è´¥")}catch(t){console.error("æœç´¢æ­Œæ‰‹å¤±è´¥:",t),U.error(t.message||"æœç´¢æ­Œæ‰‹å¤±è´¥"),a.value=[],i.value=0}finally{m.value=!1}},C=()=>{c&&clearTimeout(c),c=setTimeout(()=>{y()},500)},z=()=>{e.value||(d.value=1,u())},S=t=>{d.value=t,e.value||u(),window.scrollTo({top:0,behavior:"smooth"})},w=t=>{v.value=t,d.value=1,e.value||u()},b=t=>{k.push(`/artist/${t}`)};return L(()=>{u()}),{artists:a,loading:m,searchKeyword:e,sortType:h,currentPage:d,pageSize:v,total:i,defaultAvatar:f,handleSearch:C,handleSortChange:z,handlePageChange:S,handleSizeChange:w,goToArtistDetail:b}}},G={class:"artists-page"},H={class:"search-bar"},q={class:"sort-bar"},J={key:0,class:"loading-container"},O={key:1,class:"artists-grid"},Q=["onClick"],W={class:"artist-avatar-wrapper"},X={class:"artist-overlay"},Y={class:"artist-info"},Z=["title"],$=["title"],ee={key:2,class:"empty-state"},ae={key:3,class:"pagination"};function te(k,a,m,e,h,d){const v=l("Search"),i=l("el-icon"),f=l("el-input"),c=l("el-radio-button"),u=l("el-radio-group"),y=l("Loading"),C=l("UserFilled"),z=l("el-avatar"),S=l("CaretRight"),w=l("User"),b=l("el-empty"),t=l("el-pagination");return _(),g("div",G,[a[9]||(a[9]=n("div",{class:"page-header"},[n("h2",null,"ðŸŽ¤ å…¨éƒ¨æ­Œæ‰‹"),n("p",{class:"subtitle"},"å‘çŽ°ä½ å–œæ¬¢çš„éŸ³ä¹äºº")],-1)),n("div",H,[s(f,{modelValue:e.searchKeyword,"onUpdate:modelValue":a[0]||(a[0]=o=>e.searchKeyword=o),placeholder:"æœç´¢æ­Œæ‰‹åç§°...",clearable:"",onInput:e.handleSearch,size:"large"},{prefix:r(()=>[s(i,null,{default:r(()=>[s(v)]),_:1})]),_:1},8,["modelValue","onInput"])]),n("div",q,[a[7]||(a[7]=n("span",{class:"sort-label"},"æŽ’åºï¼š",-1)),s(u,{modelValue:e.sortType,"onUpdate:modelValue":a[1]||(a[1]=o=>e.sortType=o),onChange:e.handleSortChange,size:"small"},{default:r(()=>[s(c,{value:"songCount"},{default:r(()=>[...a[4]||(a[4]=[T("æ­Œæ›²æ•°é‡",-1)])]),_:1}),s(c,{value:"createTime"},{default:r(()=>[...a[5]||(a[5]=[T("æœ€æ–°",-1)])]),_:1}),s(c,{value:"name"},{default:r(()=>[...a[6]||(a[6]=[T("åç§°",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])]),e.loading?(_(),g("div",J,[s(i,{class:"is-loading",size:40},{default:r(()=>[s(y)]),_:1}),a[8]||(a[8]=n("p",null,"åŠ è½½ä¸­...",-1))])):e.artists.length>0?(_(),g("div",O,[(_(!0),g(I,null,K(e.artists,o=>(_(),g("div",{key:o.id,class:"artist-card",onClick:oe=>e.goToArtistDetail(o.id)},[n("div",W,[s(z,{src:o.avatar||e.defaultAvatar,size:150,class:"artist-avatar"},{default:r(()=>[s(i,{size:60},{default:r(()=>[s(C)]),_:1})]),_:1},8,["src"]),n("div",X,[s(i,{class:"play-icon"},{default:r(()=>[s(S)]),_:1})])]),n("div",Y,[n("h3",{class:"artist-name",title:o.name},V(o.name),9,Z),n("p",{class:"artist-description",title:o.description},V(o.description||"æš‚æ— ç®€ä»‹"),9,$)])],8,Q))),128))])):(_(),g("div",ee,[s(b,{description:e.searchKeyword?"æœªæ‰¾åˆ°ç›¸å…³æ­Œæ‰‹":"æš‚æ— æ­Œæ‰‹"},{image:r(()=>[s(i,{style:{"font-size":"80px",color:"#ddd"}},{default:r(()=>[s(w)]),_:1})]),_:1},8,["description"])])),e.total>e.pageSize?(_(),g("div",ae,[s(t,{"current-page":e.currentPage,"onUpdate:currentPage":a[2]||(a[2]=o=>e.currentPage=o),"page-size":e.pageSize,"onUpdate:pageSize":a[3]||(a[3]=o=>e.pageSize=o),total:e.total,"page-sizes":[12,24,36,48],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:e.handlePageChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])):B("",!0)])}const re=A(j,[["render",te],["__scopeId","data-v-0a0793b4"]]);export{re as default};
