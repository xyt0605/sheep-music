import{_ as de,l as Ve,c as M,o as m,d as l,w as c,r as k,m as H,s as We,p as Be,q as Ue,h as f,v as re,x as le,j as xe,y as Ae,z as O,k as N,A as Pe,a as s,B as Xe,e as q,C as qe,t as T,F as ce,D as ue,T as $,G as ie,H as Q,n as pe,I as He,J as Oe,u as ke,K as Fe,L as Ye,g as $e,M as Je,N as he,O as je,E as _e}from"./index-nrl4pEAu.js";import{u as Ge}from"./social-B1twfuWv.js";import{w as ee}from"./client-DaBP6wZm.js";const Ke={class:"theme-toggle"},Qe={__name:"ThemeToggle",setup(A){const{isDark:n,toggleTheme:g}=Ve();return(r,w)=>{const S=k("el-button"),y=k("el-tooltip");return m(),M("div",Ke,[l(y,{content:H(n)?"ÂàáÊç¢Âà∞‰∫ÆËâ≤Ê®°Âºè":"ÂàáÊç¢Âà∞ÊöóÈªëÊ®°Âºè",placement:"bottom"},{default:c(()=>[l(S,{icon:H(n)?H(We):H(Be),circle:"",onClick:H(g),class:"theme-toggle-btn"},null,8,["icon","onClick"])]),_:1},8,["content"])])}}},Ze=de(Qe,[["__scopeId","data-v-aeed8507"]]),et={class:"lyric-controls"},tt={class:"drag-handle",title:"ÂèåÂáªÈîÅÂÆö/Ëß£ÈîÅ"},ot={class:"control-buttons"},nt={class:"opacity-control"},at={class:"control-value"},st={class:"color-control"},lt={class:"color-presets"},it=["onClick","title"],rt={class:"font-control"},ct={class:"control-value"},ut={key:0,class:"lyric-next"},dt={key:0,class:"song-info"},mt={class:"song-title"},vt={class:"song-artist"},ye=300,be=1200,gt={__name:"DesktopLyric",setup(A,{expose:n}){const g=Ue(),r=ke(),w=f(!1),S=f(!1),y=f(!1),D=f(!1),z=f(!1),J=f(!1),F=f(!0),Y=f(!0),u=f({x:0,y:0}),i=f(.95),v=f("rgba(0, 0, 0, 0.75)"),p=f(28),h=f(600),o=["rgba(0, 0, 0, 0.75)","rgba(102, 126, 234, 0.85)","rgba(118, 75, 162, 0.85)","rgba(245, 87, 108, 0.85)","rgba(52, 152, 219, 0.85)","rgba(46, 204, 113, 0.85)","rgba(155, 89, 182, 0.85)","rgba(52, 73, 94, 0.85)"],W=t=>({"rgba(0, 0, 0, 0.75)":"ÁªèÂÖ∏Èªë","rgba(102, 126, 234, 0.85)":"Á¥´ÁΩóÂÖ∞","rgba(118, 75, 162, 0.85)":"Ê∑±Á¥´","rgba(245, 87, 108, 0.85)":"Á≤âÁ∫¢","rgba(52, 152, 219, 0.85)":"Â§©Ëìù","rgba(46, 204, 113, 0.85)":"Áø†Áªø","rgba(155, 89, 182, 0.85)":"Á¥´Ê∞¥Êô∂","rgba(52, 73, 94, 0.85)":"Ê∑±ÁÅ∞"})[t]||"Ëá™ÂÆö‰πâ",d=f({x:0,y:0});let L="",P=0,B=0,U=0;const j=()=>{try{document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",oe),D.value=!1,z.value=!1,L="",console.log("‰∫ã‰ª∂ÁõëÂê¨Âô®Â∑≤Ê∏ÖÁêÜ")}catch(t){console.error("Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®Êó∂Âá∫Èîô:",t)}},R=re(()=>g.currentSong),b=f("‚ô™ ÊöÇÊó†Ê≠åËØç ‚ô™"),V=f(""),x=f([]),we=()=>{w.value=!0,ae()},Ce=()=>{w.value=!1},Me=()=>{w.value=!w.value,w.value&&ae()},Le=()=>{w.value=!1},Se=()=>{y.value=!y.value,X()},Ie=t=>{S.value&&(y.value||z.value||t.target.closest(".control-buttons")||t.target.closest(".resize-handle")||(t.stopPropagation(),D.value=!0,d.value={x:t.clientX-u.value.x,y:t.clientY-u.value.y},document.addEventListener("mousemove",te,{passive:!1}),document.addEventListener("mouseup",oe,{passive:!1})))},te=t=>{if(!S.value){j();return}if(t.preventDefault(),D.value){const e=t.clientX-d.value.x,a=t.clientY-d.value.y,C=window.innerWidth-h.value,E=window.innerHeight-150;u.value={x:Math.max(0,Math.min(e,C)),y:Math.max(0,Math.min(a,E))}}else z.value&&Te(t)},oe=()=>{try{D.value&&(D.value=!1,X()),z.value&&(z.value=!1,L="",X())}catch(t){console.error("handleMouseUp error:",t)}finally{j()}},me=(t,e)=>{S.value&&(y.value||(t.stopPropagation(),z.value=!0,L=e,P=t.clientX,B=h.value,U=u.value.x,document.addEventListener("mousemove",te,{passive:!1}),document.addEventListener("mouseup",oe,{passive:!1})))},Te=t=>{if(!z.value)return;const e=t.clientX-P;let a=B,C=U;if(L==="right"?a=B+e:L==="left"&&(a=B-e,C=U+e),a=Math.max(ye,Math.min(a,be)),L==="right"){const E=window.innerWidth-u.value.x-20;a=Math.min(a,E)}else if(L==="left"){const I=U+B-ye;C=Math.max(0,Math.min(C,I)),a=U+B-C}h.value=a,L==="left"&&(u.value.x=C)},ne=()=>{h.value=600,u.value={x:(window.innerWidth-h.value)/2,y:50},X()},ze=t=>{v.value=t,X()},X=()=>{const t={position:u.value,opacity:i.value,backgroundColor:v.value,fontSize:p.value,width:h.value,isLocked:y.value,showNextLine:F.value,showSongInfo:Y.value};localStorage.setItem("desktopLyricSettings",JSON.stringify(t))},ae=()=>{const t=localStorage.getItem("desktopLyricSettings");if(t)try{const e=JSON.parse(t);h.value=e.width||600,u.value=e.position||{x:(window.innerWidth-h.value)/2,y:50},i.value=e.opacity||.95,v.value=e.backgroundColor||"rgba(0, 0, 0, 0.75)",p.value=e.fontSize||28,y.value=e.isLocked||!1,F.value=e.showNextLine??!0,Y.value=e.showSongInfo??!0}catch{ne()}else ne()},Ne=re(()=>g.isPlaying);le(()=>g.currentTime,t=>{x.value.length>0&&Ne.value&&se(t)},{immediate:!0}),le(()=>{var t;return(t=R.value)==null?void 0:t.id},t=>{t?ve(t):(b.value="‚ô™ ÊöÇÊó†Êí≠Êîæ ‚ô™",V.value="",x.value=[])},{immediate:!0});async function ve(t){console.log("Âä†ËΩΩÊ≠åËØçÔºåÊ≠åÊõ≤ID:",t);try{const e=await Oe(t);if(e.code===200){const a=e.data;if(!a||a.trim()===""){console.log("ËØ•Ê≠åÊõ≤ÊöÇÊó†Ê≠åËØç"),b.value="‚ô™ Á∫ØÈü≥‰πêÔºåËØ∑Ê¨£Ëµè ‚ô™",V.value="",x.value=[];return}x.value=De(a),console.log("Ê≠åËØçËß£ÊûêÂÆåÊàêÔºåÂÖ±",x.value.length,"Ë°å"),x.value.length===0?(b.value="‚ô™ Ê≠åËØçËß£ÊûêÂ§±Ë¥• ‚ô™",V.value=""):se(g.currentTime||0)}else console.error("Ëé∑ÂèñÊ≠åËØçÂ§±Ë¥•:",e.message),ge(t)}catch(e){console.error("Âä†ËΩΩÊ≠åËØçÂá∫Èîô:",e),ge(t)}}const ge=t=>{console.log("‰ΩøÁî®Ê®°ÊãüÊ≠åËØçÊï∞ÊçÆ");const e=Ee(t);x.value=e,x.value.length>0?se(g.currentTime||0):(b.value="‚ô™ ÊöÇÊó†Ê≠åËØç ‚ô™",V.value="")};function De(t){const e=t.split(`
`),a=[],C=/\[(\d{2}):(\d{2})\.(\d{2,3})\](.*)/;return e.forEach(E=>{const I=E.match(C);if(I){const _=parseInt(I[1]),G=parseInt(I[2]),Z=parseInt(I[3].padEnd(3,"0")),K=I[4].trim(),Re=_*60+G+Z/1e3;K&&K.length>0&&a.push({time:Re,text:K})}}),a.sort((E,I)=>E.time-I.time),console.log("Ëß£ÊûêÂà∞",a.length,"Ë°åÊ≠åËØç"),a.length>0&&(console.log("Á¨¨‰∏ÄÂè•:",a[0]),console.log("ÊúÄÂêé‰∏ÄÂè•:",a[a.length-1])),a}const Ee=t=>{const e=[[{time:0,text:"‚ô™ ÂâçÂ•è ‚ô™"},{time:5,text:"Âú®ËøôÁæéÂ•ΩÁöÑÊó∂ÂÖâÈáå"},{time:10,text:"ËÆ©Èü≥‰πêÂ∏¶Ëµ∞ÊâÄÊúâÁÉ¶ÊÅº"},{time:15,text:"Ë∑üÁùÄËäÇÂ•èËΩªËΩªÊëáÊëÜ"},{time:20,text:"ÊÑüÂèóÊØè‰∏Ä‰∏™Èü≥Á¨¶ÁöÑË∑≥Âä®"},{time:25,text:"‚ô™ Èó¥Â•è ‚ô™"},{time:30,text:"ÁîüÊ¥ªÂ∞±ÂÉè‰∏ÄÈ¶ñÊ≠å"},{time:35,text:"ÊúâÈ´òÊΩÆ‰πüÊúâ‰ΩéË∞∑"},{time:40,text:"‰ΩÜÈü≥‰πêÊ∞∏ËøúÈô™‰º¥ÁùÄ‰Ω†"},{time:45,text:"‚ô™ Â∞æÂ•è ‚ô™"}],[{time:0,text:"‚ô™ Èü≥‰πêÂìçËµ∑ ‚ô™"},{time:8,text:"Â§úÁ©∫‰∏≠ÊúÄ‰∫ÆÁöÑÊòü"},{time:13,text:"ËÉΩÂê¶Âê¨Ê∏Ö"},{time:18,text:"ÈÇ£‰ª∞ÊúõÁöÑ‰∫∫"},{time:23,text:"ÂøÉÂ∫ïÁöÑÂ≠§Áã¨ÂíåÂèπÊÅØ"},{time:28,text:"‚ô™ ÁªßÁª≠ ‚ô™"}],[{time:0,text:"‚ô™ ÂºÄÂßã ‚ô™"},{time:6,text:"Êàë‰ª¨ÈÉΩÊòØËøΩÊ¢¶‰∫∫"},{time:12,text:"Âú®ËøôÊº´ÈïøÁöÑÊóÖÈÄî‰∏≠"},{time:18,text:"Èü≥‰πêÊòØÊúÄÂ•ΩÁöÑ‰ºô‰º¥"},{time:24,text:"ËÆ©Êàë‰ª¨ÁªßÁª≠ÂâçË°å"},{time:30,text:"‚ô™ ÂâçËøõ ‚ô™"}]],a=(t||0)%e.length;return e[a]};function se(t){if(!x.value||x.value.length===0){b.value="‚ô™ ÊöÇÊó†Ê≠åËØç ‚ô™",V.value="";return}let e=-1;for(let a=x.value.length-1;a>=0;a--)if(t>=x.value[a].time){e=a;break}if(e>=0){const a=x.value[e].text;b.value!==a&&(b.value=a,console.log(`[${Math.floor(t)}s] ÂΩìÂâçÊ≠åËØç:`,a)),e+1<x.value.length?V.value=x.value[e+1].text:V.value=""}else b.value="‚ô™ ÂâçÂ•è ‚ô™",x.value.length>0&&(V.value=x.value[0].text)}const fe=()=>{const t=window.innerWidth-h.value,e=window.innerHeight-150;u.value.x>t&&(u.value.x=Math.max(0,t)),u.value.y>e&&(u.value.y=Math.max(0,e)),h.value>window.innerWidth-40&&(h.value=Math.min(window.innerWidth-40,be)),u.value.x<0&&(u.value.x=0),u.value.y<0&&(u.value.y=0)};return xe(()=>{var t,e;console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂ÂºÄÂßãÊåÇËΩΩ"),setTimeout(()=>{S.value=!0,console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂Â∑≤ÊåÇËΩΩÔºåisMountedËÆæÁΩÆ‰∏∫true")},0),window.addEventListener("resize",fe),ae(),(t=R.value)!=null&&t.id?(console.log("ÁªÑ‰ª∂ÊåÇËΩΩÔºåÂΩìÂâçÊ≠åÊõ≤:",R.value.title),ve(R.value.id)):console.log("ÁªÑ‰ª∂ÊåÇËΩΩÔºåÊöÇÊó†Êí≠ÊîæÊ≠åÊõ≤"),console.log("Êí≠ÊîæÂô®Áä∂ÊÄÅ:",{playing:g.isPlaying,currentTime:g.currentTime,song:(e=R.value)==null?void 0:e.title})}),Ae(()=>{console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂ÂºÄÂßãÂç∏ËΩΩ"),S.value=!1,w.value=!1,window.removeEventListener("resize",fe),j(),console.log("Ê°åÈù¢Ê≠åËØçÁªÑ‰ª∂Âç∏ËΩΩÂÆåÊàê")}),le(()=>r.currentRoute.value.path,(t,e)=>{console.log("Ë∑ØÁî±ÂàáÊç¢:",e,"->",t),console.log("Ê∏ÖÁêÜÊ°åÈù¢Ê≠åËØç‰∫ã‰ª∂ÁõëÂê¨Âô®"),j(),J.value=!1},{immediate:!1}),n({show:we,hide:Ce,toggle:Me,visible:w}),(t,e)=>{const a=k("el-icon"),C=k("el-button"),E=k("el-slider"),I=k("el-popover");return m(),O(He,{to:"body",disabled:!S.value},[l($,{name:"slide-down"},{default:c(()=>[w.value&&S.value?(m(),M("div",{key:0,class:pe(["desktop-lyric",{locked:y.value,dragging:D.value,resizing:z.value}]),style:ie({top:u.value.y+"px",left:u.value.x+"px",width:h.value+"px",opacity:i.value,backgroundColor:v.value}),onMousedown:Q(Ie,["stop"]),onDblclick:Q(Se,["stop"])},[Pe(s("div",et,[s("div",tt,[l(a,null,{default:c(()=>[l(H(qe))]),_:1}),q(" "+T(y.value?"üîí":"üîì"),1)]),s("div",ot,[l(I,{placement:"bottom",width:220,trigger:"click","popper-class":"lyric-control-popover"},{reference:c(()=>[l(C,{icon:"Sunny",circle:"",size:"small",title:"ÈÄèÊòéÂ∫¶"})]),default:c(()=>[s("div",nt,[e[4]||(e[4]=s("div",{class:"control-title"},"ÈÄèÊòéÂ∫¶",-1)),s("div",at,T(Math.round(i.value*100))+"%",1),l(E,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=_=>i.value=_),min:.3,max:1,step:.1,onChange:X},null,8,["modelValue"])])]),_:1}),l(I,{placement:"bottom",width:240,trigger:"click","popper-class":"lyric-color-popover"},{reference:c(()=>[l(C,{icon:"Brush",circle:"",size:"small",title:"ËÉåÊôØËâ≤"})]),default:c(()=>[s("div",st,[e[5]||(e[5]=s("div",{class:"color-control-title"},"ËÉåÊôØÈ¢úËâ≤",-1)),s("div",lt,[(m(),M(ce,null,ue(o,_=>s("div",{key:_,class:pe(["color-item",{active:v.value===_}]),style:ie({backgroundColor:_}),onClick:G=>ze(_),title:W(_)},[v.value===_?(m(),O(a,{key:0,class:"check-icon"},{default:c(()=>[l(H(Fe))]),_:1})):N("",!0)],14,it)),64))])])]),_:1}),l(I,{placement:"bottom",width:220,trigger:"click","popper-class":"lyric-control-popover"},{reference:c(()=>[l(C,{icon:"FontSize",circle:"",size:"small",title:"Â≠ó‰ΩìÂ§ßÂ∞è"})]),default:c(()=>[s("div",rt,[e[6]||(e[6]=s("div",{class:"control-title"},"Â≠ó‰ΩìÂ§ßÂ∞è",-1)),s("div",ct,T(p.value)+"px",1),l(E,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=_=>p.value=_),min:16,max:48,step:2,onChange:X},null,8,["modelValue"])])]),_:1}),l(C,{icon:"RefreshRight",circle:"",size:"small",title:"ÈáçÁΩÆ‰ΩçÁΩÆ",onClick:ne}),l(C,{icon:"Close",circle:"",size:"small",title:"ÂÖ≥Èó≠Ê°åÈù¢Ê≠åËØç",onClick:Le})])],512),[[Xe,!y.value||J.value]]),s("div",{class:"lyric-content",style:ie({fontSize:p.value+"px"})},[l($,{name:"lyric-fade",mode:"out-in"},{default:c(()=>[(m(),M("div",{key:b.value,class:"lyric-line"},T(b.value||"ÊöÇÊó†Ê≠åËØç"),1))]),_:1}),l($,{name:"fade"},{default:c(()=>[V.value&&F.value?(m(),M("div",ut,T(V.value),1)):N("",!0)]),_:1})],4),l($,{name:"fade"},{default:c(()=>{var _,G,Z;return[Y.value?(m(),M("div",dt,[s("span",mt,T(((_=R.value)==null?void 0:_.title)||"Êú™Êí≠Êîæ"),1),s("span",vt,T(((Z=(G=R.value)==null?void 0:G.artists)==null?void 0:Z.map(K=>K.name).join(" / "))||""),1)])):N("",!0)]}),_:1}),y.value?N("",!0):(m(),M("div",{key:0,class:"resize-handle resize-left",onMousedown:e[2]||(e[2]=Q(_=>me(_,"left"),["stop"])),title:"ÊãñÊãΩË∞ÉÊï¥ÂÆΩÂ∫¶"},null,32)),y.value?N("",!0):(m(),M("div",{key:1,class:"resize-handle resize-right",onMousedown:e[3]||(e[3]=Q(_=>me(_,"right"),["stop"])),title:"ÊãñÊãΩË∞ÉÊï¥ÂÆΩÂ∫¶"},null,32))],38)):N("",!0)]),_:1})],8,["disabled"])}}},ft=de(gt,[["__scopeId","data-v-69fdf1e8"]]),pt={name:"Layout",components:{ThemeToggle:Ze,DesktopLyric:ft},setup(){const A=ke(),n=$e(),g=Ge(),r=f(!1),w=f(null),S=f(!1),y=()=>{try{const i=new(window.AudioContext||window.webkitAudioContext),v=i.createOscillator(),p=i.createGain();v.connect(p),p.connect(i.destination),v.frequency.value=800,v.type="sine",p.gain.setValueAtTime(.3,i.currentTime),p.gain.exponentialRampToValueAtTime(.01,i.currentTime+.2),v.start(i.currentTime),v.stop(i.currentTime+.2)}catch(i){console.warn("Êí≠ÊîæÊèêÁ§∫Èü≥Â§±Ë¥•:",i)}},D=(i,v,p)=>{"Notification"in window&&(Notification.permission==="granted"?new Notification(i,{body:v,icon:p||"/logo.png",badge:"/logo.png",tag:"chat-message",requireInteraction:!1,silent:!0}):Notification.permission!=="denied"&&Notification.requestPermission().then(h=>{h==="granted"&&new Notification(i,{body:v,icon:p||"/logo.png",badge:"/logo.png",tag:"chat-message",requireInteraction:!1,silent:!0})}))},z=re(()=>{const i=[{name:"È¶ñÈ°µ",path:"/home",icon:"üè†"},{name:"ÂèëÁé∞",path:"/discover",icon:"‚ú®"},{name:"ÊêúÁ¥¢",path:"/search",icon:"üîç"},{name:"Ê≠åÊâã",path:"/artists",icon:"üé§"},{name:"Ê≠åÂçïÂπøÂú∫",path:"/playlist",icon:"üìÉ"},{name:"ÊéíË°åÊ¶ú",path:"/rank",icon:"üìä"},{name:"ÊàëÁöÑÈü≥‰πê",path:"/my-music"},{name:"Â•ΩÂèã",path:"/friends",icon:"üë•",badge:g.friendRequestCount},{name:"ËÅäÂ§©",path:"/chat",icon:"üí¨",badge:g.unreadMessageCount},{name:"Âä®ÊÄÅ",path:"/moments",icon:"üì±"},{name:"ÂàÜ‰∫´ÂπøÂú∫",path:"/share-square",icon:"üîó"}];return n.isAdmin&&i.push({name:"ÁÆ°ÁêÜÂêéÂè∞",path:"/admin",icon:"üîß"}),i});return xe(()=>{var i;if(n.isLogin){g.initSocialData().catch(o=>{console.error("ÂàùÂßãÂåñÁ§æ‰∫§Êï∞ÊçÆÂ§±Ë¥•:",o)});const v=localStorage.getItem("token"),p=(i=n.userInfo)==null?void 0:i.id;if(p&&v){ee.connect({userId:p,token:v});const o=ee.onChatMessage(async d=>{var L;try{if(!d)return;const P=A.currentRoute.value,B=P.name==="Chat",U=P.params.friendId;if(!(B&&(d.senderId==U||d.receiverId==U))&&(await g.updateUnreadMessageCount(),d.receiverId===((L=n.userInfo)==null?void 0:L.id))){const R=d.senderName||"Â•ΩÂèã";let b=d.content||"";d.type==="song"?b="[ÂàÜ‰∫´‰∫Ü‰∏ÄÈ¶ñÊ≠åÊõ≤]":d.type==="playlist"?b="[ÂàÜ‰∫´‰∫Ü‰∏Ä‰∏™Ê≠åÂçï]":b.length>20&&(b=b.substring(0,20)+"..."),Je("Êñ∞Ê∂àÊÅØ",`${R}Ôºö${b}`),D("Êñ∞Ê∂àÊÅØ",`${R}Ôºö${b}`,d.senderAvatar),y()}}catch(P){console.error("Â§ÑÁêÜËÅäÂ§©Ê∂àÊÅØÂ§±Ë¥•:",P)}}),W=ee.onNotification(async d=>{d&&d.type==="notification_unread_count"?g.unreadNotificationCount=d.unreadCount||0:await g.updateUnreadNotificationCount().catch(()=>{})});he(()=>{try{o&&o()}catch{}try{W&&W()}catch{}})}const h=setInterval(()=>{n.isLogin?(g.updateUnreadMessageCount().catch(o=>{console.error("Êõ¥Êñ∞Êú™ËØªÊ∂àÊÅØÊï∞Â§±Ë¥•:",o)}),g.updateUnreadNotificationCount().catch(o=>{console.error("Êõ¥Êñ∞Êú™ËØªÈÄöÁü•Êï∞Â§±Ë¥•:",o)})):clearInterval(h)},3e4);he(()=>{try{clearInterval(h)}catch{}})}}),{userStore:n,socialStore:g,menuItems:z,mobileMenuOpen:r,desktopLyricRef:w,desktopLyricVisible:S,toggleMobileMenu:()=>{r.value=!r.value},toggleDesktopLyric:()=>{w.value&&(w.value.toggle(),S.value=w.value.visible)},goHome:()=>{A.push("/home")},handleCommand:async i=>{switch(i){case"profile":A.push("/profile");break;case"settings":_e.info("ËÆæÁΩÆÂäüËÉΩÂæÖÂºÄÂèë");break;case"logout":je.confirm("Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>{try{ee.disconnect()}catch{}n.logout(),_e.success("Â∑≤ÈÄÄÂá∫ÁôªÂΩï"),A.push("/login")}).catch(()=>{});break}}}}},ht={class:"app-layout"},_t={class:"app-header"},yt={class:"header-content"},bt={class:"nav-menu desktop-menu"},xt={key:0,class:"menu-icon"},kt={class:"user-section"},wt={class:"user-info"},Ct={class:"username"},Mt={key:0,class:"admin-badge"},Lt={class:"mobile-menu-header"},St={key:0,class:"menu-icon"},It={class:"app-main"};function Tt(A,n,g,r,w,S){const y=k("el-badge"),D=k("router-link"),z=k("el-button"),J=k("el-tooltip"),F=k("ThemeToggle"),Y=k("el-avatar"),u=k("el-dropdown-item"),i=k("el-dropdown-menu"),v=k("el-dropdown"),p=k("router-view"),h=k("DesktopLyric");return m(),M("div",ht,[n[11]||(n[11]=s("div",{class:"galaxy-bg"},null,-1)),s("header",_t,[s("div",yt,[s("div",{class:"logo",onClick:n[0]||(n[0]=(...o)=>r.goHome&&r.goHome(...o))},[...n[5]||(n[5]=[s("span",{class:"logo-icon"},"üéµ",-1),s("span",{class:"logo-text"},"Sheep Music",-1)])]),s("nav",bt,[(m(!0),M(ce,null,ue(r.menuItems,o=>(m(),O(D,{key:o.path,to:o.path,class:"nav-item","active-class":"active"},{default:c(()=>[o.icon?(m(),M("span",xt,T(o.icon),1)):N("",!0),q(" "+T(o.name)+" ",1),o.badge&&o.badge>0?(m(),O(y,{key:1,value:o.badge,max:99,"is-dot":!1,class:"menu-badge"},null,8,["value"])):N("",!0)]),_:2},1032,["to"]))),128))]),s("div",{class:"mobile-menu-btn",onClick:n[1]||(n[1]=(...o)=>r.toggleMobileMenu&&r.toggleMobileMenu(...o))},[...n[6]||(n[6]=[s("span",{class:"menu-icon"},"‚ò∞",-1)])]),s("div",kt,[l(J,{content:"Ê°åÈù¢Ê≠åËØç",placement:"bottom"},{default:c(()=>[l(z,{icon:r.desktopLyricVisible?"ChatLineSquare":"ChatDotSquare",circle:"",onClick:r.toggleDesktopLyric,type:r.desktopLyricVisible?"primary":"",class:"lyric-toggle-btn"},null,8,["icon","onClick","type"])]),_:1}),l(F),l(v,{onCommand:r.handleCommand},{dropdown:c(()=>[l(i,null,{default:c(()=>[l(u,{command:"profile"},{default:c(()=>[...n[7]||(n[7]=[q("‰∏™‰∫∫‰∏≠ÂøÉ",-1)])]),_:1}),l(u,{command:"settings"},{default:c(()=>[...n[8]||(n[8]=[q("ËÆæÁΩÆ",-1)])]),_:1}),l(u,{divided:"",command:"logout"},{default:c(()=>[...n[9]||(n[9]=[q("ÈÄÄÂá∫ÁôªÂΩï",-1)])]),_:1})]),_:1})]),default:c(()=>{var o,W;return[s("div",wt,[l(Y,{src:(o=r.userStore.userInfo)==null?void 0:o.avatar,size:"default"},{default:c(()=>{var d,L;return[q(T((L=(d=r.userStore.userInfo)==null?void 0:d.nickname)==null?void 0:L.charAt(0)),1)]}),_:1},8,["src"]),s("span",Ct,T((W=r.userStore.userInfo)==null?void 0:W.nickname),1),r.userStore.isAdmin?(m(),M("span",Mt,"ÁÆ°ÁêÜÂëò")):N("",!0)])]}),_:1},8,["onCommand"])])])]),l($,{name:"slide"},{default:c(()=>[r.mobileMenuOpen?(m(),M("div",{key:0,class:"mobile-menu-overlay",onClick:n[4]||(n[4]=(...o)=>r.toggleMobileMenu&&r.toggleMobileMenu(...o))},[s("nav",{class:"mobile-menu",onClick:n[3]||(n[3]=Q(()=>{},["stop"]))},[s("div",Lt,[n[10]||(n[10]=s("span",{class:"menu-title"},"ËèúÂçï",-1)),s("span",{class:"close-btn",onClick:n[2]||(n[2]=(...o)=>r.toggleMobileMenu&&r.toggleMobileMenu(...o))},"‚úï")]),(m(!0),M(ce,null,ue(r.menuItems,o=>(m(),O(D,{key:o.path,to:o.path,class:"mobile-nav-item","active-class":"active",onClick:r.toggleMobileMenu},{default:c(()=>[o.icon?(m(),M("span",St,T(o.icon),1)):N("",!0),q(" "+T(o.name)+" ",1),o.badge&&o.badge>0?(m(),O(y,{key:1,value:o.badge,max:99,class:"mobile-menu-badge"},null,8,["value"])):N("",!0)]),_:2},1032,["to","onClick"]))),128))])])):N("",!0)]),_:1}),s("main",It,[l(p,null,{default:c(({Component:o,route:W})=>[l($,{name:"fade-slide",mode:"out-in"},{default:c(()=>[(m(),O(Ye(o),{key:W.path}))]),_:2},1024)]),_:1})]),l(h,{ref:"desktopLyricRef"},null,512)])}const Et=de(pt,[["render",Tt],["__scopeId","data-v-a94e9e8b"]]);export{Et as default};
