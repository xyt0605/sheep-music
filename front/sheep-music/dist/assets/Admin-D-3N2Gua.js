import{_ as e,u as a}from"./index-Cb8xoRiw.js";import{b as l,d as t,c as o,u as i,e as r}from"./artist-B-rHTsNg.js";import{L as n,P as u,aa as s,ah as d,o as c}from"./element-plus-CCPVPfgN.js";import{r as p,h as m,d as g,m as f,q as h,t as v,C as b,H as y,B as w,a8 as _,ac as V,A as k,F as D,D as C,c as x,G as S,Y as z}from"./vue-vendor-BzZaYQKc.js";import{c as U,d as L,e as q,f as A,u as M}from"./song-C8TMBuSO.js";import"./request-76E38DvM.js";const R={class:"artist-management"},B={class:"toolbar"},E={key:0,style:{"margin-top":"10px"}};const I={class:"song-management"},j={class:"toolbar"},G={key:1,style:{color:"#999"}},N={key:1,style:{color:"#999"}},P={style:{"margin-left":"10px",color:"#999"}},T=["src"],H={key:0,style:{"margin-top":"10px"}},Q={style:{"margin-left":"10px",color:"#999","font-size":"12px"}},K={class:"batch-edit-container"},W={class:"batch-edit-toolbar"},$={style:{"margin-top":"10px"}},F={style:{display:"flex","flex-direction":"column",gap:"5px"}};const J={class:"admin-page"};const O=e({name:"Admin",components:{ArtistManagement:e({name:"ArtistManagement",setup(){const e=p(!1),a=p(!1),r=p([]),u=p(!1),s=p("add"),d=p(null),c=m({page:1,size:10,total:0}),f=m({id:null,name:"",avatar:"",region:"",description:""}),h=async()=>{e.value=!0;try{const e=await l({page:c.page-1,size:c.size});r.value=e.data.content||[],c.total=e.data.totalElements||0}catch(a){n.error("获取歌手列表失败")}finally{e.value=!1}},v=()=>{f.id=null,f.name="",f.avatar="",f.region="",f.description="",d.value&&d.value.clearValidate()};return g(()=>{h()}),{loading:e,submitLoading:a,artistList:r,pagination:c,dialogVisible:u,dialogMode:s,formRef:d,formData:f,formRules:{name:[{required:!0,message:"请输入歌手名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]},fetchArtists:h,showAddDialog:()=>{s.value="add",v(),u.value=!0},showEditDialog:e=>{s.value="edit",f.id=e.id,f.name=e.name,f.avatar=e.avatar||"",f.region=e.region||"",f.description=e.description||"",u.value=!0},handleSubmit:async()=>{d.value&&await d.value.validate(async e=>{if(e)try{a.value=!0;const e={name:f.name,avatar:f.avatar||null,region:f.region||null,description:f.description||null};"add"===s.value?(await o(e),n.success("新增成功")):(await i(f.id,e),n.success("更新成功")),u.value=!1,h()}catch(l){n.error(l.message||"操作失败")}finally{a.value=!1}})},handleDelete:async e=>{try{await t(e),n.success("删除成功"),h()}catch(a){n.error(a.message||"删除失败")}},formatDate:e=>{if(!e)return"-";return new Date(e).toLocaleString("zh-CN")}}}},[["render",function(e,a,l,t,o,i){const r=_("el-button"),n=_("el-table-column"),s=_("el-avatar"),d=_("el-popconfirm"),c=_("el-table"),p=_("el-pagination"),m=_("el-input"),g=_("el-form-item"),x=_("el-form"),S=_("el-dialog"),z=V("loading");return h(),f("div",R,[v("div",B,[y(r,{type:"primary",icon:"Plus",onClick:t.showAddDialog},{default:w(()=>[...a[8]||(a[8]=[D(" 新增歌手 ",-1)])]),_:1},8,["onClick"]),y(r,{icon:"Refresh",onClick:t.fetchArtists},{default:w(()=>[...a[9]||(a[9]=[D("刷新",-1)])]),_:1},8,["onClick"])]),b((h(),k(c,{data:t.artistList,border:"",stripe:"",style:{width:"100%"}},{default:w(()=>[y(n,{type:"index",label:"序号",width:"60",align:"center"}),y(n,{label:"头像",width:"80",align:"center"},{default:w(({row:e})=>[y(s,{size:50,src:e.avatar},{default:w(()=>{var a;return[D(u(null==(a=e.name)?void 0:a.charAt(0)),1)]}),_:2},1032,["src"])]),_:1}),y(n,{prop:"name",label:"歌手名称",width:"150"}),y(n,{prop:"region",label:"国家/地区",width:"120"}),y(n,{prop:"description",label:"简介","show-overflow-tooltip":""}),y(n,{prop:"createTime",label:"创建时间",width:"180"},{default:w(({row:e})=>[D(u(t.formatDate(e.createTime)),1)]),_:1}),y(n,{label:"操作",width:"180",fixed:"right",align:"center"},{default:w(({row:e})=>[y(r,{type:"primary",size:"small",onClick:a=>t.showEditDialog(e)},{default:w(()=>[...a[10]||(a[10]=[D(" 编辑 ",-1)])]),_:1},8,["onClick"]),y(d,{title:"确定要删除这个歌手吗？",onConfirm:a=>t.handleDelete(e.id)},{reference:w(()=>[y(r,{type:"danger",size:"small"},{default:w(()=>[...a[11]||(a[11]=[D("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[z,t.loading]]),y(p,{"current-page":t.pagination.page,"onUpdate:currentPage":a[0]||(a[0]=e=>t.pagination.page=e),"page-size":t.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=e=>t.pagination.size=e),total:t.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.fetchArtists,onCurrentChange:t.fetchArtists,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),y(S,{modelValue:t.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>t.dialogVisible=e),title:"add"===t.dialogMode?"新增歌手":"编辑歌手",width:"600px","close-on-click-modal":!1},{footer:w(()=>[y(r,{onClick:a[6]||(a[6]=e=>t.dialogVisible=!1)},{default:w(()=>[...a[12]||(a[12]=[D("取消",-1)])]),_:1}),y(r,{type:"primary",loading:t.submitLoading,onClick:t.handleSubmit},{default:w(()=>[...a[13]||(a[13]=[D(" 确定 ",-1)])]),_:1},8,["loading","onClick"])]),default:w(()=>[y(x,{ref:"formRef",model:t.formData,rules:t.formRules,"label-width":"100px"},{default:w(()=>[y(g,{label:"歌手名称",prop:"name"},{default:w(()=>[y(m,{modelValue:t.formData.name,"onUpdate:modelValue":a[2]||(a[2]=e=>t.formData.name=e),placeholder:"请输入歌手名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),y(g,{label:"头像URL",prop:"avatar"},{default:w(()=>[y(m,{modelValue:t.formData.avatar,"onUpdate:modelValue":a[3]||(a[3]=e=>t.formData.avatar=e),placeholder:"请输入头像URL",type:"url"},null,8,["modelValue"]),t.formData.avatar?(h(),f("div",E,[y(s,{size:80,src:t.formData.avatar},{default:w(()=>{var e;return[D(u(null==(e=t.formData.name)?void 0:e.charAt(0)),1)]}),_:1},8,["src"])])):C("",!0)]),_:1}),y(g,{label:"国家/地区",prop:"region"},{default:w(()=>[y(m,{modelValue:t.formData.region,"onUpdate:modelValue":a[4]||(a[4]=e=>t.formData.region=e),placeholder:"例如：中国台湾",maxlength:"50"},null,8,["modelValue"])]),_:1}),y(g,{label:"简介",prop:"description"},{default:w(()=>[y(m,{modelValue:t.formData.description,"onUpdate:modelValue":a[5]||(a[5]=e=>t.formData.description=e),type:"textarea",rows:4,placeholder:"请输入歌手简介",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}],["__scopeId","data-v-72ce226f"]]),SongManagement:e({name:"SongManagement",components:{Plus:d,Search:s},setup(){const e=p(!1),a=p(!1),l=p(!1),t=p(!1),o=p([]),i=p([]),u=p(!1),s=p("add"),d=p(null),c=p(!1),f=p(!1),h=p(!1),v=p([]),b=p(""),y=p(!1),w=p(!1),_=p(""),V=p(""),k=x(()=>({Authorization:`Bearer ${localStorage.getItem("token")}`})),D=m({page:1,size:10,total:0}),C=m({id:null,title:"",artistIds:[],albumName:"",duration:null,cover:"",url:"",lyric:"",status:1}),S=async()=>{e.value=!0;try{const e=await U({page:D.page-1,size:D.size});o.value=e.data.content||[],D.total=e.data.totalElements||0}catch(a){n.error("获取歌曲列表失败")}finally{e.value=!1}},z=()=>{C.id=null,C.title="",C.artistIds=[],C.albumName="",C.duration=null,C.cover="",C.url="",C.lyric="",C.status=1,l.value=!1,t.value=!1,d.value&&d.value.clearValidate()},R=x(()=>{if(!b.value)return v.value;const e=b.value.toLowerCase();return v.value.filter(a=>{var l,t;const o=(null==(l=a.title)?void 0:l.toLowerCase())||"",i=(null==(t=a.artists)?void 0:t.map(e=>e.name.toLowerCase()).join(" "))||"";return o.includes(e)||i.includes(e)})});return g(()=>{S(),(async()=>{try{const e=await r();i.value=e.data||[]}catch(e){n.error("获取歌手列表失败")}})()}),{loading:e,submitLoading:a,coverUploading:l,musicUploading:t,songList:o,artists:i,pagination:D,dialogVisible:u,dialogMode:s,formRef:d,formData:C,formRules:{title:[{required:!0,message:"请输入歌曲名称",trigger:"blur"}],artistIds:[{required:!0,type:"array",min:1,message:"请至少选择一位歌手",trigger:"change"}],url:[{required:!0,message:"请上传音乐文件",trigger:"change"}]},uploadCoverAction:"/api/upload/cover",uploadMusicAction:"/api/upload/music",uploadHeaders:k,fetchSongs:S,showAddDialog:()=>{s.value="add",z(),u.value=!0},showEditDialog:e=>{s.value="edit",C.id=e.id,C.title=e.title,C.artistIds=e.artists&&e.artists.length>0?e.artists.map(e=>e.id):[],C.albumName=e.albumName||"",C.duration=e.duration,C.cover=e.cover||"",C.url=e.url,C.lyric=e.lyric||"",C.status=e.status,u.value=!0},beforeCoverUpload:e=>{const a=e.type.startsWith("image/"),l=e.size/1024/1024<2;return a?!!l||(n.error("图片大小不能超过 2MB!"),!1):(n.error("只能上传图片文件!"),!1)},handleCoverSuccess:e=>{var a;l.value=!1;const t=(null==(a=null==e?void 0:e.data)?void 0:a.url)||(null==e?void 0:e.url);t?(C.cover=t,n.success("封面上传成功")):n.error("封面上传失败")},beforeMusicUpload:e=>{const a=e.type.startsWith("audio/"),l=e.size/1024/1024<30;return a?!!l||(n.error("音频文件大小不能超过 30MB!"),!1):(n.error("只能上传音频文件!"),!1)},handleMusicSuccess:e=>{var a;t.value=!1;const l=(null==(a=null==e?void 0:e.data)?void 0:a.url)||(null==e?void 0:e.url);l?(C.url=l,n.success("音乐文件上传成功")):n.error("音乐文件上传失败")},handleSubmit:async()=>{d.value&&await d.value.validate(async e=>{if(e)try{a.value=!0;const e={title:C.title,artistIds:C.artistIds,albumName:C.albumName||null,duration:C.duration,cover:C.cover||null,url:C.url,lyric:C.lyric||null,status:C.status};"add"===s.value?(await A(e),n.success("新增成功")):(await M(C.id,e),n.success("更新成功")),u.value=!1,S()}catch(l){n.error(l.message||"操作失败")}finally{a.value=!1}})},handleDelete:async e=>{try{await q(e),n.success("删除成功"),S()}catch(a){n.error(a.message||"删除失败")}},formatDuration:e=>{if(!e)return"00:00";const a=Math.floor(e/60),l=e%60;return`${String(a).padStart(2,"0")}:${String(l).padStart(2,"0")}`},formatDate:e=>{if(!e)return"-";return new Date(e).toLocaleString("zh-CN")},batchEditDialogVisible:c,batchSongList:v,batchLoading:f,batchSubmitLoading:h,batchSearchKeyword:b,filteredBatchSongList:R,quickGenreDialogVisible:y,quickLanguageDialogVisible:w,quickGenreValue:_,quickLanguageValue:V,showBatchEditDialog:async()=>{f.value=!0,c.value=!0;try{const e=await U({page:0,size:9999});v.value=(e.data.content||[]).map(e=>({...e,genre:e.genre||"",language:e.language||""}))}catch(e){n.error("获取歌曲列表失败")}finally{f.value=!1}},quickSetGenre:()=>{_.value="",y.value=!0},quickSetLanguage:()=>{V.value="",w.value=!0},applyQuickGenre:()=>{_.value?(v.value.forEach(e=>{e.genre=_.value}),n.success("已应用到所有歌曲"),y.value=!1):n.warning("请选择类型")},applyQuickLanguage:()=>{V.value?(v.value.forEach(e=>{e.language=V.value}),n.success("已应用到所有歌曲"),w.value=!1):n.warning("请选择语言")},handleBatchSubmit:async()=>{h.value=!0;try{const e=v.value.map(e=>({id:e.id,genre:e.genre||"",language:e.language||""}));await L(e),n.success("批量更新成功"),c.value=!1,S()}catch(e){n.error("批量更新失败："+(e.message||"未知错误"))}finally{h.value=!1}}}}},[["render",function(e,a,l,t,o,i){const r=_("el-button"),n=_("el-table-column"),s=_("el-image"),d=_("el-tag"),p=_("el-popconfirm"),m=_("el-table"),g=_("el-pagination"),x=_("el-input"),U=_("el-form-item"),L=_("el-option"),q=_("el-select"),A=_("el-input-number"),M=_("Plus"),R=_("el-icon"),B=_("el-upload"),E=_("el-radio"),J=_("el-radio-group"),O=_("el-form"),Y=_("el-dialog"),X=_("el-alert"),Z=_("Search"),ee=V("loading");return h(),f("div",I,[v("div",j,[y(r,{type:"primary",icon:"Plus",onClick:t.showAddDialog},{default:w(()=>[...a[19]||(a[19]=[D(" 新增歌曲 ",-1)])]),_:1},8,["onClick"]),y(r,{type:"success",icon:"Edit",onClick:t.showBatchEditDialog},{default:w(()=>[...a[20]||(a[20]=[D(" 批量编辑类型和语言 ",-1)])]),_:1},8,["onClick"]),y(r,{icon:"Refresh",onClick:t.fetchSongs},{default:w(()=>[...a[21]||(a[21]=[D("刷新",-1)])]),_:1},8,["onClick"])]),b((h(),k(m,{data:t.songList,border:"",stripe:"",style:{width:"100%"}},{default:w(()=>[y(n,{type:"index",label:"序号",width:"60",align:"center"}),y(n,{label:"封面",width:"80",align:"center"},{default:w(({row:e})=>[y(s,{style:{width:"50px",height:"50px","border-radius":"4px"},src:e.cover,fit:"cover"},{error:w(()=>[...a[22]||(a[22]=[v("div",{class:"image-slot"},"🎵",-1)])]),_:1},8,["src"])]),_:1}),y(n,{prop:"title",label:"歌曲名称",width:"200"}),y(n,{label:"歌手",width:"150"},{default:w(({row:e})=>[D(u(e.artists&&e.artists.length>0?e.artists.map(e=>e.name).join(" / "):"-"),1)]),_:1}),y(n,{prop:"albumName",label:"专辑",width:"150","show-overflow-tooltip":""}),y(n,{prop:"genre",label:"类型",width:"100",align:"center"},{default:w(({row:e})=>[e.genre?(h(),k(d,{key:0,size:"small",type:"info"},{default:w(()=>[D(u(e.genre),1)]),_:2},1024)):(h(),f("span",G,"未设置"))]),_:1}),y(n,{prop:"language",label:"语言",width:"100",align:"center"},{default:w(({row:e})=>[e.language?(h(),k(d,{key:0,size:"small",type:"success"},{default:w(()=>[D(u(e.language),1)]),_:2},1024)):(h(),f("span",N,"未设置"))]),_:1}),y(n,{prop:"duration",label:"时长",width:"80",align:"center"},{default:w(({row:e})=>[D(u(t.formatDuration(e.duration)),1)]),_:1}),y(n,{prop:"playCount",label:"播放次数",width:"100",align:"center"}),y(n,{prop:"status",label:"状态",width:"80",align:"center"},{default:w(({row:e})=>[y(d,{type:1===e.status?"success":"danger",size:"small"},{default:w(()=>[D(u(1===e.status?"上架":"下架"),1)]),_:2},1032,["type"])]),_:1}),y(n,{prop:"createTime",label:"创建时间",width:"180"},{default:w(({row:e})=>[D(u(t.formatDate(e.createTime)),1)]),_:1}),y(n,{label:"操作",width:"180",fixed:"right",align:"center"},{default:w(({row:e})=>[y(r,{type:"primary",size:"small",onClick:a=>t.showEditDialog(e)},{default:w(()=>[...a[23]||(a[23]=[D(" 编辑 ",-1)])]),_:1},8,["onClick"]),y(p,{title:"确定要删除这首歌曲吗？",onConfirm:a=>t.handleDelete(e.id)},{reference:w(()=>[y(r,{type:"danger",size:"small"},{default:w(()=>[...a[24]||(a[24]=[D("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[ee,t.loading]]),y(g,{"current-page":t.pagination.page,"onUpdate:currentPage":a[0]||(a[0]=e=>t.pagination.page=e),"page-size":t.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=e=>t.pagination.size=e),total:t.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.fetchSongs,onCurrentChange:t.fetchSongs,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),y(Y,{modelValue:t.dialogVisible,"onUpdate:modelValue":a[9]||(a[9]=e=>t.dialogVisible=e),title:"add"===t.dialogMode?"新增歌曲":"编辑歌曲",width:"700px","close-on-click-modal":!1},{footer:w(()=>[y(r,{onClick:a[8]||(a[8]=e=>t.dialogVisible=!1)},{default:w(()=>[...a[31]||(a[31]=[D("取消",-1)])]),_:1}),y(r,{type:"primary",loading:t.submitLoading,onClick:t.handleSubmit},{default:w(()=>[...a[32]||(a[32]=[D(" 确定 ",-1)])]),_:1},8,["loading","onClick"])]),default:w(()=>[y(O,{ref:"formRef",model:t.formData,rules:t.formRules,"label-width":"100px"},{default:w(()=>[y(U,{label:"歌曲名称",prop:"title"},{default:w(()=>[y(x,{modelValue:t.formData.title,"onUpdate:modelValue":a[2]||(a[2]=e=>t.formData.title=e),placeholder:"请输入歌曲名称",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),y(U,{label:"歌手",prop:"artistIds"},{default:w(()=>[y(q,{modelValue:t.formData.artistIds,"onUpdate:modelValue":a[3]||(a[3]=e=>t.formData.artistIds=e),placeholder:"请选择歌手（可多选）",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",style:{width:"100%"}},{default:w(()=>[(h(!0),f(S,null,z(t.artists,e=>(h(),k(L,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),y(U,{label:"专辑名称",prop:"albumName"},{default:w(()=>[y(x,{modelValue:t.formData.albumName,"onUpdate:modelValue":a[4]||(a[4]=e=>t.formData.albumName=e),placeholder:"请输入专辑名称（可选）",maxlength:"100"},null,8,["modelValue"])]),_:1}),y(U,{label:"时长（秒）",prop:"duration"},{default:w(()=>[y(A,{modelValue:t.formData.duration,"onUpdate:modelValue":a[5]||(a[5]=e=>t.formData.duration=e),min:0,max:7200,placeholder:"例如：245",style:{width:"100%"}},null,8,["modelValue"]),v("span",P,u(t.formatDuration(t.formData.duration)),1)]),_:1}),y(U,{label:"封面图片",prop:"cover"},{default:w(()=>[y(B,{class:"cover-uploader",action:t.uploadCoverAction,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleCoverSuccess,"before-upload":t.beforeCoverUpload,"on-progress":()=>t.coverUploading=!0},{default:w(()=>[t.formData.cover?(h(),f("img",{key:0,src:t.formData.cover,class:"cover-image"},null,8,T)):(h(),k(R,{key:1,class:c(["cover-uploader-icon",{uploading:t.coverUploading}])},{default:w(()=>[y(M)]),_:1},8,["class"]))]),_:1},8,["action","headers","on-success","before-upload","on-progress"]),a[25]||(a[25]=v("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 点击上传封面图片，支持 JPG/PNG，大小不超过 2MB ",-1))]),_:1}),y(U,{label:"音乐文件",prop:"url"},{default:w(()=>[y(B,{action:t.uploadMusicAction,headers:t.uploadHeaders,"on-success":t.handleMusicSuccess,"before-upload":t.beforeMusicUpload,"on-progress":()=>t.musicUploading=!0,"show-file-list":!1},{default:w(()=>[y(r,{type:"primary",loading:t.musicUploading},{default:w(()=>[D(u(t.musicUploading?"上传中...":t.formData.url?"重新上传":"上传音乐"),1)]),_:1},8,["loading"])]),_:1},8,["action","headers","on-success","before-upload","on-progress"]),t.formData.url?(h(),f("div",H,[y(d,{type:"success"},{default:w(()=>[...a[26]||(a[26]=[D("✓ 已上传",-1)])]),_:1}),v("span",Q,u(t.formData.url.substring(t.formData.url.lastIndexOf("/")+1)),1)])):C("",!0),a[27]||(a[27]=v("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 支持 MP3/WAV/FLAC 等格式，大小不超过 30MB ",-1))]),_:1}),y(U,{label:"歌词",prop:"lyric"},{default:w(()=>[y(x,{modelValue:t.formData.lyric,"onUpdate:modelValue":a[6]||(a[6]=e=>t.formData.lyric=e),type:"textarea",rows:6,placeholder:"请输入歌词（LRC 格式），例如：\n[00:00.00]歌曲标题\n[00:05.00]歌手名\n[00:20.50]歌词第一句"},null,8,["modelValue"]),a[28]||(a[28]=v("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 可选，支持 LRC 格式歌词 ",-1))]),_:1}),y(U,{label:"状态",prop:"status"},{default:w(()=>[y(J,{modelValue:t.formData.status,"onUpdate:modelValue":a[7]||(a[7]=e=>t.formData.status=e)},{default:w(()=>[y(E,{label:1},{default:w(()=>[...a[29]||(a[29]=[D("上架",-1)])]),_:1}),y(E,{label:0},{default:w(()=>[...a[30]||(a[30]=[D("下架",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),y(Y,{modelValue:t.batchEditDialogVisible,"onUpdate:modelValue":a[12]||(a[12]=e=>t.batchEditDialogVisible=e),title:"批量编辑歌曲类型和语言",width:"90%",top:"5vh","close-on-click-modal":!1},{footer:w(()=>[y(r,{onClick:a[11]||(a[11]=e=>t.batchEditDialogVisible=!1)},{default:w(()=>[...a[36]||(a[36]=[D("取消",-1)])]),_:1}),y(r,{type:"primary",loading:t.batchSubmitLoading,onClick:t.handleBatchSubmit},{default:w(()=>[...a[37]||(a[37]=[D(" 保存修改 ",-1)])]),_:1},8,["loading","onClick"])]),default:w(()=>[v("div",K,[v("div",W,[y(X,{type:"info",closable:!1,"show-icon":""},{title:w(()=>[v("span",null,"共 "+u(t.batchSongList.length)+" 首歌曲，可直接在表格中编辑类型和语言",1)]),_:1}),v("div",$,[y(r,{type:"primary",icon:"Select",onClick:t.quickSetGenre},{default:w(()=>[...a[33]||(a[33]=[D("快速设置类型",-1)])]),_:1},8,["onClick"]),y(r,{type:"success",icon:"Select",onClick:t.quickSetLanguage},{default:w(()=>[...a[34]||(a[34]=[D("快速设置语言",-1)])]),_:1},8,["onClick"]),y(x,{modelValue:t.batchSearchKeyword,"onUpdate:modelValue":a[10]||(a[10]=e=>t.batchSearchKeyword=e),placeholder:"搜索歌曲名称或歌手",style:{width:"300px","margin-left":"10px"},clearable:""},{prefix:w(()=>[y(R,null,{default:w(()=>[y(Z)]),_:1})]),_:1},8,["modelValue"])])]),b((h(),k(m,{data:t.filteredBatchSongList,border:"",stripe:"",style:{width:"100%","margin-top":"15px"},"max-height":"500"},{default:w(()=>[y(n,{type:"index",label:"序号",width:"60",align:"center"}),y(n,{label:"封面",width:"70",align:"center"},{default:w(({row:e})=>[y(s,{style:{width:"40px",height:"40px","border-radius":"4px"},src:e.cover,fit:"cover"},{error:w(()=>[...a[35]||(a[35]=[v("div",{class:"image-slot-small"},"🎵",-1)])]),_:1},8,["src"])]),_:1}),y(n,{prop:"title",label:"歌曲名称",width:"200","show-overflow-tooltip":""}),y(n,{label:"歌手",width:"150","show-overflow-tooltip":""},{default:w(({row:e})=>[D(u(e.artists&&e.artists.length>0?e.artists.map(e=>e.name).join(" / "):"-"),1)]),_:1}),y(n,{label:"类型",width:"150",align:"center"},{default:w(({row:e})=>[y(q,{modelValue:e.genre,"onUpdate:modelValue":a=>e.genre=a,size:"small",placeholder:"选择类型",clearable:""},{default:w(()=>[y(L,{label:"流行",value:"流行"}),y(L,{label:"摇滚",value:"摇滚"}),y(L,{label:"民谣",value:"民谣"}),y(L,{label:"电子",value:"电子"}),y(L,{label:"说唱",value:"说唱"}),y(L,{label:"R&B",value:"R&B"}),y(L,{label:"爵士",value:"爵士"}),y(L,{label:"古典",value:"古典"}),y(L,{label:"轻音乐",value:"轻音乐"}),y(L,{label:"纯音乐",value:"纯音乐"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),y(n,{label:"语言",width:"150",align:"center"},{default:w(({row:e})=>[y(q,{modelValue:e.language,"onUpdate:modelValue":a=>e.language=a,size:"small",placeholder:"选择语言",clearable:""},{default:w(()=>[y(L,{label:"国语",value:"国语"}),y(L,{label:"粤语",value:"粤语"}),y(L,{label:"英语",value:"英语"}),y(L,{label:"日语",value:"日语"}),y(L,{label:"韩语",value:"韩语"}),y(L,{label:"其他",value:"其他"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),y(n,{label:"当前值",width:"200",align:"center"},{default:w(({row:e})=>[v("div",F,[e.genre?(h(),k(d,{key:0,size:"small",type:"info"},{default:w(()=>[D("类型: "+u(e.genre),1)]),_:2},1024)):C("",!0),e.language?(h(),k(d,{key:1,size:"small",type:"success"},{default:w(()=>[D("语言: "+u(e.language),1)]),_:2},1024)):C("",!0)])]),_:1})]),_:1},8,["data"])),[[ee,t.batchLoading]])])]),_:1},8,["modelValue"]),y(Y,{modelValue:t.quickGenreDialogVisible,"onUpdate:modelValue":a[15]||(a[15]=e=>t.quickGenreDialogVisible=e),title:"快速设置类型",width:"400px"},{footer:w(()=>[y(r,{onClick:a[14]||(a[14]=e=>t.quickGenreDialogVisible=!1)},{default:w(()=>[...a[38]||(a[38]=[D("取消",-1)])]),_:1}),y(r,{type:"primary",onClick:t.applyQuickGenre},{default:w(()=>[...a[39]||(a[39]=[D("应用到所有歌曲",-1)])]),_:1},8,["onClick"])]),default:w(()=>[y(O,{"label-width":"80px"},{default:w(()=>[y(U,{label:"选择类型"},{default:w(()=>[y(q,{modelValue:t.quickGenreValue,"onUpdate:modelValue":a[13]||(a[13]=e=>t.quickGenreValue=e),placeholder:"请选择类型",style:{width:"100%"}},{default:w(()=>[y(L,{label:"流行",value:"流行"}),y(L,{label:"摇滚",value:"摇滚"}),y(L,{label:"民谣",value:"民谣"}),y(L,{label:"电子",value:"电子"}),y(L,{label:"说唱",value:"说唱"}),y(L,{label:"R&B",value:"R&B"}),y(L,{label:"爵士",value:"爵士"}),y(L,{label:"古典",value:"古典"}),y(L,{label:"轻音乐",value:"轻音乐"}),y(L,{label:"纯音乐",value:"纯音乐"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),y(Y,{modelValue:t.quickLanguageDialogVisible,"onUpdate:modelValue":a[18]||(a[18]=e=>t.quickLanguageDialogVisible=e),title:"快速设置语言",width:"400px"},{footer:w(()=>[y(r,{onClick:a[17]||(a[17]=e=>t.quickLanguageDialogVisible=!1)},{default:w(()=>[...a[40]||(a[40]=[D("取消",-1)])]),_:1}),y(r,{type:"primary",onClick:t.applyQuickLanguage},{default:w(()=>[...a[41]||(a[41]=[D("应用到所有歌曲",-1)])]),_:1},8,["onClick"])]),default:w(()=>[y(O,{"label-width":"80px"},{default:w(()=>[y(U,{label:"选择语言"},{default:w(()=>[y(q,{modelValue:t.quickLanguageValue,"onUpdate:modelValue":a[16]||(a[16]=e=>t.quickLanguageValue=e),placeholder:"请选择语言",style:{width:"100%"}},{default:w(()=>[y(L,{label:"国语",value:"国语"}),y(L,{label:"粤语",value:"粤语"}),y(L,{label:"英语",value:"英语"}),y(L,{label:"日语",value:"日语"}),y(L,{label:"韩语",value:"韩语"}),y(L,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}],["__scopeId","data-v-428e42f1"]])},setup:()=>({userStore:a(),activeTab:p("artist")})},[["render",function(e,a,l,t,o,i){const r=_("el-alert"),n=_("ArtistManagement"),s=_("el-tab-pane"),d=_("SongManagement"),c=_("el-tabs");return h(),f("div",J,[a[3]||(a[3]=v("div",{class:"page-header"},[v("h2",null,"🔧 管理后台"),v("p",{class:"subtitle"},"系统管理与数据维护")],-1)),y(r,{title:"管理员专属区域",type:"success",closable:!1,"show-icon":"",style:{"margin-bottom":"30px"}},{default:w(()=>{var e;return[a[1]||(a[1]=D(" 欢迎 ",-1)),v("strong",null,u(null==(e=t.userStore.userInfo)?void 0:e.nickname),1),a[2]||(a[2]=D("，你当前拥有管理员权限 ",-1))]}),_:1}),y(c,{modelValue:t.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>t.activeTab=e),type:"card"},{default:w(()=>[y(s,{label:"🎤 歌手管理",name:"artist"},{default:w(()=>[y(n)]),_:1}),y(s,{label:"🎵 歌曲管理",name:"song"},{default:w(()=>[y(d)]),_:1})]),_:1},8,["modelValue"])])}],["__scopeId","data-v-8722bc53"]]);export{O as default};
